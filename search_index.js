var documenterSearchIndex = {"docs":
[{"location":"chapter7/#.-Writing-test-software-1","page":"7 - Writing test software","title":"5. Writing test software","text":"","category":"section"},{"location":"chapter7/#runtest.jl-1","page":"7 - Writing test software","title":"runtest.jl","text":"","category":"section"},{"location":"chapter7/#Cases-1","page":"7 - Writing test software","title":"Cases","text":"","category":"section"},{"location":"chapter7/#","page":"7 - Writing test software","title":"7 - Writing test software","text":"@testset \"SubscriberType test\" begin\n    @test SubscriberType(0) == MEAN_CALCULATOR\n    @test SubscriberType(1) == STD_CALCULATOR\n    @test SubscriberType(2) == PLOTTER\nend","category":"page"},{"location":"references/#References-1","page":"References","title":"References","text":"","category":"section"},{"location":"references/#Julia-1","page":"References","title":"Julia","text":"","category":"section"},{"location":"references/#","page":"References","title":"References","text":"Think Julia\nThe Emergent Features of JuliaLang: Part I\nThe Emergent Features of JuliaLang: Part II - Traits\nParallel Computing\nNaelsonDouglas/DistributedMachineLearningThesis\nBlue: a Style Guide for Julia\nPerformance Tips","category":"page"},{"location":"references/#Julia-Debugging-1","page":"References","title":"Julia Debugging","text":"","category":"section"},{"location":"references/#","page":"References","title":"References","text":"A Julia interpreter and debugger","category":"page"},{"location":"references/#Julia-Unicode-1","page":"References","title":"Julia Unicode","text":"","category":"section"},{"location":"references/#","page":"References","title":"References","text":"Unicode Input","category":"page"},{"location":"references/#Julia-Wikibooks-1","page":"References","title":"Julia Wikibooks","text":"","category":"section"},{"location":"references/#","page":"References","title":"References","text":"Index\nIntroducing Julia/Types\nIntroducing Julia/DataFrames\nIntroducing Julia/Working with dates and times","category":"page"},{"location":"references/#Julia-Machine-Learning-1","page":"References","title":"Julia Machine Learning","text":"","category":"section"},{"location":"references/#","page":"References","title":"References","text":"Data science for managers: Programming languages","category":"page"},{"location":"references/#Julia-Package-Manger-1","page":"References","title":"Julia Package Manger","text":"","category":"section"},{"location":"references/#","page":"References","title":"References","text":"A Brief Introduction to Package Management with Julia 1.0\nCreating Packages\nPkg + BinaryBuilder – The Next Generation\nOverview popular Julia packages","category":"page"},{"location":"references/#IJulia-1","page":"References","title":"IJulia","text":"","category":"section"},{"location":"references/#","page":"References","title":"References","text":"Running a notebook server","category":"page"},{"location":"references/#Atom/Juno-Documentation-1","page":"References","title":"Atom/Juno Documentation","text":"","category":"section"},{"location":"references/#","page":"References","title":"References","text":"Juno Documentation","category":"page"},{"location":"references/#Docker-1","page":"References","title":"Docker","text":"","category":"section"},{"location":"references/#","page":"References","title":"References","text":"Dockerize an SSH service\nssh key generation using dockerfile\nMultiple Computer Example\nRunning the \"Real Time Voice Cloning\" project in Docker","category":"page"},{"location":"references/#Miscellaneous-1","page":"References","title":"Miscellaneous","text":"","category":"section"},{"location":"references/#","page":"References","title":"References","text":"Auto Cue\nThis AI Clones Your Voice After Listening for 5 Seconds\nJulia Computing and NVIDIA Bring Julia GPU Computing to Arm\nOptimizing Serial Code","category":"page"},{"location":"blog/#Blog-1","page":"Blog","title":"Blog","text":"","category":"section"},{"location":"blog/#/01/2020-1","page":"Blog","title":"02/01/2020","text":"","category":"section"},{"location":"blog/#","page":"Blog","title":"Blog","text":"Today I copied the blog from the AppliGate website to The course environment.","category":"page"},{"location":"blog/#","page":"Blog","title":"Blog","text":"Things are going well with the course. The following modules are now ready(!):","category":"page"},{"location":"blog/#","page":"Blog","title":"Blog","text":"AppliMaster - the basic module.\nAppliInvoicing - the application itself.\nAppliSales - sending test orders to AppliInvoicing.\nAppliGeneralLedger - to process journal entries from AppliInvoicing.","category":"page"},{"location":"blog/#","page":"Blog","title":"Blog","text":"In the last couple of weeks, I have been experimenting with the communication between the different parts. For the time being, I decided to work with Julia's channels. The implementation is in AppliMaster, testremotechannels.jl.","category":"page"},{"location":"blog/#-1","page":"Blog","title":"2019","text":"","category":"section"},{"location":"blog/#/05/2019-1","page":"Blog","title":"12/05/2019","text":"","category":"section"},{"location":"blog/#","page":"Blog","title":"Blog","text":"Last week I managed to establish an SSH connection between two containers. This week I could finish Chapter 9, Create the Container, more or less. The next step is to test a channel connection between two containers.","category":"page"},{"location":"blog/#/15/2019-1","page":"Blog","title":"11/15/2019","text":"","category":"section"},{"location":"blog/#","page":"Blog","title":"Blog","text":"Almost ready to link www.appligate.nl to rbontekoe.github.io. We have to change the CNAME record at the provider from appligate.appspot.com to rbontekoe.github.io.","category":"page"},{"location":"blog/#","page":"Blog","title":"Blog","text":"We also started with writing the course material for the online training BAWJ.","category":"page"},{"location":"blog/#/21/2019-1","page":"Blog","title":"10/21/2019","text":"","category":"section"},{"location":"blog/#","page":"Blog","title":"Blog","text":"Why not build a website with Documenter.jl? We did it today. When you go to AppliGate, you enter our new site. In the meantime, we got more experience with Julia. E.g., we resized Rob's picture with Images.jl. It was straightforward.","category":"page"},{"location":"blog/#","page":"Blog","title":"Blog","text":"julia> using Images\n\njulia> img = load(\"rob.png\")\n\njulia> img2 = imresize(img, ratio=0.5)\n\njulia> save(\"rob2.png\", img2)","category":"page"},{"location":"blog/#/17/2019-1","page":"Blog","title":"9/17/2019","text":"","category":"section"},{"location":"blog/#","page":"Blog","title":"Blog","text":"Reading Think Julia I discovered the package Serialization. While playing with it, I realized that it could solve my CQRS and Event Sourcing problem. With the method serialize, you can create a text representation of an object, that you can store. With deserialize, you do the reverse. Serialize writes to an IOStream, and deserialize reads from it. An IOStream can be an IOBuffer or a file. It makes Event Sourcing easier.","category":"page"},{"location":"blog/#","page":"Blog","title":"Blog","text":"I also looked at channels. You can use channels to communicate between processes. For the time being, I will use inter CPU-core communication. Later on, I extend it to remote nodes. I only have to expand the methods of createSubscriber and createPublisher.","category":"page"},{"location":"blog/#/10/2019-1","page":"Blog","title":"9/10/2019","text":"","category":"section"},{"location":"blog/#","page":"Blog","title":"Blog","text":"Last week I was busy implementing the database methods. I realized that the domain objects I wanted to keep must have an identification code. So Subscriber, Publisher, and Message got an id. To create the id, I used the hash function with a name and time as a parameter. It had consequences for the documentation. In the example code, I used the tag 'jldoctest,' so Documenter could test the example code during the generation of the manual. Because the ids keep changing, I had to give up. Too bad, because I found that a strong point of Documenter.jl. I replaced the test tag 'jldoctest' with the language tag 'julia.' Maybe there is something to do against continually changing values.","category":"page"},{"location":"blog/#","page":"Blog","title":"Blog","text":"Infected by the CQRS thought, I decided to add changed domain objects to the database instead of modifying an existing record.","category":"page"},{"location":"chapter1/#.-Introduction-Notebook-1","page":"1 - Intro Notebook","title":"1. Introduction Notebook","text":"","category":"section"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Pages = [\"chapter1.md\"]","category":"page"},{"location":"chapter1/#What-is-a-notebook?-1","page":"1 - Intro Notebook","title":"What is a notebook?","text":"","category":"section"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"In this case, \"notebook\" or \"notebook documents\" denote documents that contain both code and rich text elements, such as figures, links, equations, ... Because of the mix of  code and text elements, these documents are the ideal place to bring together an analysis description, and its results, as well as, they can be executed perform the data analysis in real tme.See","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Top","category":"page"},{"location":"chapter1/#Options-to-use-a-notebook-1","page":"1 - Intro Notebook","title":"Options to use a notebook","text":"","category":"section"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"You have several option to work with IJulia:","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"You have installed Julia on your own machine.\nYou have installed Docker on your own machine and run IJulia from a container with Julia and IJulia installed.\nYou make use of the IJulia server installed on the machne of your instructor.","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"The IJulia Notebook is installed on the machine of the instructor, but you can also install IJula on your own notebook. Follow the instruction in the appendix.","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Top","category":"page"},{"location":"chapter1/#Starting-IJulia-1","page":"1 - Intro Notebook","title":"Starting IJulia","text":"","category":"section"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Ask your instructor for the public ip-address and the token.","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"The first time you enter the IJulia server, it will ask you one time for the token.","category":"page"},{"location":"chapter1/#Login-to-the-IJulia-server-1","page":"1 - Intro Notebook","title":"Login to the IJulia server","text":"","category":"section"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Step Action Comment\n1 Start browser \n2 http://x.x.x.x:8888 Ask instructor for the complete the public ip-address of the IJulia server\n3 Enter the token in the Password or token field \n4 Click on the Log in button ","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Top","category":"page"},{"location":"chapter1/#Create-a-new-notebook-1","page":"1 - Intro Notebook","title":"Create a new notebook","text":"","category":"section"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"(Image: Test)","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Step Action/Response Comment\n1 Click on work directory \n2 Click on button New Open New menu.\n3 Select on item Julia.x.x.x Create a new Julia Notebook.\n New Notebook is opened \n4 Place the cursor in the first cel In this cell you can type your code.\n5 println(\"Hello World!\") Type your Julia code.\n6 Shift-Enter Activate the code and create a new cell","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Top","category":"page"},{"location":"chapter1/#Notebook-commands-1","page":"1 - Intro Notebook","title":"Notebook commands","text":"","category":"section"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Working with a Notebook is rather intuitive. Here are some commands you will often use.","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Command Comment\nShift-Enter Execute code and create a new cell below.\nCtrl-Enter Execute code and stay in the cell\nTab Code completion, e.g. printl-Tab => println.\nDouble Tab List with option, e.g. print-Tab displays print, println, and printstyled\n\\sqrt-tab Special characters, in this case √.\nEsc-A Create empty cell above the current cell.\nEsc-B Create empty cell below current cell.\nEsc-M Change to a markdown cell.\nEsc-Y Change to code cell.","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Click on the keyboard icon to see more options.","category":"page"},{"location":"chapter1/#","page":"1 - Intro Notebook","title":"1 - Intro Notebook","text":"Top","category":"page"},{"location":"chapter1/#Summary-1","page":"1 - Intro Notebook","title":"Summary","text":"","category":"section"},{"location":"chapter13/#.-Running-the-containers-1","page":"13 - Running the containers","title":"9. Running the containers","text":"","category":"section"},{"location":"chapter4/#.-Implementing-the-design-1","page":"4 - Implementing the design","title":"4. Implementing the design","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"UNDER DEVELOPMENT!","category":"page"},{"location":"chapter4/#What-you-will-learn-1","page":"4 - Implementing the design","title":"What you will learn","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Pages = [\"chapter4.md\"]","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"In chapter 3 we saw how the design of the invoicing module might look like. In this chapter we will implement the design. Two other module that will come in the picture are: AppliSales and AppliSQLite.","category":"page"},{"location":"chapter4/#Development-environment-1","page":"4 - Implementing the design","title":"Development environment","text":"","category":"section"},{"location":"chapter4/#Application-folder-and-file-structure-1","page":"4 - Implementing the design","title":"Application folder and file structure","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"The final folder structure and files for our Julia application.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"AppliInvoicing\n- src\n  - api\n    - api.jl\n  - domain\n    - domain.jl\n  - infrastructure\n    - infrastructure.jl\n  - AppliInvoicingl.jl\n  - general_ledger\n  - main.jl\n  - print_invoice.jl\n  - test.jl\n- test\n  - runtests.jl","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Figure 1","category":"page"},{"location":"chapter4/#Activity-4.1:-Create-the-minimum-folder-structure-and-the-file-domain.jl-1","page":"4 - Implementing the design","title":"Activity 4.1: Create the minimum folder structure and the file domain.jl","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"In this activity you will create the folder structure for our invoicing process. You partial set-up the folder structure according to figure 1:","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Create the base folder AppliInvoicing.\nCreate a repository on GitHub.\nCreate the folder domainunder src.\nCreate the file domain.jl.","category":"page"},{"location":"chapter4/#Create-the-base-folder-AppliInvoicing-1","page":"4 - Implementing the design","title":"Create the base folder AppliInvoicing","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"All steps are necessary, because we want to create a Julia module form our code.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Prerequisites","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Your computer OS is Ubuntu 18.04.\nYou have sudo (administraton) rights.\ngit installed.\natom/juno installed.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"You can install git with the command: sudo apt-get install git.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"To install juno see the next instruction.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Step Action Comment\n1 $ mkdir julia-projects Create a working directory.\n2 $ cd julia-projects \n3 $ julia Start Julia.\n4 julia > ] Open the package manager.\n5 pkg> generate AppliInvoicing Generate e.g. the package AppliInvoicing. Response:","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Generating project AppliInvoicing:     AppliInvoicing/Project.toml     AppliInvoicing/src/AppliInvoicing.jl","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"We come back to the generate files in chapter 6. Project.toml has the package name and its dependencies.","category":"page"},{"location":"chapter4/#Create-a-repository-on-GitHub-1","page":"4 - Implementing the design","title":"Create a repository on GitHub","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Leave the package manager and Julia.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Step Action Comment\n6 Go to GitHub E.g. https://github.com/rbontekoe. Create an account if you don't have one.\n7 Click on the tab Repositories \n8 Click on the green button New Botton upper right side.\n9 Give the repository a name E.g. AppliInvoicing.jl\n10 Give the repository a description E.g. Invoicing module for the course.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"warning: Warning\nStart with a empty repository!After you pushed your first files you can define a licence and .gitignore for Julia, e.g.Add .gitignore: julia.\nAdd licence: MIT licence.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Step Action Comment\n11 Click on the green button Create repository Button is located at the bottom side.\n12 Return to your computer and enter the folder AppliInvoicing ","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Install git: apt-get install git.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Step Action Comment\n13 $ echo \"# AppliInvoicing\" >> README.md Create README.md file.\n14 $ git init \n16 $ git status Response:","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"`On branch master","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"No commits yet","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Untracked files:   (use \"git add <file>...\" to include in what will be committed)","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Project.toml\nREADME.md\nsrc/","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"nothing added to commit but untracked files present (use \"git add\" to track)`","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Step Action Comment\n17 $ git add Project.toml Add file to staged changes.\n18 $ git add README.md \n19 $ git add src/ \n20 $ git status Response:","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"`On branch master","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"No commits yet","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Changes to be committed:   (use \"git rm –cached <file>...\" to unstage)","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"new file:   Project.toml\nnew file:   README.md\nnew file:   src/AppliInvoicing.jl`","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Step Action Comment\n21 $ git commit -m \"first commit\" Response:","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"[master (root-commit) 3b06d57] first commit  3 files changed, 10 insertions(+)  create mode 100644 Project.toml  create mode 100644 README.md  create mode 100644 src/AppliInvoicing.jl","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Step Action Comment\n22 $ git remote add origin https://github.com/rbontekoe/AppliInvoicing.jl.git \n23 $ git push -u origin master push changed to your GitHub repository.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Check on GitHub the update.","category":"page"},{"location":"chapter4/#Create-the-folder-domain-under-the-src-folder-1","page":"4 - Implementing the design","title":"Create the folder domain under the src-folder","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Step Action Comment\n1 Enter the AppliInvoicing folder \n2 $ atom . Start Atom in the current directory AppliInvoicing.\n3 Remove all Taps in the right pane. The Tabs are: Telemerty Consent, Welcome, and Welcom Guide. A tab will be remove by clicking on the x-symbol.\n4 Right click on: src \n5 Select: New folder \n6 Type: domain \n7 Press: <Enter> The new folder domain appears under the folder src.\n8 Select the folder: domain \n9 Right click on: domain \n10 Select: New file \n11 Type: domain.jl \n12 Press: <Enter> A new document appears in the pane next to the navigation pane.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"In the navigation pane you see the next folders and files:","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"- AppliInvoicing\n  - src\n    - domain\n      - domain.jl\n\t\tAppliInvoicing.jl\n\tProject.toml\n\tREADME.md","category":"page"},{"location":"chapter4/#domain.jl-1","page":"4 - Implementing the design","title":"domain.jl","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"When us use packages in your application, define it at the top of the domain.jl file.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"We use date and time in our application. To activate the build-in package you use the statement: using Dates.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"To define a data structure and type, we use the keyword struct. The body consists of the fields of the data structure.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Use constructors to define standard values, like the default valuta symbol. It simplifies the creating op the object.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"To keep things clear we create the following objects as part of the invoice:","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"MetaInvoice, containing references to the order, the training, and the currency.\nHeaderInvoice, contains all the general information.\nOpentrainingItem, the invoice body consists of one item.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"using Dates # module use date functions\n\n# Meta data\nstruct MetaInvoice\n    order_id::String\n    training_id::String\n    date::DateTime #1\n    currency::String\n    currency_ratio::Float64\n    # Constructors\n    MetaInvoice(order_id, training_id) = new(order_id, training_id, now(), \"€\", 1.0) #2\n    MetaInvoice(order_id, training_id, date, currency, currency_ratio) = new(order_id, training_id, now(), currency, currency_ratio)\nend # defined MetaInvoice\n\nstruct Header #3\n    invoice_nbr::String #4\n    name::String\n    address::String\n    zip::String\n    city::String\n    country::String\n    order_ref::String\n    name_contact::String\n    email_contact::String\nend # defined HeaderInvoice\n\nstruct OpentrainingItem #5\n    name_training::String\n    date::DateTime\n\t\tdays::Int64\n    price_per_student::Float64\n    students::Array{String, 1}\n    vat_perc::Float64\n    # constructors\n    OpentrainingEntry(name_training, date, days, price_per_student, students) = new(name_training, days, date, price_per_student, students, 0.21)\n    OpentrainingEntry(name_training, date, price_per_student, students, vat_perc) = new(name_training, days, date, price_per_student, students, vat_perc)\nend # defined OpentrainingItem\n\nstruct UnpaidInvoice\n    id::String\n    meta::MetaInvoice\n    header::Header\n    body::OpentrainingItem\nend # defined UnpaidInvoice","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"#1 Invoice date","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"#2 We assume that most students are from a country in Europe where they have the euro as currency.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"#3 Information from the order form.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"#4 In the future we will automatically generate a unique id.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"#5 Course information and students who attend the training.","category":"page"},{"location":"chapter4/#Exercice-4.1-1","page":"4 - Implementing the design","title":"Exercice 4.1","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Copy the domain data to the domain.jl file in atom.\nSelect the first statement, and press <Enter>. The line will be evaluated. Repeat for all elements.\nSave the file with Ctrl-S.\nCreate a folder api under the scr-folder.\nCreate the file api.jl in the folder api.","category":"page"},{"location":"chapter4/#api.jl-1","page":"4 - Implementing the design","title":"api.jl","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"In the API we only use Julia code and the elements from the domain, the basic idea behind the onion architecture.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"We use the include statement to have access to the domain elements. The relative path is to the domain.jl file.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"Basically, we define in the API the functions that our program needs. When the function has more than one statement, we embed the statements between a begin ... end block.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"The function create needs a Order as argument, and an id. As said before in the future we generate a unique id automatically within the block.","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"include(\"../domain/domain.jl\")\n\ncreate(order::Order, invoice_id::String)::UnpaidInvoice = begin\n    meta = MetaInvoice(order.id, order.training.id)\n    header_invoice = Header(\n\t\t    invoice_id, order.org.name, order.org.address, order.org.zip, order.org.city, order.org.country,      order.order_ref, order.contact_name, order.contact_email)\n    body_invoice = OpentrainingItem(order.training.name, order.training.date, order.training.price, order.students)\n\n    invoice = UnpaidInvoice(invoice_id, meta, header_invoice, body_invoice)\nend","category":"page"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"# main.jl\n\ninclude(\"domain/domain.jl\")\n\nheaderInvoice = HeaderInvoice(\"1001\", \"AppliGate\", \"Landweg 74\\n3833 VM Leusden,\\nNetherlands\", \"PO123\", \"Rob Bontekoe\", \"r@b.nl\")\nbodyInvoice = BodyInvoice(\"Learn Smiling, Aug 30, 31 2019 \", 1000.0, [\"Jan\", \"Piet\"])\ninv = InvoiceTraining(headerInvoice, bodyInvoice)\n\n# print header\nprintln(inv.header.nameOrganization)\nprintln(\"Attn. $(inv.header.nameContact)\")\nprintln(\"$(inv.header.cityOrganization)\")\nprintln()\nprint(\"INVOICE\")\nprintln(\"Date: $(Date(inv.date))\")\nprintln(\"Invoice number: $(inv.header.invoiceNbr)\")\nprintln(\"=\"^40)\nprintln(\"Reference: $(inv.header.orderRefOrganization)\")\nprintln()\nprintln(\"Training: $(inv.body.nameTraining)\")\nprintln()\nnbrStudents = length(inv.body.students)\nunitprice = round(inv.body.pricePerStudent * inv.meta.currencyRatio; digits=2)\nprice = round(nbrStudents * unitprice; digits=2)\nvat = round(price*inv.meta.vatPercentage; digits=2)\ntotalprice = round(price + vat; digits=2)\nsymbol = inv.meta.currency\n\nusing Printf # package for formatting numbers\n\nprintln(\"#     Price                        Total\")\nprintln(\"=\"^40)\nprintln(\"$nbrStudents     $(@sprintf(\"%.2f\", unitprice))                   $symbol$(@sprintf(\"%.2f\", price))\")\nprintln()\nprintln(\"STUDENT(S)\")\nprintln(\"-\"^20)\nfor name in inv.body.students\n    println(name)\nend\nprintln()\nprintln(\"VAT                              $symbol$(@sprintf(\"%.2f\", vat))\")\nprintln(\"=\"^40)\nprintln(\"Total price                     $symbol$(@sprintf(\"%.2f\", totalprice))\")","category":"page"},{"location":"chapter4/#API-1","page":"4 - Implementing the design","title":"API","text":"","category":"section"},{"location":"chapter4/#Storage-1","page":"4 - Implementing the design","title":"Storage","text":"","category":"section"},{"location":"chapter4/#Infrastructure-1","page":"4 - Implementing the design","title":"Infrastructure","text":"","category":"section"},{"location":"chapter4/#Dunmmies-1","page":"4 - Implementing the design","title":"Dunmmies","text":"","category":"section"},{"location":"chapter4/#JournalStatement-1","page":"4 - Implementing the design","title":"JournalStatement","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"struct JournalRecord\n    date::DateTime\n    custid::String\n    invnbr::String\n    stmnbr::Int64\n    from::Int64\n    to::Int64\n    debit::Float64\n    credit::Float64\n    vat::Float64\n    pctvat::Float64\n    descr::String\nend","category":"page"},{"location":"chapter4/#Account-General-Ledger-1","page":"4 - Implementing the design","title":"Account General Ledger","text":"","category":"section"},{"location":"chapter4/#","page":"4 - Implementing the design","title":"4 - Implementing the design","text":"struct Account\n    date::DateTime\n    custid::String\n    invnbr::Int64\n    stmnbr::Int64\n    debit::Float6\n    credit::Float6\n    descr::String\nend\n\nstmnbr accounts receivable = 1300\nstmnbr vat = 1501\nstmnbr sales scheduled courses = 8100","category":"page"},{"location":"appendix/#Appendix-1","page":"Appendix","title":"Appendix","text":"","category":"section"},{"location":"appendix/#Introduction-1","page":"Appendix","title":"Introduction","text":"","category":"section"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"I have a Windows 10 laptop with Ubuntu 18.04 installed on a separate disk. I start my machine form this disk.","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"All instalation instructions in this course are based on Ubuntu. Whenever possible I like to create the course environment in a Docker container, for the instructor and for the students.","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"In the course setup I use my machine as IJulia Notebook server.","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Ideas are from Andre Ferrari","category":"page"},{"location":"appendix/#Install-Julia-1","page":"Appendix","title":"Install Julia","text":"","category":"section"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Prerequisites","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Your computer OS is Ubuntu 18.04.","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"|Step        | Action      | Comment | |:––––– | :––––– |:––––– |","category":"page"},{"location":"appendix/#Install-Docker-1","page":"Appendix","title":"Install Docker","text":"","category":"section"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Prerequisites","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Your computer OS is Ubuntu 18.04.","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"See: How To Install Docker On Ubuntu 18.04 Bionic Beaver","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Step Action Comment\n1 sudo apt-get update Update Software Repositories.\n2 sudo apt-get remove docker docker-engine docker.io Uninstall Old Versions of Docker\n3 sudo apt install docker.io Install Docker\n4 sudo systemctl start docker Start and Automate Docker\n5 sudo systemctl enable docker \n6 docker –version Check Docker Version","category":"page"},{"location":"appendix/#Dockerfile-1","page":"Appendix","title":"Dockerfile","text":"","category":"section"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Prerequisites","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Your computer OS is Ubuntu 18.04.\nYou have installed Dockerversion version 0.18.0 or higher.","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"If you have installed Docker, you can create a Docker Image from a Dockerfile. From an image you can create Docker containers.","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"FROM \"jupyter/minimal-notebook\"\n\nUSER root\n\nENV JULIA_VERSION=1.1.0\n\nRUN mkdir /opt/julia-${JULIA_VERSION} && \\\n    cd /tmp && \\\n    wget -q https://julialang-s3.julialang.org/bin/linux/x64/`echo ${JULIA_VERSION} | cut -d. -f 1,2`/julia-${JULIA_VERSION}-linux-x86_64.tar.gz && \\\n    tar xzf julia-${JULIA_VERSION}-linux-x86_64.tar.gz -C /opt/julia-${JULIA_VERSION} --strip-components=1 && \\\n    rm /tmp/julia-${JULIA_VERSION}-linux-x86_64.tar.gz\n\nRUN ln -fs /opt/julia-*/bin/julia /usr/local/bin/julia\n\nUSER $NB_UID\n\n# Add packages and precompile\n\nRUN julia -e 'import Pkg; Pkg.update()' && \\\n    julia -e 'import Pkg; Pkg.add(\"Plots\"); using Plots' && \\\n    # julia -e 'import Pkg; Pkg.add(\"PlotlyJS\"); using PlotlyJS' && \\\n    julia -e 'import Pkg; Pkg.add(\"Distributions\"); using Distributions' && \\\n    julia -e 'import Pkg; Pkg.add(\"Optim\"); using Optim' && \\\n    julia -e 'import Pkg; Pkg.add(\"StatsPlots\"); using StatsPlots' && \\\n    julia -e 'import Pkg; Pkg.add(\"IJulia\"); using IJulia' && \\\n    fix-permissions /home/$NB_USER","category":"page"},{"location":"appendix/#Install-IJulia-1","page":"Appendix","title":"Install IJulia","text":"","category":"section"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Prerequisites","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Your computer OS is Ubuntu 18.04.\nYou have installed Dockerversion version 0.18.0 or higher.","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"note: Note\nThe instruction are based on Ubuntu 18.04. We use the command line in a terminal window.First check whether Docker is installed on your system, by typing docker --version. If the command docker is not recognized, install Docker.","category":"page"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Step Action Comment\n1 Open a terminal window on Ubuntu $ is the prompt of your OS.\n2 $ mkdir work Create the folder work. Optionally, create sub-directories with the names of your students.\n3 $ mkdir julia Create another directory `julia'.\n4 $ cd julia Goto the directory julia.\n5 Copy the code of the section Dockerfile to the clipboard \n6 $ nano Dockerfile Open the text editor nano.\n7 Ctrl-Shift-V Paste the text on the clipboard into the text editor.\n8 Ctrl-O Save the Dockerfile.\n9 Ctrl-X Exit nano\n10 $ ls list the content of the directory julia.\n11 $ cat Dockerfile Display the content of the Dockerfile.\n12 $ docker build -t julia-image . Create a Docker IJulia image. The name of the image is julia-image.\n13 $ docker run -v ~/work:/home/jovjan/work -p 8888:8888 --name julia julia-image Create a Docker container, and the IJulia Notebook server starts.\n14 Ctrl-C Stop the server.","category":"page"},{"location":"appendix/#Using-IJulia-1","page":"Appendix","title":"Using IJulia","text":"","category":"section"},{"location":"appendix/#Instructor-1","page":"Appendix","title":"Instructor","text":"","category":"section"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Step Action/Response Comment\n1 $ docker start julia Start the IJulia.\n2 $ docker exec -it julia bash Start the Docker client.\n3 jovyan@40f8c3bcf0c1:~$ jupyter notebook list Display the token.\n jovyan@40f8c3bcf0c1:~$ jupyter notebook list Currently running servers: http://0.0.0.0:8888/?token=f394613a12c103a2de92e70aa34715b2183d58e3d5580a2e :: /home/jovyan \n4 Select the token In this case: f394613a12c103a2de92e70aa34715b2183d58e3d5580a2e.\n5 Ctrl-Shift-C Copy the token to the clipboard.\n6 Store the key somewhere, so you can email it to your students. \n7 $ Ctrl-D Exit Docker client.","category":"page"},{"location":"appendix/#Important-Docker-commands-1","page":"Appendix","title":"Important Docker commands","text":"","category":"section"},{"location":"appendix/#","page":"Appendix","title":"Appendix","text":"Action Comment\ndocker images Display all Docker Images.\ndocker ps Display all running containers.\ndocker ps - a Display all containers.\ndocker start <name or id> E.g docker start julia.\ndocker exec -it <name or id> <command> E.g docker exec -it julia bash.\ndocker exec -it <name or id> <command> E.g docker exec -it julia julia.\nCtrl-D Exit the container\ndocker stop <name or id> E.g docker stop julia.\ndocker rm -f <name or id> Delete a container.\ndocker rmi <image id> Delete a image.","category":"page"},{"location":"chapter12/#.-Running-functions-remote-1","page":"12 - Running functions remote","title":"11. Running functions remote","text":"","category":"section"},{"location":"chapter12/#What-you-will-learn-1","page":"12 - Running functions remote","title":"What you will learn","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Pages = [\"chapter11.md\"]","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"In lesson 9, Creating SSH enabled Containers, we created two containers: test_sshd and test_sshd2. In this chapter, we learn how to run a function in a remote container test_sshd2. Before we use the model we created in earlier lessons, you will test the containers with the package RbO.jl.","category":"page"},{"location":"chapter12/#Activity-1:-1","page":"12 - Running functions remote","title":"Activity 1:","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"You start the two Docker containers, test_sshd, and test_sshd2. We need to know their Docker IP-addresses. With the command ssh rob@<ip-address>, we enter the test_sshd container. Within this container, we generate a process id bound to the IP-address of test_ssh2.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"We create the file main.jl, which contains the base code for container-container communication.","category":"page"},{"location":"chapter12/#Activities-2a-and-2b:-1","page":"12 - Running functions remote","title":"Activities 2a and 2b:","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Next, we use the example code to create a subscriber based on a name. We prefer to do the test with AppliGate's module RbO.jl. In chapter 12, you will use your modules.","category":"page"},{"location":"chapter12/#Activity-3:-1","page":"12 - Running functions remote","title":"Activity 3:","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"You learn to write a function that can run remotely, and that saves a subscriber in an SQLite database on the container test_sshd2.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#Activity-1:-Start-the-Julia-1.3.0-containers-1","page":"12 - Running functions remote","title":"Activity 1: Start the Julia 1.3.0 containers","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Prerequisites:","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Docker is installed on your computer.\nYou have the two containers test_sshd and test_sshd2 created in chapter 9, Create the Container.\nBoth containers are SSH enabled.\nYou have a Internet connection to download the RbO.jl module.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Steps:","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Start both containers and check their Docker internal IP-address.\nUse SSH to connect from testsshd to testsshd2 and install RbO.jl in both containers.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#Step-1-Start-both-containers-and-check-their-Docker-internal-IP-address-1","page":"12 - Running functions remote","title":"Step 1 - Start both containers and check their Docker internal IP-address","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Step Action Comment\n1 $ docker start test_sshd \n2 $ docker start test_sshd2 \n3 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd e.g. 172.17.0.2\n3 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd2 e.g. 172.17.0.3","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#Step-2-Use-SSH-to-connect-from-test_sshd-to-test_sshd2-and-install-RbO.jl-1","page":"12 - Running functions remote","title":"Step 2 - Use SSH to connect from test_sshd to test_sshd2 and install RbO.jl","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Install RbO in both containers, Example of adding the module","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Step Action Comment\n1 $ ssh rob@172.17.0.2 Enter the container test_sshd.\n2 $ ssh rob@172.17.0.3 Enter the container test_sshd3.\n3 $ julia Start Julia.\n4 julia> ] Go to the package manager.\n5 pkg> add https://github.com/rbontekoe/RbO.jl Install RbO.jl.\n6 Ctrl-C Return to REPL prompt.\n7 Ctrl-D Leave Julia.\n8 Ctrl-D Leave the container test_sshd2.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"note: Note\nIf your container is running on a remote machine, you have to use the ip-address of the remote machine and the exported port of the container to connect to.$ docker start test_sshd # start the container test_sshd$ docker port test_sshd # display the port, e.g. 22/tcp -> 0.0.0.0:32768$ ssh 192.168.xxx.xxx -p 32768 # connect to the container on remote machine","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#Activity-2a:-Start-the-two-containers-and-create-main.jl-1","page":"12 - Running functions remote","title":"Activity 2a: Start the two containers and create main.jl","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Prerequisites:","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Docker is installed on your computer.\nYou have the two containers testsshd and testsshd2 created in Chapter 9, Create the Container.\nBoth containers are SSH-enabled.\nJulia is installed in the directory julia on the containers.\nThe RbO.jl package is installed in both containers.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Steps","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Start the container test_sshd and create main.jl with nano.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#.-Start-the-container-test_sshd-and-test_sshd2-1","page":"12 - Running functions remote","title":"1. Start the container test_sshd and test_sshd2","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Step Action Comment\n1 $ docker start test_sshd Start the first container.\n2 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd Displays docker address, eg, 172.17.0.2.\n3 Take a note of the ip-address of test_sshd \n4 $ docker start test_sshd2 Start the second container.\n5 Take a note of the ip-address of test_sshd2 \n6 $ ssh rob@172.17.0.2 Use the ip-address step 2.\n7 $ julia Start Julia, and continue at step 8 of Activity 2: Test the code","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#Example-test-code-1","page":"12 - Running functions remote","title":"Example test code","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"julia> using Distributed\n\njulia> d = Dict([]) # empty directory for pids, used by the calling container\nDict{Any,Any} with 0 entries\n\njulia> addprocs([(\"rob@172.17.0.3\", 1)])\n\njulia> d[\"test_sshd2\"] = last(workers())\n\njulia> @everywhere using RbO\n\njulia> @everywhere f1(x) = createSubscriber(x)\n\njulia> s1 = remotecall_fetch(f1, d[\"test_sshd2\"], \"Daisy\")\n","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#Activity-2b:-Test-the-code-1","page":"12 - Running functions remote","title":"Activity 2b: Test the code","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Prerequisites:","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Actitvity 1","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Step Action Comment\n8 Copy all the Test code example code to the clipboard, including the julia prompt and the response \n9 Return to the container \n10 Ctrl-Shfi-V Paste the text on the clipboard in the Julia REPL.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"The result should look like the next example:","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"julia> s1 = remotecall_fetch(f1, d[\"test_sshd2\"], \"Daisy\")\nSubscriber(\"884704875723870469\", \"Daisy\", \"\", MEAN_CALCULATOR)","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#Activity-3:-Run-a-function-in-the-remote-container-1","page":"12 - Running functions remote","title":"Activity 3: Run a function in the remote container","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Create and save a subscriber in the container test_sshd2. Then display all saved subscribers from a table.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Prerequisites:","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Activity 1\nActivity 2\nThe package SQLite.jl is installed in both containers.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Steps:","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Install SQLite.jl\nTry the example code\nUse the RbO.jl documentation","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#.-Install-SQLite.jl-1","page":"12 - Running functions remote","title":"1. Install SQLite.jl","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Step Action Comment\n1 Enter test_sshd and start Julia \n2 Go to the package manager \n3 pkg > add SQLite ","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#.-Try-the-example-code-1","page":"12 - Running functions remote","title":"2. Try the example code","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Try the code below.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"\nusing Distributed\n\nd = Dict([])\n\naddprocs([(\"rob@172.17.0.3\", 1)])\n\nd[\"test_sshd2\"] = last(workers())\n\n@everywhere using RbO\n\n# define a new function to create a new subscriber and save it in a database\n@everywhere f2(x) = begin\n  \ts = createSubscriber(x) # create a subscriber\n\tdb = connect(\"./rbo.sqlite\") # connect to database\n\tcreate(db, \"subscribers\", [s]) # save subscriber in database\nend\n\nremotecall_fetch(f2, 2, \"Mickey\")\n\n# define a new function for displaying all subscribers\n@everywhere f3(x) = begin\n   db = connect(\"./rbo.sqlite\") # connect to database\n   gather(db, x) # list all items in table x\nend\n\n# Get list of subscrobers\nremotecall_fetch(f3, 2, \"subscribers\")\n\n# Remove process\nrmprocs(d[\"test_sshd2\"])\n\n# Remove key from dictionary\ndelete!(d, \"test_sshd2\")\n","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"","category":"page"},{"location":"chapter12/#.-Use-the-RbO.jl-documentation-1","page":"12 - Running functions remote","title":"3. Use the RbO.jl documentation","text":"","category":"section"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Use the documentation to do the next steps.","category":"page"},{"location":"chapter12/#","page":"12 - Running functions remote","title":"12 - Running functions remote","text":"Step Action Comment\n1 Use the command connect to create a link to the on-disk database rbo.sqlite \n2 Use the command 'gather' to retieve data from the SQL table subscribers ","category":"page"},{"location":"chapter6/#Testing-the-application-1","page":"6 - Testing the application","title":"Testing the application","text":"","category":"section"},{"location":"chapter6/#Communication-flow-1","page":"6 - Testing the application","title":"Communication flow","text":"","category":"section"},{"location":"chapter6/#","page":"6 - Testing the application","title":"6 - Testing the application","text":"+--------------+\n| 1. Master    |\n+--------------+\n    Order/\n BankStatement¹\n       ¦\n       ↓\n     ⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼⁼ rx¹\n          ↑⁴                ↓\n          ¦    Order or     ◊²\n          ¦  BankStatement ↙ ↘ JournalEntry\n          ¦         tx³ ⁼⁼⁼   ⁼⁼⁼\n    JournalEntry         ↓     ↓\n          +--------------+     +--------------------+\n          | 2. Invoicing |     | 3. General Ledger  |  Workers\n          +--------------+     +--------------------+\n","category":"page"},{"location":"chapter6/#","page":"6 - Testing the application","title":"6 - Testing the application","text":"¹ rx, the channel that receives the output from the modules, created by the Master. The Master also generate the test data for the channel: Array{Order, 1} and Array{BankStatement, 1}.","category":"page"},{"location":"chapter6/#","page":"6 - Testing the application","title":"6 - Testing the application","text":"² Dispatcher, a job running in the Master, takes an object from rx and pushes it to the relevant tx channel.","category":"page"},{"location":"chapter6/#","page":"6 - Testing the application","title":"6 - Testing the application","text":"³ tx is a task bounded channel. The task takes the entity from his channel and processes it.","category":"page"},{"location":"chapter6/#","page":"6 - Testing the application","title":"6 - Testing the application","text":"⁴ The task pushes the output, Array{JournalEntry, 1} in this diagram, to the rx channel.","category":"page"},{"location":"chapter6/#","page":"6 - Testing the application","title":"6 - Testing the application","text":"See: testremotechannels.jl","category":"page"},{"location":"chapter6/#Output:-1","page":"6 - Testing the application","title":"Output:","text":"","category":"section"},{"location":"chapter6/#","page":"6 - Testing the application","title":"6 - Testing the application","text":"[ Info: running test_remote_channel.jl\n[ Info: number of processes is 4\n[ Info: task_1 will wait for data\n[ Info: task_2 will wait for data\n[ Info: task_3 will wait for data\n[ Info: Dispatcher started\n\n[ Info: Master will ask for 3 test orders from the AppliSales module\n[ Info: Master received 3 orders\n[ Info: Master will put 3 orders on rx channel\n[ Info: Dispatcher received Array{AppliSales.Order,1}\n[ Info: task_1 received Array{AppliSales.Order,1}\n[ Info: task_1 will process 3 orders remote \\#1\n[ Info: task_1 will put 3 journal entries on rx channel\n[ Info: task_1 will wait for data\n[ Info: Dispatcher received Array{AppliGeneralLedger.JournalEntry,1}\n[ Info: task_2 received Array{AppliGeneralLedger.JournalEntry,1}\n[ Info: task_2 will process 3 journal entries remote \\#1\n[ Info: task_2 saved 3 journal entries\n[ Info: task_2 will wait for data\n[ Info: Master will read file with 2 bank statements\n[ Info: Master got 2 bank statements\n[ Info: Master will put 2 bank statements on rx channel\n[ Info: Dispatcher received Array{AppliInvoicing.BankStatement,1}\n[ Info: task_3 received Array{AppliInvoicing.BankStatement,1}\n[ Info: task_3 will match unpaid invoices with bank statements\n[ Info: task_3 will put 2 journal entries on rx channel\n[ Info: task_3 will wait for data\n[ Info: Dispatcher received Array{AppliGeneralLedger.JournalEntry,1}\n[ Info: task_2 received Array{AppliGeneralLedger.JournalEntry,1}\n[ Info: task_2 will process 2 journal entries remote \\#1\n[ Info: task_2 saved 2 journal entries\n[ Info: task_2 will wait for data\n[ Info: Dispatcher received String\n┌ Warning: No task found for type String\n└ @ Main ~/julia-pro#1jects/tc/AppliMaster/src/api/myfunctions.jl:103\n\n[ Info: running check_dbs.jl\n[ Info: Balance of accounts receivable is 1210.0. Should be 1210\n[ Info: Sales is 4000.0. Should be 4000.","category":"page"},{"location":"chapter6/#","page":"6 - Testing the application","title":"6 - Testing the application","text":"#1 remote means: running a task on another process (core).","category":"page"},{"location":"chapter8/#","page":"8 - Documenting the modules","title":"8 - Documenting the modules","text":"Documenting the modules","category":"page"},{"location":"chapter8/#documenter.jl-1","page":"8 - Documenting the modules","title":"documenter.jl","text":"","category":"section"},{"location":"chapter8/#Basic-folder-structure-1","page":"8 - Documenting the modules","title":"Basic folder structure","text":"","category":"section"},{"location":"chapter8/#make.jl-1","page":"8 - Documenting the modules","title":"make.jl","text":"","category":"section"},{"location":"chapter8/#Referring-to-modules-1","page":"8 - Documenting the modules","title":"Referring to modules","text":"","category":"section"},{"location":"chapter8/#Run-tests-1","page":"8 - Documenting the modules","title":"Run tests","text":"","category":"section"},{"location":"chapter3/#The-design-1","page":"3 - The design","title":"3 - The design","text":"","category":"section"},{"location":"chapter3/#What-you-will-learn-1","page":"3 - The design","title":"What you will learn","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Pages = [\"chapter3.md\"]","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"First, let's look at some terms and definitions. We'll convert the procedure Invoicing into an activity diagram. Using the Onion Architecture pattern, we define the Domain objects and the Julia API-functions. In the Infrastructure layer, we put the functions that interact with the outer world and the inner layers.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"","category":"page"},{"location":"chapter3/#Terms-and-definitions-1","page":"3 - The design","title":"Terms and definitions","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The points of attention are:","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Procedure,\nDomain-driven design,\nDistributed processing, and\nStyle conventions.","category":"page"},{"location":"chapter3/#Procedure-1","page":"3 - The design","title":"Procedure","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"A procedure is a description of work practice, a workflow. It describes a series of activities or actions in a particular order and interacts with people and machines. Actions make use of resources. Data, a service or a product, is the output of work.","category":"page"},{"location":"chapter3/#Domain-driven-design-1","page":"3 - The design","title":"Domain-driven design","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Each process should be domain-specific. Subject matter experts and users of the domain speak the same language and use the same definitions and synonyms for concepts and objects. It leads to a Domain-driven design paradigm.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The Onion Architecture lends itself perfectly to the domain-driven design pattern. It divides an application into four areas: core, domain, API, and infrastructure.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The core consists out of the Julia language constructs and Julia modules. Modules are also called packages.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The next layer, the domain, defines the domain entities and concepts. Between its elements, there must be coherence. You only use constructs from the core. UnpaidInvoice is an example.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The next peel is the API. The API consists of Julia functions that operate on the domain elements, and are used to create programs. You only use constructs from the core and the domain.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"create_unpaidinvoice, create_paidinvoice, create_pdf are examples.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The infrastructure layer is the ultimate peel. With its functions, it communicates with the external world. Adapters overcome mismatches between interfaces. When you write you the code, you use elements from the inner layers.","category":"page"},{"location":"chapter3/#Distributed-processing-1","page":"3 - The design","title":"Distributed processing","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Programs, written in Julia language, also can run on other processor cores. Even in Docker containers on remote machines. Julia uses the master-worker concept. It means that the master executes Julia's functions on workers.","category":"page"},{"location":"chapter3/#Style-conventions-1","page":"3 - The design","title":"Style conventions","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The article Blue: a Style Guide for Julia describes the style conventions.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"","category":"page"},{"location":"chapter3/#A-procedure-as-a-starting-point-1","page":"3 - The design","title":"A procedure as a starting point","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"In 1994 we were delivering Lotus Notes instructor-led training in the Netherlands. We became ISO-9001 certified one year later. ISO is short for the International Organization for Standardization. A part of ISO is the section procedures.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"A procedure describes a workflow or business process. It specifies the activities to be carried out by people or machines and the resources that are required to produce a result.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"An input triggers a process. Every action creates an output, most of the time, modified information or side-effects such as saving data.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The example I use in the course is the procedure Invoicing.","category":"page"},{"location":"chapter3/#The-course-example-1","page":"3 - The design","title":"The course example","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"In 1998 we rewrote our procedures as a table. Every row represents an activity or action. Next to the events are the columns with the roles involved with the work. The original procedure:","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Procedure: Invoicing.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Roles: OM = Office Manage, AOM = Assistant Office Manager.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Input: List of orders.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Step Action AOM OM Output Tool Exception\n1 Create an invoice per order R A Created and authorized invoices Order file \n2 Archive a copy of the invoice R  Archived copy Accounts Receivable unpaid \n3 Send the invoice to the customer R I Invoice sent  \n4 Book the invoice R A Booked invoice General ledger \n5 Book the paid invoice R A Paid invoice Bank records, General ledger \n6 Archive the paid invoice R I Archived invoice Accounts Receivable paid \n7 Check unpaid invoices  R List of unpaid invoices to contact customer Note in CRM system ","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"RASCI","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"R = Responsible, the entity who is responsible for the execution of the activity.\nA = Approves, the entity who approves the result before going to the next step.\nS = Supports, the members of the team.\nC = Consults, an entity.\nI = Informed, notify the entity about the result.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Let's see how we can automate the procedure with Julia. We tackle it with a technique of Domain-Driven Design and the Onion architecture.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"","category":"page"},{"location":"chapter3/#The-procedure-as-an-activity-diagram-1","page":"3 - The design","title":"The procedure as an activity diagram","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The activity diagram represents the workflow. The actions are Julia functions. You can add typed arguments and return values in Julia, noted by a double colon (::) followed by the name of the type. This defines the domain entities, e.g., ::Order, ::UnpaidInvoice.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"⚉ process(::Array{Order)\n    ↓\n    create(::Array{Order}::Array{UnpaidInvoice}\n    ↓\n    send_email(::Array{UnpaidInvoice}) # TODO\n    ↓\n    archive(::Array{UnpaidInvoice})\n    ↓\n    create(::Array{UnpaidInvoice}::Array{JournalEntry}\n    ↓\n    return ::Array{JournalEntry}\n    ↓\n    ◉\n\n⚉ process(::Array{UnpaidInvoice}, ::Array{BankStatement})\n    ↓\n    filter(::Array{UnpaidInvoice}, ::Array{Bankstatement})::Array{PaidInvoice}\n    ↓\n    archive(::Array{PaidInvoice})\n    ↓\n    create(::Array{PaidInvoice})::Array{JournalEntry}\n    ↓\n    return ::Array{JournalEntry}\n    ↓\n    ◉\n\n⚉ process(::Array{UnpaidInvoice}, days::Int) # TODO\n    ↓\n    filter(::Array{UnpaidInvoice, ::Int}::Array{UnpaidInvoiceDue}\n    ↓\n    return ::Array{UnpaidInvoiceDue}\n    ↓\n    ◉","category":"page"},{"location":"chapter3/#The-design-2","page":"3 - The design","title":"The design","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"From the activity diagram we get:","category":"page"},{"location":"chapter3/#Domain-elements-1","page":"3 - The design","title":"Domain elements","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The domain objects (types) are:","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Domain Types:","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"UnpaidInvoice;\nPaidInvoice;\nUnpaidInvoiceDue;\nMessageType;\nBankStatement.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"External Types","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Sales.Order¹;\nGeneralLedger.JournalEntry².","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"General modules:","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Dates³\nDataFrames³","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"¹ Defined in the module Sales. We iterate on a list of orders that we will create in the test code to simplify the course.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"² Defined in the module GeneralLedger.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"³ Dates and DataFrames modules are a part of Julia. The DataFrame data structure is comparable to a spreadsheet.","category":"page"},{"location":"chapter3/#API-Invoicing-1","page":"3 - The design","title":"API Invoicing","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"The API contains the methods (functions) of the module. The methods use only elements from the core or domain. An overview of we need:","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"create(::Order)::UnpaidInvoice\ncreate(::UnpaidInvoice, ::BankStatement)::PaidInvoice\ncreate(::UnpaidInvoice)::JournalStatement\ncreate(::PaidInvoice)::JournalStatement\ncreate(::UnpaidInvoice, ::Int)::UnpaidInvoiceDue","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"In Julia, you can use the same function name as long as the signature is different, so other types and, or the number of arguments. One calls it multiple dispatch.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"We have defined and created the Order, with the Training, Company, Contact, and Student objects in the test module AppliSales to simplify the course.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Also, we have already created a test module AppliGeneralLedger to make it easier to test the code in this chapter.","category":"page"},{"location":"chapter3/#Methods-of-the-Infrastructure-layer-1","page":"3 - The design","title":"Methods of the Infrastructure layer","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Database:","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"connect(path::String)::SQLite.DB\narchive(db::SQLite.DB, tablename::String, item::Array{Any, 1})\nstore(db::SQLite.DB, tablename::String, data_type::Array{Any, 1})\nretrieve(db::SQLite.DB, tablename::String)::DataFrame\nretrieve(db::SQLite.DB, tablename::String, selection::String)::DataFrame","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"You find the methods in our module AppliSQLite, which we will use in the course. It makes use of the module SQLite.","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"SQLite.jl is a Julia package, You can use it as an on-disk database file, but also as an in-memory database. The last option is ideal for testing.","category":"page"},{"location":"chapter3/#Application-infrastructure-1","page":"3 - The design","title":"Application infrastructure","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"                               +-----------+\n                               | 1. Master |\n                               +-----------+\n                                     ↓\n                                     ◊\n   OpenCourseOrder / BankStatement  ↙ ↘  JournalEntry\n                   +--------------+     +--------------------+\n                   | 2. Invoicing |     | 3. General Ledger  |   Workers\n                   +--------------+     +--------------------+\n                          ↓\n                     JournalEntry","category":"page"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Master - Runs in a container.\nWorker Invoicing - Function, see Activity diagram, runs in a container.\nWorker General Ledger - Dummy, runs on a core.","category":"page"},{"location":"chapter3/#ToDo-1","page":"3 - The design","title":"ToDo","text":"","category":"section"},{"location":"chapter3/#","page":"3 - The design","title":"3 - The design","text":"Thinking of Literate.jl as a package to make PDFs.\nHow to attach a PDF to an email?\nHow to send an email?\nSMTPClient.jl","category":"page"},{"location":"chapter10/#.-Creating-SSH-enabled-Containers-1","page":"10 - Create SSH enabled Containers","title":"9. Creating SSH enabled Containers","text":"","category":"section"},{"location":"chapter10/#Index-1","page":"10 - Create SSH enabled Containers","title":"Index","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Pages = [\"chapter9.md\"]","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"The article Dockerize an SSH service uses Ubuntu 16.04 as the base image. However, Julia 1.0 and higher needs Ubuntu 18.04, so we have changed the Dockerfile. This version of Ubuntu also requires that you create a user with administrator rights when you use SSH to connect.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"You also learn to install Julia in the container.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"To make use of passwordless connections between containers, you also learn to create SSH keys.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"In the next chapter, we will show you how to create containers on a Raspberry Pi 3B. I have another project running where I communicate with a Raspberry Pi to transfer images to my laptop.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"See also the Pact book Julia 1.0 Programming: Installing Julia from binaries","category":"page"},{"location":"chapter10/#Activity-1-Create-local-SSH-keys-1","page":"10 - Create SSH enabled Containers","title":"Activity 1 - Create local SSH keys","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Prerequisites:","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Your system has Ubuntu 18.04 that runs on an Intel x86 processor.\nYou have started your computer.\nYou haven't created the keys before.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Steps:","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Check previous created keys.\nCreate local SSH keys.","category":"page"},{"location":"chapter10/#.-Check-previous-created-keys-1","page":"10 - Create SSH enabled Containers","title":"1. Check previous created keys","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n1 $ ls -l .ssh ","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Response","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"ls: cannot access '.ssh': No such file or directory","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"You haven't created the key before, go to step 2.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"total 16\n-rw-r--r-- 1 root root  107 nov 13 10:57 config\n-rw------- 1 rob  rob  3247 okt 16 15:04 id_rsa\n-rw-r--r-- 1 rob  rob   748 okt 16 15:04 id_rsa.pub\n-rw-r--r-- 1 rob  rob   444 dec  3 14:59 known_hosts","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"You have created the keys before, no further action is required. The file id_rsa.pub contains your public key. Later on, we will create a copy of it in the SSH enabled container.","category":"page"},{"location":"chapter10/#.-Create-local-SSH-keys-on-your-computer-1","page":"10 - Create SSH enabled Containers","title":"2. Create local SSH keys on your computer","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n1 $ sudo apt-get update \n2 $ sudo apt-get install openssh-client Install ssh client on Ubuntu.\n3 $ ls -al ~/.ssh/id_*.pub View old keys.\n4 $ ssh-keygen -t rsa -b 4096 -C \"your_email@domain.com\" Generate the key.\n5 $ ls ~/.ssh/id_* View your new keys.","category":"page"},{"location":"chapter10/#Do-we-need-to-do-this-in-the-ssh-container?-1","page":"10 - Create SSH enabled Containers","title":"Do we need to do this in the ssh container?","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n6 $ chmod 700 ~/.ssh Change right the folder .ssh\n7 $ chmod 600 ~/.ssh/authorized_keys Change right of the file authorized_keys","category":"page"},{"location":"chapter10/#Activity-2-Create-the-Container-1","page":"10 - Create SSH enabled Containers","title":"Activity 2 - Create the Container","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Prerequisites:","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Your system has Ubuntu 18.04 that runs on an Intel x86 processor.\nYou have started your computer.\nYou have installed Docker (See appendix).","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Steps:","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Create a Dockerfile in the folder test_sshd.\nCreate a Docker image eg_ssdh and the container test_sshd.\nCreate a user rob, who has administrator rights.","category":"page"},{"location":"chapter10/#The-Dockerfile-1","page":"10 - Create SSH enabled Containers","title":"The Dockerfile","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"FROM ubuntu:18.04\n\nRUN apt-get update && apt-get install -y openssh-server\nRUN mkdir /var/run/sshd\nRUN sed -i 's/PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config\n\n# SSH login fix. Otherwise user is kicked off after login\nRUN sed 's@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g' -i /etc/pam.d/sshd\n\nENV NOTVISIBLE \"in users profile\"\nRUN echo \"export VISIBLE=now\" >> /etc/profile\n\nEXPOSE 22\nCMD [\"/usr/sbin/sshd\", \"-D\"]","category":"page"},{"location":"chapter10/#.-Create-a-Dockerfile-in-the-folder-test_ssh-1","page":"10 - Create SSH enabled Containers","title":"1. Create a Dockerfile in the folder test_ssh","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n2 $ sudo mkdir test-ssh Create a new folder.\n3 $ cd test-ssh Go to the folder.\n4 Select the content of the Dockerfile above \n5 Ctrl-C Copy the selected text to the clipboard.\n6 $ nano Dockerfile Create a new empty file.\n7 Shift-Ctrl-V Paste text from the clipboard into nano.\n8 Ctrl-O <Enter> Save the file.\n9 Ctrl-X Exit nano.","category":"page"},{"location":"chapter10/#.-Create-a-Docker-image-eg_sshd-and-the-container-test_sshd-1","page":"10 - Create SSH enabled Containers","title":"2. Create a Docker image eg_sshd and the container test_sshd","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n1 $ docker build -t eg_sshd . Create a Docker image from the Dockerfile\n2 $ docker run -d -P --name test_sshd eg_sshd Create a container\n3 $ docker port test_sshd 22 Find port number\n 0.0.0.0:32768 Response\n4 $ docker exec -it test_sshd bash Enter the container\n5 Ctrl-D Leave the container.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"sudo docker run -d -P -v /home/rob/test-ssh:/home/rob/.ssh –name testsshd egsshd sudo chmod 777 /home/rob/test-ssh/","category":"page"},{"location":"chapter10/#.-Create-a-user-rob,-who-has-administrator-rights-1","page":"10 - Create SSH enabled Containers","title":"3. Create a user rob, who has administrator rights","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n1 $ docker exec -it test_sshd bash Enter the container\n2 # adduser rob ","category":"page"},{"location":"chapter10/#Response-1","page":"10 - Create SSH enabled Containers","title":"Response","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Adding user `rob' ...\nAdding new group `rob' (1000) ...\nAdding new user `rob' (1000) with group `rob' ...\nThe home directory `/home/rob' already exists.  Not copying from `/etc/skel'.\nadduser: Warning: The home directory `/home/rob' does not belong to the user you are currently creating.\nEnter new UNIX password:\nRetype new UNIX password:\npasswd: password updated successfully\nChanging the user information for rob\nEnter the new value, or press ENTER for the default\n\tFull Name []: Rob Bontekoe\n\tRoom Number []:\n\tWork Phone []:\n\tHome Phone []:\n\tOther []:\nIs the information correct? [Y/n] Y","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"note: Note\nYou are asked to give the user rob a password. The password you will use in the future for the SSH connection to the container, so write it down. You need it the first time when you want to enable passwordless communication. From Ubuntu 18.04 on, you don't know the roots' password anymore. That is the reason we had to create a user with administrator rights for SSH connections.","category":"page"},{"location":"chapter10/#Next-steps-1","page":"10 - Create SSH enabled Containers","title":"Next steps","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n3 # usermod -aG sudo rob Give user administrator rights.\n4 # apt-get install sudo You act as root when you precede your commands with sudo. It is not installed yet in this minimized container.\n5 # su rob Switch to the user rob\n To run a command as administrator (user \"root\"), use \"sudo <command>\". \\nSee \"man sudo_root\" for details. \n5 $ sudo -i Back as root user\n6 Ctrl-D Leave the container.","category":"page"},{"location":"chapter10/#Activity-3-Install-Julia-1","page":"10 - Create SSH enabled Containers","title":"Activity 3 - Install Julia","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Prerequisites:","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Your system has Ubuntu 18.04 running on the Intel x86 processor.\nThe container test_sshd exists.\nThe container has the user rob, who has administrators (sudo) rights.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Activity:","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Download the Julia binary and copy it to the container.\nInstall Julia and test the installation.\nCreate a symbolic link to start Julia from everywhere.","category":"page"},{"location":"chapter10/#.-Download-the-Julia-binary-and-copy-it-to-the-container-1","page":"10 - Create SSH enabled Containers","title":"1. Download the Julia binary and copy it to the container","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n1 Download Julia eg. julia-1.3.0-linux-x86_64.tar.gz\n2 $ docker ps -a Check whether container test_ssh exists.\n2 $ docker start test_sshd Start the container.\n3 $ docker cp julia-1.3.0-linux-x86_64.tar.gz test_sshd:/home/rob Copy the downloaded file to the container.\n4 $ docker exec -it test_sshd bash Enter the conatiner.","category":"page"},{"location":"chapter10/#Next-steps-2","page":"10 - Create SSH enabled Containers","title":"Next steps","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n5 $ su rob Switch to user rob.\n6 $ cd ~ Go to home directory.\n7 $ ls You see the file julia-1.3.0-linux-x86_64.tar.gz","category":"page"},{"location":"chapter10/#.-Install-Julia-and-test-the-installation-1","page":"10 - Create SSH enabled Containers","title":"2. Install Julia and test the installation","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n5 $ mkdir julia Create folder julia. OS asks for yur password.\n6 $ mv julia-1.3.0-linux-x86_64.tar.gz julia Move file to folder.\n7 $ cd julia Enter folder\n8 $ tar -zxvf julia-1.3.0-linux-x86_64.tar.gz Extract the file.\n9 $ ls List the content of the folder.\n julia-1.3.0  julia-1.3.0-linux-x86_64.tar.gz \n10 $ cd julia-1.3.0/bin/ We will test Julia.\n11 $ sudo ./julia Start Julia.","category":"page"},{"location":"chapter10/#Response-2","page":"10 - Create SSH enabled Containers","title":"Response","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"   _       _ _(_)_     |  Documentation: https://docs.julialang.org\n  (_)     | (_) (_)    |\n   _ _   _| |_  __ _   |  Type \"?\" for help, \"]?\" for Pkg help.\n  | | | | | | |/ _` |  |\n  | | |_| | | | (_| |  |  Version 1.3.0 (2019-11-26)\n _/ |\\__'_|_|_|\\__'_|  |  Official https://julialang.org/ release\n|__/                   |\n\njulia>","category":"page"},{"location":"chapter10/#.-Create-a-symbolic-link-to-start-Julia-from-anywhere-1","page":"10 - Create SSH enabled Containers","title":"3. Create a symbolic link to start Julia from anywhere","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n12 Ctrl-D Leave Julia.\n13 cd ~ To home directory.\n14 $ sudo ln -s /home/rob/julia/julia-1.3.0/bin/julia /usr/local/bin/julia Create link.\n15 $ julia Start Julia.","category":"page"},{"location":"chapter10/#Activity-4-Test-the-container.-1","page":"10 - Create SSH enabled Containers","title":"Activity 4 - Test the container.","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Prerequisites:","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"You have an SSH enabled container.\nYou have created the SSH authorized_keys See.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Steps:","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Copy your public key to the container.\nTest the SSH connection with the container.","category":"page"},{"location":"chapter10/#.-Copy-your-public-key-to-the-container-1","page":"10 - Create SSH enabled Containers","title":"1. Copy your public key to the container","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n1 $ docker ps Check whether the container is already running.\n2 $ docker start test_sshd Start the container if not running.\n3 $ docker port test_sshd 22 Find the port number\n 0.0.0.0:32768 Port number is 32768.\n4 $ ssh-copy-id  rob@localhost -p 32769 Copy file to container\n5 $ ssh rob@localhost -p 32768 Connect to the container.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Enter y, and continue.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"The authenticity of host '[localhost]:32768 ([127.0.0.1]:32768)' can't be established.\nECDSA key fingerprint is SHA256:lix3DGk69mhTnPlb0WE70syuDWVh59XL3az/4UJDInc.\nAre you sure you want to continue connecting (yes/no)? yes","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Type your password.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed\n/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys\nrob@localhost's password:","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Then some instructions.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Number of key(s) added: 1\n\nNow try logging into the machine, with:   \"ssh -p '32769' 'rob@localhost'\"\nand check to make sure that only the key(s) you wanted were added","category":"page"},{"location":"chapter10/#.-Test-the-SSH-connection-with-the-container.-1","page":"10 - Create SSH enabled Containers","title":"2. Test the SSH connection with the container.","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Step Action Comment\n1 ssh rob@localhost -p 32768 ","category":"page"},{"location":"chapter10/#Response-3","page":"10 - Create SSH enabled Containers","title":"Response","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 5.0.0-37-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\nThis system has been minimized by removing packages and content that are\nnot required on a system that users do not log into.\n\nTo restore this content, you can run the 'unminimize' command.\nLast login: Thu Dec  5 12:16:21 2019 from 172.17.0.1\nrob@13304c03391d:~$","category":"page"},{"location":"chapter10/#Exercise-1","page":"10 - Create SSH enabled Containers","title":"Exercise","text":"","category":"section"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"Create a second container test_sshd2:","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"You don't have to create the keys again!\nUse the same image eg_sshd.\nCheck the port number of test_sshd2.\nName of the administrative user can be kept the same: rob.","category":"page"},{"location":"chapter10/#","page":"10 - Create SSH enabled Containers","title":"10 - Create SSH enabled Containers","text":"We will use both containers in chapter 11.","category":"page"},{"location":"chapter20/#.-Using-Remote-Channels-(old-stuff)-1","page":"20 - Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"section"},{"location":"chapter20/#What-you-will-learn-1","page":"20 - Using Remote Channels (old stuff)","title":"What you will learn","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Pages = [\"chapter11.md\"]","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"In lesson 9, Creating SSH enabled Containers, we created two containers: test_sshd and test_sshd2. In this chapter, we learn how to run a function in a remote container test_sshd2. Before we use the model we created in earlier lessons, you will test the containers with the package RbO.jl.","category":"page"},{"location":"chapter20/#Activity-1:-1","page":"20 - Using Remote Channels (old stuff)","title":"Activity 1:","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"You start the two Docker containers, test_sshd, and test_sshd2. We need to know their Docker IP-addresses. With the command ssh rob@<ip-address>, we enter the test_sshd container. Within this container, we generate a process id bound to the IP-address of test_ssh2.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"We create the file main.jl, which contains the base code for container-container communication.","category":"page"},{"location":"chapter20/#Activities-2a-and-2b:-1","page":"20 - Using Remote Channels (old stuff)","title":"Activities 2a and 2b:","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Next, we use the example code to create a subscriber based on a name. We prefer to do the test with AppliGate's module RbO.jl. In chapter 12, you will use your modules.","category":"page"},{"location":"chapter20/#Activity-3:-1","page":"20 - Using Remote Channels (old stuff)","title":"Activity 3:","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"You learn to write a function that can run remotely, and that saves a subscriber in an SQLite database on the container test_sshd2.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Activity-1:-Start-the-Julia-1.3.0-containers-1","page":"20 - Using Remote Channels (old stuff)","title":"Activity 1: Start the Julia 1.3.0 containers","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Prerequisites:","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Docker is installed on your computer.\nYou have the two containers test_sshd and test_sshd2 created in chapter 9, Create the Container.\nBoth containers are SSH enabled.\nYou have a Internet connection to download the RbO.jl module.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Steps:","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Start both containers and check their Docker internal IP-address.\nUse SSH to connect from testsshd to testsshd2 and install RbO.jl in both containers.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Step-1-Start-both-containers-and-check-their-Docker-internal-IP-address-1","page":"20 - Using Remote Channels (old stuff)","title":"Step 1 - Start both containers and check their Docker internal IP-address","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Step Action Comment\n1 $ docker start test_sshd \n2 $ docker start test_sshd2 \n3 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd e.g. 172.17.0.2\n3 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd2 e.g. 172.17.0.3","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Step-2-Use-SSH-to-connect-from-test_sshd-to-test_sshd2-and-install-RbO.jl-1","page":"20 - Using Remote Channels (old stuff)","title":"Step 2 - Use SSH to connect from test_sshd to test_sshd2 and install RbO.jl","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Install RbO in both containers, Example of adding the module","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Step Action Comment\n1 $ ssh rob@172.17.0.2 Enter the container test_sshd.\n2 $ ssh rob@172.17.0.3 Enter the container test_sshd3.\n3 $ julia Start Julia.\n4 julia> ] Go to the package manager.\n5 pkg> add https://github.com/rbontekoe/RbO.jl Install RbO.jl.\n6 Ctrl-C Return to REPL prompt.\n7 Ctrl-D Leave Julia.\n8 Ctrl-D Leave the container test_sshd2.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"note: Note\nIf your container is running on a remote machine, you have to use the ip-address of the remote machine and the exported port of the container to connect to.$ docker start test_sshd # start the container test_sshd$ docker port test_sshd # display the port, e.g. 22/tcp -> 0.0.0.0:32768$ ssh 192.168.xxx.xxx -p 32768 # connect to the container on remote machine","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#main.jl-1","page":"20 - Using Remote Channels (old stuff)","title":"main.jl","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"We use a function to run code in another container. The function will be called in a while loop. Because we use this construction more often, we pass the function as argument to a function called remote_body. Through the channel you transport the data for the function. We store he code of the remote_body function in the file main.jl.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"note: Note\nMaybe all the stuff can much more easier be accomplished by using:remotecall_fetch(f1, 2, createSubscriber(\"Daisy\"))\nremotecall_fetch(f2, 2, \"subscribers\")\nremotecall_fetch(f3, 4, [\"Gekke Jan\"], \"subscribers\")@everywhere f3(x, y) = begin\n    s = createSubscriber(x)\n    db = connect(\"./rbo.sqlite\")\n    create(db, y, [s])\n    true\nend","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"using Distributed\n\n#=\nThe container that wants to run code on another container initiate this function.It has two arguments:\n- pid, the process id created wi th the addprocs function.\n- funct, to run on the container, or remote machine. funct is in this example a function that accepts only one argument.\n=#\nfunction remote_body(pid::Int, funct)\n    tx = RemoteChannel(() -> Channel(32)) # local transmit channel\n    rx = RemoteChannel(() -> Channel(32)) # local receive channel\n\n    # run the code on the process id that has been passed\n    @async @spawnat pid begin\n        while true\n\t    try\n                if isready(tx) # channel has data\n\n                    # get the data from the tx-channel\n                    value = take!(tx)\n\n                    # execute the code of the function that was passed as argument\n                    result = funct(value)\n\n                    # for test purposes\n                    #@show result\n\n                    # put the result of the function on the rx-channel\n                    put!(rx, result)\n                else\n\n                    # for test purposes\n                    #which_funct = string(funct) * \" on process \" * string(myid()) * \" is waiting for data.\"\n                    #@show which_funct\n\n                    # the code wait until there is data on the tx-channel\n                    wait(tx)\n                end\n\t    catch e\n\t       put!(rx, e)\n\t    end\n        end\n    end\n\n    # return transmit and receive channel, so the calling container can communicate with the called container.\n    tx, rx\n\nend # defined remote_body\n\nd = Dict([]) # empty directory for pids, used by the calling container","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Activity-2a:-Start-the-two-containers-and-create-main.jl-1","page":"20 - Using Remote Channels (old stuff)","title":"Activity 2a: Start the two containers and create main.jl","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Prerequisites:","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Docker is installed on your computer.\nYou have the two containers testsshd and testsshd2 created in Chapter 9, Create the Container.\nBoth containers are SSH-enabled.\nJulia is installed in the directory julia on the containers.\nThe RbO.jl package is installed in both containers.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Steps","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Start the container test_sshd and create main.jl with nano.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#.-Start-the-container-test_sshd-and-create-main.jl-with-nano.-1","page":"20 - Using Remote Channels (old stuff)","title":"1. Start the container test_sshd and create main.jl with nano.","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Step Action Comment\n1 $ docker start test_sshd Start the first container.\n2 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd Displays docker address, eg, 172.17.0.2.\n3 Take a note of the ip-address of test_sshd \n4 $ docker start test_sshd2 Start the second container.\n5 Take a note of the ip-address of test_sshd2 \n6 $ ssh rob@172.17.0.2 Use the ip-address step 2.\n7 Copy the main.jl code to the clipboard. \n8 $ nano main.jl Open a new file.\n9 Ctrl-Shift-V Paste the code form the clipboard.\n10 Ctrl-O Save the file.\n11 Ctrl-X Exit the editor.\n12 $ julia Start Julia, and continue at step 13 of Activity 2: Test the code","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Example-test-code-1","page":"20 - Using Remote Channels (old stuff)","title":"Example test code","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"julia> include(\"main.jl\")\nDict{Any,Any} with 0 entries\n\njulia> addprocs([(\"rob@172.17.0.3\", 1)])\n1-element Array{Int64,1}:\n 2\n\njulia> d[\"test_sshd2\"] = last(workers())\n2\n\njulia> @everywhere using RbO\n\njulia> tx1, rx1 = remote_body(d[\"test_sshd2\"], createSubscriber)\n(RemoteChannel{Channel{Any}}(1, 1, 7), RemoteChannel{Channel{Any}}(1, 1, 8))\n\njulia> tx2, rx2 = remote_body(d[\"test_sshd2\"], createPublisher)\n(RemoteChannel{Channel{Any}}(1, 1, 10), RemoteChannel{Channel{Any}}(1, 1, 11))\n\njulia> put!(tx1, \"Donald Duck\") # transmit value \"Donald Duck\" to container\nRemoteChannel{Channel{Any}}(1, 1, 7)\n\njulia> put!(tx2, \"The New York Times\")\nRemoteChannel{Channel{Any}}(1, 1, 10)\n\njulia> isready(rx1) ? take!(rx1) : \"\" # receive result\nSubscriber(\"1687381951631187484\", \"Donald Duck\", \"\", MEAN_CALCULATOR)\n\njulia> isready(rx2) ? take!(rx2) : \"\"\nPublisher(\"18206665133840381206\", \"The New York Times\", NEWSPAPER, Subscriber[])\n\njulia> @async while true\n           if isready(rx1)\n               @show take!(rx1)\n           else\n               wait(rx1)\n           end\n       end\nTask (runnable) @0x00007fbf925c5ae0\n\njulia> @async while true\n           if isready(rx2)\n               @show take!(rx2)\n           else\n               wait(rx2)\n           end\n       end\nTask (runnable) @0x00007fbf92f59ae0\n\njulia> put!(tx1, \"Daisy Duck\")\nRemoteChannel{Channel{Any}}(1, 1, 7)\n","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Activity-2b:-Test-the-code-1","page":"20 - Using Remote Channels (old stuff)","title":"Activity 2b: Test the code","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Prerequisites:","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Actitvity 2a","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Step Action Comment\n13 Copy all the Test code example code to the clipboard, including the julia prompt and the response \n14 Return to the container \n15 Ctrl-Shfi-V Paste the text on the clipboard in the Julia REPL.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"The result should look like the next example:","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"julia> take!(rx1) = Subscriber(\"15498821131237366424\", \"Donald Duck\", \"\", MEAN_CALCULATOR)\ntake!(rx2) = Publisher(\"8593928998820612462\", \"The New York Times\", NEWSPAPER, Subscriber[])\ntake!(rx1) = Subscriber(\"17785241625571045887\", \"Daisy Duck\", \"\", MEAN_CALCULATOR)","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Activity-3:-Run-a-function-in-the-remote-container-1","page":"20 - Using Remote Channels (old stuff)","title":"Activity 3: Run a function in the remote container","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Create and save a subscriber in the container test_sshd2. Then display all saved subscribers From a table. See also  RbO.jl.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Prerequisites:","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Activity 1\nActivity 2a & 2b\nThe package SQLite.jl is installed.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Steps:","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Install SQLite.jl\nTry the example code\nUse the RbO.jl documentation","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#.-Install-SQLite.jl-1","page":"20 - Using Remote Channels (old stuff)","title":"1. Install SQLite.jl","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Step Action Comment\n1 Enter test_sshd and start Julia \n2 Go to the package manager \n3 pkg > add SQLite ","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#.-Try-the-example-code-1","page":"20 - Using Remote Channels (old stuff)","title":"2. Try the example code","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Try the code below.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"include(\"main.jl\")\n\naddprocs([(\"rob@172.17.0.3\", 1)])\n\nd[\"test_sshd2\"] = last(workers())\n\n@everywhere using RbO\n\n# define a new function\n@everywhere f1(x) = begin\n  s = createSubscriber(x) # create a subscriber\n\tdb = connect(\"./rbo.sqlite\") # connect to database\n  create(db, \"subscribers\", [s]) # save subscriber in database\nend\n\n# activate remote_body for the new function\ntx1, rx1 = remote_body(d[\"test_sshd2\"], f1)\n\n# create and save the subscriber Donald Duck\nput!(tx1, \"Donald Ducky\")\n\n# the display routine\n@async while true\n\tif isready(rx1)\n  \t@show take!(rx1)\n  else\n    wait(rx1)\n  end\nend\n\n# define a new function for displaying all subscribers\n@everywhere f2(x) = begin\n\tdb = connect(\"./rbo.sqlite\") # connect to database\n\tgather(db, x) # list all items in table x\nend\n\n# activate remote_body for the new function\ntx2, rx2 = remote_body(d[\"test_sshd2\"], f2)\n\n# All subscribers in the table subscribers\nput!(tx2, \"subscribers\")\n\n# the display routine\n@async while true\n\tif isready(rx2)\n  \t@show take!(rx2)\n  else\n    wait(rx2)\n  end\nend\n\n# Remove process\nrmprocs(d[\"test_sshd2\"])\n\n# Remove key from dictionary\ndelete!(d, \"test_sshd2\")\n","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#.-Use-the-RbO.jl-documentation-1","page":"20 - Using Remote Channels (old stuff)","title":"3. Use the RbO.jl documentation","text":"","category":"section"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Use the documentation to do the next steps.","category":"page"},{"location":"chapter20/#","page":"20 - Using Remote Channels (old stuff)","title":"20 - Using Remote Channels (old stuff)","text":"Step Action Comment\n1 Use the command connect to create a link to the on-disk database rbo.sqlite \n2 Use the command 'gather' to retieve data from the SQL table subscribers ","category":"page"},{"location":"chapter9/#.-Introduction-1","page":"9 - Introduction","title":"8. Introduction","text":"","category":"section"},{"location":"chapter9/#","page":"9 - Introduction","title":"9 - Introduction","text":"UNDER DEVELOPMENT!","category":"page"},{"location":"chapter9/#What-is-Docker?-1","page":"9 - Introduction","title":"What is Docker?","text":"","category":"section"},{"location":"chapter9/#What-is-a-Dockerfile-1","page":"9 - Introduction","title":"What is a Dockerfile","text":"","category":"section"},{"location":"chapter9/#What-is-docker-compose-1","page":"9 - Introduction","title":"What is docker-compose","text":"","category":"section"},{"location":"chapter19/#Chapter-19-Activity-diagrams-1","page":"19 - Activity diagrams","title":"Chapter 19 - Activity diagrams","text":"","category":"section"},{"location":"chapter19/#General-Ledger-workflow-1","page":"19 - Activity diagrams","title":"General Ledger - workflow","text":"","category":"section"},{"location":"chapter19/#","page":"19 - Activity diagrams","title":"19 - Activity diagrams","text":"⚉ process(entries::JournalEntry)\n↓\narchive(::Array{JournalEntry})\n↓\nbook(::Array{JournalEntry)::Array{Record}\n↓\n◉","category":"page"},{"location":"chapter19/#Sales-workflow-1","page":"19 - Activity diagrams","title":"Sales - workflow","text":"","category":"section"},{"location":"chapter19/#","page":"19 - Activity diagrams","title":"19 - Activity diagrams","text":"⚉ process()::Array{:Order}\n↓\ncreate_training()::Training\n↓\ncreate_org()::Organization\n↓\ncreate_order()::Order\n↓\n◉","category":"page"},{"location":"chapter11/#.-Creating-containers-on-the-Raspberry-Pi-1","page":"11 - Raspberry Pi","title":"9. Creating containers on the Raspberry Pi","text":"","category":"section"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"UNDER DEVELOPMENT!","category":"page"},{"location":"chapter11/#Docker-1","page":"11 - Raspberry Pi","title":"Docker","text":"","category":"section"},{"location":"chapter11/#Dockerfile-1","page":"11 - Raspberry Pi","title":"Dockerfile","text":"","category":"section"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"What I did on 12/01/2019.","category":"page"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"Following the instructions on Dockerize an SSH service.","category":"page"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"FROM ubuntu:18.04\n#FROM ubuntu:16.04\n\nRUN apt-get update && apt-get install -y openssh-server\nRUN mkdir /var/run/sshd\n#RUN echo 'root:THEPASSWORDYOUCREATED' | chpasswd\nRUN sed -i 's/PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config\n\n# SSH login fix. Otherwise user is kicked off after login\nRUN sed 's@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g' -i /etc/pam.d/sshd\n\nENV NOTVISIBLE \"in users profile\"\nRUN echo \"export VISIBLE=now\" >> /etc/profile\n\nEXPOSE 22\nCMD [\"/usr/sbin/sshd\", \"-D\"]","category":"page"},{"location":"chapter11/#Inter-container-communication-1","page":"11 - Raspberry Pi","title":"Inter container communication","text":"","category":"section"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"What I did on 12/01/2019.","category":"page"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"Following the instructions on Dockerize an SSH service.","category":"page"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"Created the container on Raspberry Pi.\nTried the connection; it works nice but I have to login with a password.","category":"page"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"First created the Dockerfile, then:","category":"page"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"Step Action Comment\n1 ssh pi@192.168.XXX.XXX Login on Raspberry Pi.\n2 $ mkdir test-ssh Create a new folder\n3 $ cd test-ssh Step into the folder\n4 Select the content of the Dockerfile above \n5 Ctrl-C Copy selected text to the clipboard\n6 $ nano Dockerfile Create a new empty file\n7 Shift-Ctrl-V Paste text on clipboard into nano\n8 Ctrl-O Save the file\n9 Ctrl-X Exit nano\n10 $ docker build -t eg_sshd . Create a Docker image from the Dockerfile\n11 $ docker run -d -P --name test_sshd eg_sshd Create a container\n12 $ docker port test_sshd 22 Find port number\n 0.0.0.0:32769 Response\n13 Ctrl-D Leave Raspberry Pi\n14 $ ssh root@192.168.XXX.XXX -p 32769 Login remote on container with ssh","category":"page"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"note: Note\napt-get update && apt-get install -y julia -> doesn't work on Ubuntu 18.04Some Linux command I had to use because RUN echo 'root:THEPASSWORDYOUCREATED' | chpasswd didn't work either.adduser rob\nusermod -aG sudo rob\nsu rob\nsudo -i\nuserdel rob\nsee alsoI also had to run unminimize to get sudo available. unminimize did't work in the container on the Raspberry Pi -> you have to be root.Next step: create the certificates, so you don't have to login with a password (required by Julia). DONE.Yes, I can make a ssh container-container connection between my laptop and the Raspberry Pi. Ubuntu 18.04.Next step is to install Julia on both containers having Ubuntu 18.04 installed.","category":"page"},{"location":"chapter11/#Activity-for-passwordless-for-machine-machine-communication-(Obsolete?)-1","page":"11 - Raspberry Pi","title":"Activity for passwordless for machine -> machine communication (Obsolete?)","text":"","category":"section"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"What I tried three weeks before 12/01/2019: machine -> machine connection.","category":"page"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"Step Action Comment\n1 $ sudo apt-get update \n2 $ sudo apt-get install openssh-client Install ssh client on Ubuntu\n3 $ ls -al ~/.ssh/id_*.pub On Ubuntu\n4 $ ssh-keygen -t rsa -b 4096 -C \"your_email@domain.com\" On Ubuntu\n5 $ ls ~/.ssh/id_* On Ubuntu\n5 $ ssh-copy-id  pi@192.168.XXX.XXX Copy file to Raspberry Pi\n7 $ ssh pi@192.168.XXX.XXX Connect to raspberry pi\n8 $ chmod 700 ~/.ssh Change right the folder .ssh on Raspberry Pi\n9 $ chmod 600 ~/.ssh/authorized_keys Change right of the file autorized_keys on Raspberry Pi","category":"page"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"TODO: Lookup first what I did in the past! Want to use volumes in case container crashes, security, etc.","category":"page"},{"location":"chapter11/#","page":"11 - Raspberry Pi","title":"11 - Raspberry Pi","text":"Step Action Comment\n8 $ chmod 700 ~/.ssh Change right the folder .ssh on Raspberry Pi\n9 $ chmod 600 ~/.ssh/authorized_keys Change right of the file authorized_keys on Raspberry Pi","category":"page"},{"location":"chapter14/#","page":"14 - Logging","title":"14 - Logging","text":"This link looks intersting: Logging","category":"page"},{"location":"chapter14/#","page":"14 - Logging","title":"14 - Logging","text":"julia> using Logging\n\njulia> io = open(\"log.txt\", \"w+\");\n\njulia> logger = SimpleLogger(io);\n\njulia> with_logger(logger) do\n           @info(\" here is some context specific logging\")\n       end\n\nshell> cat log.txt\n\njulia> flush(io);\n\nshell> cat log.txt\n┌ Info:  here is some context specific logging\n└ @ Main REPL[7]:2\n\njulia> global_logger(logger);\n\njulia> @info(\"All logs will use the global logger by default.\");\n\nshell> cat log.txt\n┌ Info:  here is some context specific logging\n└ @ Main REPL[7]:2\n\njulia> close(io);\n\nshell> cat log.txt\n┌ Info:  here is some context specific logging\n└ @ Main REPL[7]:2\n┌ Info: All logs will use the global logger by default.\n└ @ Main REPL[12]:1","category":"page"},{"location":"chapter2/#.-Overview-Julia-1","page":"2 - Overview Julia","title":"2. Overview Julia","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Pages = [\"chapter2.md\"]","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"There are many excellent courses on Julia. We suppose that the reader has some basic knowledge of Julia, as in Think Julia. We recapitulate the most important differences with other languages.","category":"page"},{"location":"chapter2/#Concatenation-1","page":"2 - Overview Julia","title":"Concatenation","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"In Julia is the asterisk (*) used as a concatenation symbol instead of the plus-sign (+) in other languages.","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"julia> a = \"Hello \"\n\"Hello\"\n\njulia> b = \"World!\"\n\"World!\"\n\njulia> c = a * b\n\"Hello World!\"","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Top","category":"page"},{"location":"chapter2/#Iteration-1","page":"2 - Overview Julia","title":"Iteration","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"See Think Julia, 7. Iteration","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Some examples.","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"julia> range = 0:0.1:0.5π # values from 0 to 0.5π radians (90°), with a step value of 0.1 radian\n0.0:0.1:1.5\n\njulia> y = [sin(x) for x in range] # calculate sin for the values in the variable range\n16-element Array{Float64,1}:\n 0.0                \n 0.09983341664682815\n 0.19866933079506122\n 0.2955202066613396\n 0.3894183423086505\n 0.479425538604203  \n 0.5646424733950355\n 0.6442176872376911\n 0.7173560908995228\n 0.7833269096274834\n 0.8414709848078965\n 0.8912073600614354\n 0.9320390859672264\n 0.963558185417193  \n 0.9854497299884603\n 0.9974949866040544\n\njulia> using Plots\n\njulia> plot(x -> sin(x) , 0:0.1:2π) # passing a value to sin(x)\n\njulia> plot(sin, 0:0.1:2π) # works also\n","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Top","category":"page"},{"location":"chapter2/#Help-1","page":"2 - Overview Julia","title":"Help","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"\njulia> ?\nhelp?> sin\nsearch: sin sinh sind sinc sinpi sincos asin using isinf asinh asind isinteger\n\n  sin(x)\n\n  Compute sine of x, where x is in radians.\n\n  ────────────────────────────────────────────────────────────────────────────\n\n  sin(A::AbstractMatrix)\n\n  Compute the matrix sine of a square matrix A.\n\n  If A is symmetric or Hermitian, its eigendecomposition (eigen) is used to\n  compute the sine. Otherwise, the sine is determined by calling exp.\n\n  Examples\n  ≡≡≡≡≡≡≡≡≡≡\n\n  julia> sin(fill(1.0, (2,2)))\n  2×2 Array{Float64,2}:\n   0.454649  0.454649\n   0.454649  0.454649","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Top","category":"page"},{"location":"chapter2/#User-defined-functions-1","page":"2 - Overview Julia","title":"User defined functions","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"julia> function f(x, ϕ, b)\n         sin(x + ϕ) + b\n       end\nf (generic function with 1 method)\n\njulia> 0.3f(0.5π, 0.1π, 1)\n0.5853169548885461\n","category":"page"},{"location":"chapter2/#Multiple-dispatch-1","page":"2 - Overview Julia","title":"Multiple dispatch","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"In object oriented languages like Java we can overload a method. Julia, however, is a functional language. Here we can use the same function name as long as the signatures are different.","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"julia> f(x) = sin(x) # function with one argument\nf (generic function with 1 methods)\n\njulia> f(x, ψ) = sin(x - ψ)  # function with two arguments\nf (generic function with 2 methods)\n\njulia> f(x, ψ, b) = sin(x - ψ) + b   # function with three arguments\nf (generic function with 3 methods)\n\njulia> f(x::Int64) = sin(x/180 * π) # function in degrees, argument has to be an integer\nf (generic function with 4 methods)\n\njulia> methods(f) # show all methods of the function f\n# 4 methods for generic function \"f\":\n[1] f(x::Int64) in Main at REPL[10]:1\n[2] f(x) in Main at REPL[2]:1\n[3] f(x, ψ) in Main at REPL[3]:1\n[4] f(x, ψ, b) in Main at REPL[4]:1\n\njulia> f(0.5π) # 90 degrees in radians\n1.0\n\njulia> f(0.5π, 0.1π) # with 0.1π phase shift in radians\n0.9510565162951536\n\njulia> f(0.5π, 0.1π, 1)\n1.9510565162951536\n\njulia> f(90) # 90 degrees as integer\n1.0\n\njulia> f(90.0) # should be 0.5π\n0.8939966636005579\n","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Top","category":"page"},{"location":"chapter2/#User-defined-data-structures-1","page":"2 - Overview Julia","title":"User defined data structures","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Julia is not a object oriented programming language. But you can define data structures with constructors, and use the dot notation to refer to its data elements.","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"\njulia> struct Subscriber\n           id::String\n           name::String\n           email::String\n           #constructors\n           Subscriber(name::String) = new( createKey(name), name, \"\" )\n           Subscriber(name::String, email::String) = new( createKey(name), name, email )\n       end # defined Subscriber object\n\njulia> createKey(name::String) = string(hash(name * string(time())))\ncreateKey (generic function with 1 method)\n\njulia> daisy = Subscriber(\"Daisy\")\nSubscriber(\"6761641919537447636\", \"Daisy\", \"\")\n\njulia> daisy.name\n\"Daisy\"","category":"page"},{"location":"chapter2/#Plotting-data-1","page":"2 - Overview Julia","title":"Plotting data","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"See Plots","category":"page"},{"location":"chapter2/#Installing-the-Plots-package-1","page":"2 - Overview Julia","title":"Installing the Plots package","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"julia> ]\n\n(v1.1) pkg> add Plots <Enter>\n\n(v1.1) pkg> Ctrl-C\n\njulia>","category":"page"},{"location":"chapter2/#Using-Plots-1","page":"2 - Overview Julia","title":"Using Plots","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"\njulia> using Plots; gr()\n\njulia> plot(x -> sin(x/180 * π), 0:01:360, xlabel=\"Degrees\", title=\"Plot sin\", label=\"No phase shift\")\n\njulia> ψ = 30 # degrees\n30\n\njulia> plot!( x -> sin( (x - ψ)/180 * π ), 0:01:360, label=\"$(ψ)° phase shift\")\n","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Top","category":"page"},{"location":"chapter2/#Useful-to-know-Version-1.1.1-(2019-05-16)-1","page":"2 - Overview Julia","title":"Useful to know - Version 1.1.1 (2019-05-16)","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Testing conditions","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"julia> x = 5\n5\n\njulia> 0 < x < 6\ntrue\n\njulia> 0 ≤ x ≤ 5 # ≤  is \\le<Tab>\ntrue\n\njulia> 0 ≤ x ≤ 4\nfalse\n\njulia> 5 ≥ x ≥ 0 # ≥ is \\ge<Tab>\ntrue\n\njulia> x ≠ 4 # ≠ is \\ne<Tab>\ntrue\n","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Sets, symbolsπ","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"julia> a = [1, 2, 3]\n3-element Array{Int64,1}:\n 1\n 2\n 3\n\njulia> b = [3, 4, 5]\n3-element Array{Int64,1}:\n 3\n 4\n 5\n\njulia> a ∩ b # ∩ is \\cap<Tab>, also intersect(a, b)\n1-element Array{Int64,1}:\n 3\n\njulia> a ∪ b # ∩ is \\cup<Tab>, also union(a, b)\n5-element Array{Int64,1}:\n 1\n 2\n 3\n 4\n 5\n\njulia> symdiff(a, b) # forgot the symbol\n4-element Array{Int64,1}:\n 1\n 2\n 4\n 5\n\njulia> 3 ∈ a # 3 element of a, \\in<Tab>\ntrue\n\njulia> 3 ∉ a # 3 not an element of a, \\notin<Tab>\nfalse\n\njulia> a ⊆ b # a subset of b, ⊆ is \\subseteq<Tab>\nfalse\n\njulia> b ⊇ [3, 4] # b is superset of [3, 4], ⊆ = \\supseteq<Tab>\ntrue","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Natural constant ℯ and π","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"\njulia> ℯ # \\euler<Tab>\nℯ = 2.7182818284590...\n\njulia> π # \\pi<Tab>\nπ = 3.1415926535897...\n\njulia> factorial(4)\n24\n\njulia> 1*2*3*4\n24","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Functional programming","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"\njulia> a = [2, 3, 4]\n3-element Array{Int64,1}:\n 2\n 3\n 4\n\njulia> map(x -> x^2, a)\n3-element Array{Int64,1}:\n 4\n 9\n16\n\njulia> reduce( (x, y) -> x + y, a)\n9\n\njulia> sum(a)\n9\n\njulia> reduce( (x, y) -> x^2 + y^2, a)\n185\n\njulia> (2^2 + 3^2)^2 + 4^2\n185","category":"page"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Top","category":"page"},{"location":"chapter2/#Summary-1","page":"2 - Overview Julia","title":"Summary","text":"","category":"section"},{"location":"chapter2/#","page":"2 - Overview Julia","title":"2 - Overview Julia","text":"Top","category":"page"},{"location":"chapter5/#.-Creating-modules-1","page":"5 - Creating modules","title":"6. Creating modules","text":"","category":"section"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"UNDER DEVELOPMENT!","category":"page"},{"location":"chapter5/#What-you-will-learn-1","page":"5 - Creating modules","title":"What you will learn","text":"","category":"section"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"Pages = [\"chapter5.md\"]","category":"page"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"Nowadays, applications are modular. We switched from monolithic applications to small, collaborated stand-alone applications that run in containers, micro-services. They are more scalable, and you can develop and roll them out independently. The programming language for a particular module depends on the expertise of the developer.","category":"page"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"In this chapter, we start with the simplified general ledger module. The invoicing module sends journal statements to the general ledger module, which stores them in the journal. We split it into the sub-ledgers tax, sales, and accounts receivable debit in the case of an unpaid bill. And we brake it down to the sub-ledger bank and accounts receivable credit.","category":"page"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"When we understand the rules for developing a module, we create the module for the Invoicing module.","category":"page"},{"location":"chapter5/#Domain.jl-1","page":"5 - Creating modules","title":"Domain.jl","text":"","category":"section"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"struct JournalStatement\n    period::Int64\n    stm_nbr::Int64\n    date::Date\n    invoice_nbr::String\n    from::Int64\n    to::Int64\n    debit::Float64\n    credit::Float64\n    vat::Float64\n    descr::String\n    # constructors\n    JournalStatement(period, stm_nbr, date, invoice_nbr, from, to, debit, credit, vat, descr) =\n    new(period, date, stm_nbr, invoice_nbr, from, to, debit, credit, vat, descr)\nend\n\nstruct Record\n    accountid::Int64\n    date::DateTime\n    customerid::String\n    invoice_nbr::String\n    stm_nbr::String\n    debit::Float64\n    credit::Float64\n    descr::String\nend\n\nstruct Account\n    id::Int64\n    name::String\nend","category":"page"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"goto your develpment folder start julia ] generate AppliGeneralLegder Crtl-C, Ctrl-D cd AppliGeneralLegder goto GitHub new create AppliGeneralLegder.jl echo \"# AppliGeneralLegder.jl\" >> README.md git init git add README.md git commit -m \"first commit\" git remote add origin https://github.com/rbontekoe/AppliGeneralLegder.jl.git","category":"page"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"git push -u origin master Username for 'https://github.com': rbontekoe Password for 'https://rbontekoe@github.com': Counting objects: 3, done. Writing objects: 100% (3/3), 239 bytes | 239.00 KiB/s, done. Total 3 (delta 0), reused 0 (delta 0) To https://github.com/rbontekoe/AppliGeneralLegder.jl.git","category":"page"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"[new branch]      master -> master","category":"page"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"Branch 'master' set up to track remote branch 'master' from 'origin'.","category":"page"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"create domain/domail.jl create api/api.jl","category":"page"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"select domain.jl copy domain.jl","category":"page"},{"location":"chapter5/#api.jl-1","page":"5 - Creating modules","title":"api.jl","text":"","category":"section"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"create_account(id, name) = Account(id, name)\n\ncreate_record(accountid, date, customerid, invoice_nbr, stm_nbr, debit, credit, descr) =\n    Record(accountid, date, customerid, invoice_nbr, stm_nbr, debit, credit, descr)\n\ncreate_journal_statement(period, stm_nbr, date, invoice_nbr, from, to, debit, credit, vat, descr) =\n    JournalStatement(period, stm_nbr, date, invoice_nbr, from, to, debit, credit, vat, descr)","category":"page"},{"location":"chapter5/#infrastructure.jl-1","page":"5 - Creating modules","title":"infrastructure.jl","text":"","category":"section"},{"location":"chapter5/#","page":"5 - Creating modules","title":"5 - Creating modules","text":"","category":"page"},{"location":"chapter5/#Export-1","page":"5 - Creating modules","title":"Export","text":"","category":"section"},{"location":"chapter5/#Course-1","page":"5 - Creating modules","title":"Course","text":"","category":"section"},{"location":"chapter5/#Registration-1","page":"5 - Creating modules","title":"Registration","text":"","category":"section"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"(Image: AppliGate)","category":"page"},{"location":"#Building-Business-Applications-with-Julia-1","page":"Business Applications with Julia","title":"Building Business Applications with Julia","text":"","category":"section"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"In this course, you learn to create Julia modules. The software you write makes use of these modules and runs in Docker containers.","category":"page"},{"location":"#Preface-1","page":"Business Applications with Julia","title":"Preface","text":"","category":"section"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"In July 2018, I read an article about a new programming language that was rapidly gaining in popularity, Julia. It appealed to me how you could define a function. Almost exactly as I learned it during my bachelor study electronics: f(x) = 2x² + 3x + 1, in Julia written as f(x) = 2x^2 + 3x + 1. Then I set up a project to learn how to implement the observer pattern. It was easy, but I left it out because I was working on Scala at that moment.","category":"page"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"While working with Scala, I came in touch with the Onion Architecture, after watching Wade Waldron's presentation, Domain-Driven Design, and Onion Architecture. Since then, I use it.","category":"page"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"The ease with which I could build business applications with Julia stayed with me.","category":"page"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"At the beginning of 2019, a recruiter told me that the interest in Scala in the Netherlands was waning. Should I continue with Scala?","category":"page"},{"location":"#A-course-was-born-1","page":"Business Applications with Julia","title":"A course was born","text":"","category":"section"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"I decided to stop with Scala and picked up my Julia observer trial project again. From the code, I created a Julia package, RbO.jl.","category":"page"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"It turned out that you can create effective documentation, using the package Documenter.jl. You write it in the markdown language and can insert examples of how to use your code. During the creation of the HTML code, you can have the cases tested, which is useful if you later expand the module and generate the documentation again. The documentation can be seen at the GitHub Pages.","category":"page"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"I had already a GitHub Pages profile, and thought: \"Why not set up the AppliGate website in this way and link it to my profile.\" I did it: https://www,appligate.nl.","category":"page"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"With trying out so many things with Julia, the problem arose that I could not find specific trials back in my notes. After the success of the website, I thought: \"Why not set up a course where I can register all the interesting things?\".","category":"page"},{"location":"#Developing-Business-Applications-with-Julia-1","page":"Business Applications with Julia","title":"Developing Business Applications with Julia","text":"","category":"section"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"The result is this course Business Applications with Julia I am creating now.","category":"page"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"Rob Bontekoe","category":"page"},{"location":"#Index-(Course-is-under-development)-1","page":"Business Applications with Julia","title":"Index (Course is under development)","text":"","category":"section"},{"location":"#","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"Pages = [\"index.md\",\n\"chapter1.md\",\n\"chapter2.md\",\n\"chapter3.md\",\n\"chapter4.md\",\n\"chapter9.md\",\n\"chapter11.md\",\n\"appendix.md\",\n\"references.md\"]","category":"page"}]
}
