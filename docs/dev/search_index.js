var documenterSearchIndex = {"docs":
[{"location":"chapter7/#.-Writing-test-software","page":"7. Writing test software","title":"7. Writing test software","text":"","category":"section"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"Under development!","category":"page"},{"location":"chapter7/#What-you-will-learn","page":"7. Writing test software","title":"What you will learn","text":"","category":"section"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"Pages = [\"chapter7.md\"]","category":"page"},{"location":"chapter7/#Folder-structure-AppliInvoicing-module","page":"7. Writing test software","title":"Folder structure AppliInvoicing module","text":"","category":"section"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"Tests should be placed in the file runtests.jl in the folder test.","category":"page"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"áµ¥ðŸ“AppliInvoicing\n   ðŸ“ .git\n   ðŸ“ src\n  áµ¥ðŸ“ test\n     ðŸ“„ runtests.jl","category":"page"},{"location":"chapter7/#Using-@testset-and-@test","page":"7. Writing test software","title":"Using @testset and @test","text":"","category":"section"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"An example from AppliInvoicing:","category":"page"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"using Test\n\n@testset \"Orders\" begin\n    using AppliSales\n    orders = AppliSales.process()\n    @test length(orders) == 3\n    @test orders[1].org.name == \"Scrooge Investment Bank\"\n    @test orders[1].training.name == \"Learn Smiling\"\nend","category":"page"},{"location":"chapter7/#runtests.jl","page":"7. Writing test software","title":"runtests.jl","text":"","category":"section"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"When you put your tests in the file runtests.jl you can also run the tests of a module elsewhere, e.g. AppliMaster. Make sure you added the package (module) and are in the Package manager mode.","category":"page"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"The Package manager command help (?):","category":"page"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"julia> using Test\n\njulia> ]\n\n(v1.3) pkg> ?test\n  test [--coverage] pkg[=uuid] ...\n\n  Run the tests for package pkg. This is done by running the file **test/runtests.jl** in the package directory. The option --coverage\n  can be used to run the tests with coverage enabled. The startup.jl file is disabled during testing unless julia is started with\n  --startup-file=yes.","category":"page"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"Example of running runtests.jl of AppliInvoicing.","category":"page"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"(v1.3) pkg> test AppliInvoicing\n  Testing AppliInvoicing\n\nTest Summary: | Pass  Total\nOrders        |    3      3\nTest Summary:  | Pass  Total\nUnpaidInvoices |    7      7\nTest Summary:           | Pass  Total\nRetrieve UnpaidInvoices |    7      7\nTest Summary:                   | Pass  Total\nRetrieve BankStatement from CSV |    2      2\nTest Summary: | Pass  Total\nJounalEntry's |    3      3\nTest Summary:       | Pass  Total\nprocess(db, orders) |    6      6\nTest Summary:                | Pass  Total\nretrieve_unpaid_invoices(db) |    2      2\nTest Summary:               | Pass  Total\nprocess(db, unpaid_invoices |    4      4\n   Testing AppliInvoicing tests passed","category":"page"},{"location":"chapter7/","page":"7. Writing test software","title":"7. Writing test software","text":"See the all tests: AppliInvoicing.jl/test/runtests.jl","category":"page"},{"location":"references/#References","page":"References","title":"References","text":"","category":"section"},{"location":"references/#Course-modules","page":"References","title":"Course modules","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"AppliGeneralLedger\nAppliSales\nAppliInvoicing\nAppliMaster","category":"page"},{"location":"references/#Julia","page":"References","title":"Julia","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"Think Julia\nThe Emergent Features of JuliaLang: Part I\nThe Emergent Features of JuliaLang: Part II - Traits\nParallel Computing\nNaelsonDouglas/DistributedMachineLearningThesis\nBlue: a Style Guide for Julia\nPerformance Tips\nJulia Tutorial","category":"page"},{"location":"references/#Julia-Debugging","page":"References","title":"Julia Debugging","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"A Julia interpreter and debugger","category":"page"},{"location":"references/#Julia-Unicode","page":"References","title":"Julia Unicode","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"Unicode Input","category":"page"},{"location":"references/#Julia-Wikibooks","page":"References","title":"Julia Wikibooks","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"Index\nIntroducing Julia/Types\nIntroducing Julia/DataFrames\nIntroducing Julia/Working with dates and times","category":"page"},{"location":"references/#Julia-Machine-Learning","page":"References","title":"Julia Machine Learning","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"Data science for managers: Programming languages\nJulia Machine Learning for Slowpokes","category":"page"},{"location":"references/#Julia-Package-Manger","page":"References","title":"Julia Package Manger","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"A Brief Introduction to Package Management with Julia 1.0\nCreating Packages\nPkg + BinaryBuilder â€“ The Next Generation\nOverview popular Julia packages","category":"page"},{"location":"references/#IJulia","page":"References","title":"IJulia","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"Running a notebook server","category":"page"},{"location":"references/#Atom/Juno-Documentation","page":"References","title":"Atom/Juno Documentation","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"Juno Documentation\nFrom zero to Julia! Using Docker\nAuto Cue","category":"page"},{"location":"references/#Docker","page":"References","title":"Docker","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"Dockerize an SSH service\nssh key generation using dockerfile\nMultiple Computer Example\nRunning the \"Real Time Voice Cloning\" project in Docker\nHow To Install Docker On Raspberry Pi","category":"page"},{"location":"references/#Miscellaneous-[This-AI-Clones-Your-Voice-After-Listening-for-5-Seconds](https://www.youtube.com/watch?v0sR1rU3gLzQ-and-t148s)","page":"References","title":"Miscellaneous- This AI Clones Your Voice After Listening for 5 Seconds","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"Julia Computing and NVIDIA Bring Julia GPU Computing to Arm\nOptimizing Serial Code","category":"page"},{"location":"blog/#Blog","page":"Blog","title":"Blog","text":"","category":"section"},{"location":"blog/#","page":"Blog","title":"2020","text":"","category":"section"},{"location":"blog/#/15/2020-Rewrite-the-course","page":"Blog","title":"07/15/2020 - Rewrite the course","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Added documentation to AppliAR. In 4. Example the code that uses Docker containers and actors. Now ready to rewrite the course and incorporate the actors.","category":"page"},{"location":"blog/#/10/2020-Rocket.jl","page":"Blog","title":"07/10/2020 - Rocket.jl","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"I played last week with Rocket.jl, a package where you can work with actors. During the time I worked with Akka and Scala, I became familiar with the idea of actors.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Actors send messages to other actors, which are stored in their mailbox and then processed one by one. The advantage is that the actors are completely separated from each other and can manage their data.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"The results were positive, so I consider to set up the application the way I did with Akka.","category":"page"},{"location":"blog/#/25/2020-Domain,-API,-and-Infrastructure-as-sub-modules","page":"Blog","title":"06/25/2020 - Domain, API, and Infrastructure as sub-modules","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"A sub-module is a defined unit where you define what the input is and what someone else can use. Would it have an advantage to define the Domain, API and Infrastructure shell as a sub module as well?  I implemented it in AppliAR.","category":"page"},{"location":"blog/#/11/2020-Registered-the-packages-AppliSales-and-AppliGeneralLedger","page":"Blog","title":"05/11/2020 - Registered the packages AppliSales and AppliGeneralLedger","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Last Friday, I have registered my first packages at JuliaRegistries/General:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"AppliSales\nAppliGeneralLedger","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"To register the packages you use https://juliahub.com/ui/Packages, using the Registering Packages page. You have to wait for three days before you can add the packages to a project.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"I had to do this because AppliSales and AppliGeneralLedgers are dependencies in AppliAR.jl and I wanted to make use of Travis CI. Travis CI requires that it can add the tests (in runtests.jl) from the official Julia registry.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Now I am considering to partially rewrite the course to incorporate my newly acquired knowledge.","category":"page"},{"location":"blog/#/07/2020-PkgTemplates.jl","page":"Blog","title":"05/07/2020 - PkgTemplates.jl","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"After watching the video Developing Julia Packages I decided to use PkgTemplates.jl as the starting point for package development.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"I created the package AppliAR.jl (AR = Account Receivable) with the code from AppliInvoicing.jl, a name I will replace.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Also, I recreated the supporting packages AppliSales.jl and AppliGeneral.jl.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Overall, I believe that what I learned from using PkgTemplates makes the application more professional. Unfortunately, I have to rewrite parts of the course.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"In AppliMaster.jl you find the files test_local_channels_2.jl and client.jl to test the application.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"# test_local_channels2.jl\n\nusing Pkg\nPkg.activate(\".\")\n\n# remove old stuff\ncmd = `rm test_invoicing.sqlite test_ledger.txt test_journal.txt`\nrun(cmd)\n\n# enable distrbuted computing\nusing Distributed\n@info(\"Enable distributed computing\")\n\n# this should be the next step\nnp = addprocs(4; exeflags=`--project=$(Base.active_project())`)\n#np = addprocs([(\"rob@192.168.2.77:2222\", :auto)]; exeflags=`--project=$(Base.active_project())`)\n@info(\"number of processes is $(length(np))\")\n\n# activate the packages (before the processes are created)\n@everywhere begin\n    using AppliSales\n    using AppliGeneralLedger\n    using AppliAR\nend;\n\n@info(\"Distributed computing enabled\")\n\n# get the tasks and dispatcher\ninclude(\"./api/api.jl\")\n\n# start the dispatcher\nrx = dispatcher()\n@info(\"Dispatcher started\")\n\n# start application remote\ninclude(\"client.jl\")\n\n# display aging report\nusing DataFrames\n\nsleep(10)\nr = DataFrame(report())\nprintln(\"\\nUnpaid invoices\\n============\")\nprintln(r)\n","category":"page"},{"location":"blog/#/17/2010-Using-socket-for-remote-communication","page":"Blog","title":"04/17/2010 - Using socket for remote communication","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"I have defined Task_4 in myfunctions2.jl of AppliMaster. The task listens on port 8000. When data is detected, it is deserialized. The string START will initiate the process. Sending a BankStatement will create the paid invoices.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"First start test_local_channels_2.jl. Then run the next code in a separate Julia session.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"using Sockets\nusing Serialization\nusing AppliGeneralLedger, AppliInvoicing\n\nio = connect(\"<ip target laptop>\", 8000)\n\n# start application\nserialize(io, \"START\")\n\n# send bankstatements\nstms = AppliInvoicing.read_bank_statements(\"./bank.csv\")\nserialize(io, stms)","category":"page"},{"location":"blog/#/27/2020-Extending-Julia-LOAD_PATH","page":"Blog","title":"03/27/2020 - Extending Julia LOAD_PATH","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"II wanted to add a new feature to AppliInvoicing: reporting e.g., an aging report. It should live in a submodule of AppliInvoicing. First, I created a branch dev:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"$ git branch dev\n\n$ git checkout dev\n\n$ atom .","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Next, I created the file Reporting.jl and created a dummy module Reporting:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"module Reporting\n\nconst PATH_DB = \"./invoicing.sqlite\"\n\nusing Dates\n\nusing AppliInvoicing\n\naging() = begin\n    unpaid_invoices = AppliInvoicing.retrieve_unpaid_invoices(PATH_DB)\n    list = []\n    for invoice in unpaid_invoices\n        date = invoice.meta.date\n        println(date, \" - \", Dates.today())\n    end\nend # aging\n\nend # module","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"After that, I added the function report() to api.jl and modified the file AppliInvoicing.jl:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"module AppliInvoicing\n\ngreet() = print(\"Hello World!\")\n\nexport create, process, retrieve_unpaid_invoices, read_bank_statements, report\n\n# first, link to the current model\ninclude(\"./infrastructure/infrastructure.jl\")\n\n# next, submodule Reporting\ninclude(\"Reporting.jl\")\nusing .Reporting: aging\n\nend # module","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"To test the module, I used AppliMaster. I didn't want all the time to upload AppliInvoicing to GitHub, so I extended the Julia LOAD_PATH. After removing the AppliInvoicing package, I added the next line to test_local_channels.jl:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"# define the local path for AppliInvoicing\n@everywhere push!(LOAD_PATH, \"/home/rob/julia-projects/tc/AppliInvoicing\")","category":"page"},{"location":"blog/#/25/2020-Holy-traits-pattern-implemented-in-dispatcher","page":"Blog","title":"03/25/2020 - Holy traits pattern implemented in dispatcher","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"The Holy traits pattern is described in the book Design Patterns and Best Practices with Julia. It can replace if-else constructs. Old situation dispatcher logic. With the new situation, we avoid troubles in the future when we use more Appli-packages. See current infrastructure, 6. Testing the application. The Holy traits pattern makes it more clear:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"# Holy traits pattern definition => can be moved to the domain layer\nabstract type Dispatcher end\nstruct T0 <: Dispatcher end # AppliMaster\nstruct T1 <: Dispatcher end # AppliInvoicing\nstruct T2 <: Dispatcher end # AppliGeneralLedger\nstruct T3 <: Dispatcher end # AppliInvoicing\n\n# the data types on rx-channel\nDispatcher(::Type{<: String}) = T0()\nDispatcher(::Type{<: Array{AppliSales.Order, 1}}) = T1()\nDispatcher(::Type{<: Array{AppliGeneralLedger.JournalEntry,1}}) = T2()\nDispatcher(::Type{<: Array{AppliInvoicing.BankStatement,1}}) = T3()\n# end Trait definition\n\nfunction dispatcher()\n    rx = Channel(32)\n\n    # instantiate tasks\n    tx0 = task_0(rx) # get orders from Sales\n    tx1 = task_1(rx) # process the orders\n    tx2 = task_2(rx) # process the journal entries\n    tx3 = task_3(rx) # process the unpaid invoices\n\n    # implementate Holy traits pattern\n    dispatch(x::T) where {T} = dispatch(Dispatcher(T), x)\n\n    dispatch(::T0, x) = put!(tx0, x)\n    dispatch(::T1, x) = put!(tx1, x)\n    dispatch(::T2, x) = put!(tx2, x)\n    dispatch(::T3, x) = put!(tx3, x)\n\n    @async while true\n        if isready(rx)\n            value = take!(rx)\n            @info(\"Dispatcher received $(typeof(value))\")\n            dispatch(value)\n        else\n            wait(rx)\n        end\n    end\n\n    return rx\nend # dispatcher\n","category":"page"},{"location":"blog/#/20/2020-Design-Patterns-and-Best-Practices-with-Julia","page":"Blog","title":"03/20/2020 - Design Patterns and Best Practices with Julia","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Recently I bought the book Design Patterns and Best Practices with Julia. I can recommend the book. After reading the chapter Modules, Packages, and Data Type Concepts, I decided to set up an abstract data tree, because it can give you a quick overview of your application. The branches are the abstract data types and the leaves the concrete data types. I chose Domain as an abstract root type.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Using the function subtypetree(Domain), I get an excellent overview of the data structure:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"julia> subtypes(Invoice)\n2-element Array{Any,1}:\n PaidInvoice  \n UnpaidInvoice\n\njulia> subtypetree(Domain)\nDomain\n    Invoice\n        PaidInvoice\n        UnpaidInvoice\n    Payment\n        BankStatement\n    Structure\n        BodyItem\n            OpentrainingItem\n        Header\n        MetaInvoice\n\njulia> fieldnames(PaidInvoice)\n(:id, :meta, :header, :body, :stm)\n\njulia> fieldnames(UnpaidInvoice)\n(:id, :meta, :header, :body)","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"See the Invoicing module documentation for more details.","category":"page"},{"location":"blog/#/12/2020-Relative-mark-down-links","page":"Blog","title":"03/12/2020 - Relative mark down links","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Chapter 11 was not updated. I also got a message Page build failure.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"The solution was to use relative links to switch between pages, e.g. ../chapter10/#.-Create-a-Dockerfile-in-the-folder-test_ssh-1.","category":"page"},{"location":"blog/#/11/2020-Pages.jl-and-HTTP.jl","page":"Blog","title":"03/11/2020 - Pages.jl and HTTP.jl","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"I did some tests with Pages.jl and HHTP.jl, The result is promising. The solution is to send a file name over an Http connection and use scp to retrieve the file from the Raspberry Pi for further processing.","category":"page"},{"location":"blog/#The-test","page":"Blog","title":"The test","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Julia 1.3.1 running on my laptop in a Ubuntu docker container as server. The variable result will contain the file name:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"julia> using Pages\n\njulia> using JSON\n\njulia> @async Pages.start()\nTask (runnable) @0x00007fb2c0ee3340\n\njulia> result = \"\"\n\"\"\n\njulia> Endpoint(\"/test\", POST) do request::HTTP.Request\n           data = String(request.body)\n           global result = data\n           response = JSON.json(Dict(:data => data))\n       end\nEndpoint(Dict{Symbol,HTTP.Handlers.RequestHandlerFunction}(:POST => HTTP.Handlers.RequestHandlerFunction{var\"#11#12\"}(var\"#11#12\"())), \"/test\")","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Julia 1.3.1 running on my Raspberry Pi in a Ubuntu docker container as client:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"julia> using HTTP\n\njulia> r = HTTP.request(\"POST\", \"http://xxx.xxx.xxx.xxxxxxx:8000/test\", [], \"12345.jpg\")\nHTTP.Messages.Response:\n\"\"\"\nHTTP/1.1 200 OK\nTransfer-Encoding: chunked\n\n{\"data\":\"12345.jpg\"}\"\"\"","category":"page"},{"location":"blog/#/10/2020-SQLite-problem-Raspberry-Pi","page":"Blog","title":"03/10/2020 - SQLite problem Raspberry Pi","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"There is a problem with making a connection from a docker container on my Ubuntu laptop to a container on a Raspberry Pi 3+. I posted a question on  discourse.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"See Addprocs gives connection refused to a docker container on raspberry pi","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Now I consider using HTTP.jl (or Pages.jl) to inform the application to retrieve an image from my Raspi with scp.","category":"page"},{"location":"blog/#/04/2020-Documentation-AppliInvoicing-module","page":"Blog","title":"03/04/2020 - Documentation AppliInvoicing module","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"I have completed the documentation for ApplInvoicing.jl","category":"page"},{"location":"blog/#/03/2020","page":"Blog","title":"03/03/2020","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Created documentation for the module AppliGeneralLedger.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Master code runs successfully in a Docker container.","category":"page"},{"location":"blog/#/27/2020-dispatcher-is-working","page":"Blog","title":"02/27/2020 - dispatcher is working","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"SQLite gave problems with AppliGeneralLedger. I suspected it had something to do with multi-user issues. So I decided to experiment with Jula's open/read/write file functions.  The result was very positive, so I changed the code in AppliGeneralLedger.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"The test with remote channels went well. AppliMaster contains the code.","category":"page"},{"location":"blog/#/20/2020-addproc(4)","page":"Blog","title":"02/20/2020 - addproc(4)","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"In the past, I used Julia v1.1.0 and SQLite v0.8.x. I use a local channel with a dispatcher. It routes the data to the right task, which runs a Julia function remote. The application ran smoothly. The problem started when I switched to SQLite.jl v1.0.1. First, I thought that SQLite was causing the problem. However, the sample code uses only the AppliSales module, which doesnâ€™t use SQLite.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"I posted the problem on discourse.julialang.org: Distributed computing, not found package error. @pfitzseb gave the solution:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Try","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"addprocs(n_procs; exeflags=`--project=$(Base.active_project())`)","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"instead â€“ the currently active environment doesnâ€™t propagate to processes started by addprocs by default.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Now the application runs smoothly again. Thank you, `@pfitzseb.","category":"page"},{"location":"blog/#/07/2020","page":"Blog","title":"02/07/2020","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Chapter 4, 5 en 6 are ready for a final check.","category":"page"},{"location":"blog/#/05/2020","page":"Blog","title":"02/05/2020","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"While working on the AppliMaster module, I got yesterday the impression that I should always be working with the local package repository, ] active .:","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Adding packages will update Project.toml, the file with the dependencies, and update the local Manifest.toml file. When you delete Manifest.toml, you have to add the packages again.\nWhen cloning a project works without adding the packages again.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"So I removed AppliInvoicing, AppliGeneralLedger, and AppliSales from the general repository. This morning I started AppliMaster in Atom. My code in test_remote_channels.jl didn't work anymore. The two Databases invoicing.sqlite and ledger.sqlite were not created.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"I added the packages AppliInvoicing, AppliGeneralLedger, and AppliSales again to the general repository, and my code was running well. The only explanation I could think of: remote code only looks at the general repository.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"I need to review the documentation on this subject.","category":"page"},{"location":"blog/#/02/2020","page":"Blog","title":"02/02/2020","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"The pages test_remote_channels.jl and myfunctions.jl, I have embellished with @info. The flow of the data has now become more explicit. The code is on github: test_remote_channels.jl.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Working with channels runs smoothly. I only run the functions that perform the operations on a different core. The while true loops for task_1 and task_2 tasks run locally. Should I also run these loops remotely?","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"So I had to renumber the subsequent chapters.","category":"page"},{"location":"blog/#/01/2020","page":"Blog","title":"02/01/2020","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Today I copied the blog from the AppliGate website to The course environment.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Things are going well with the course. The following modules are now ready(!):","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"AppliMaster - the basic module.\nAppliInvoicing - the application itself.\nAppliSales - sending test orders to AppliInvoicing.\nAppliGeneralLedger - to process journal entries from AppliInvoicing.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"In the last couple of weeks, I have been experimenting with the communication between the different parts. For the time being, I decided to work with Julia's channels. The implementation is in AppliMaster, testremotechannels.jl.","category":"page"},{"location":"blog/#-2","page":"Blog","title":"2019","text":"","category":"section"},{"location":"blog/#/05/2019","page":"Blog","title":"12/05/2019","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Last week I managed to establish an SSH connection between two containers. This week I could finish Chapter 9, Create the Container, more or less. The next step is to test a channel connection between two containers.","category":"page"},{"location":"blog/#/15/2019","page":"Blog","title":"11/15/2019","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Almost ready to link www.appligate.nl to rbontekoe.github.io. We have to change the CNAME record at the provider from appligate.appspot.com to rbontekoe.github.io.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"We also started with writing the course material for the online training BAWJ.","category":"page"},{"location":"blog/#/21/2019","page":"Blog","title":"10/21/2019","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Why not build a website with Documenter.jl? We did it today. When you go to AppliGate, you enter our new site. In the meantime, we got more experience with Julia. E.g., we resized Rob's picture with Images.jl. It was straightforward.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"julia> using Images\n\njulia> img = load(\"rob.png\")\n\njulia> img2 = imresize(img, ratio=0.5)\n\njulia> save(\"rob2.png\", img2)","category":"page"},{"location":"blog/#/17/2019","page":"Blog","title":"9/17/2019","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Reading Think Julia I discovered the package Serialization. While playing with it, I realized that it could solve my CQRS and Event Sourcing problem. With the method serialize, you can create a text representation of an object, that you can store. With deserialize, you do the reverse. Serialize writes to an IOStream, and deserialize reads from it. An IOStream can be an IOBuffer or a file. It makes Event Sourcing easier.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"I also looked at channels. You can use channels to communicate between processes. For the time being, I will use inter CPU-core communication. Later on, I extend it to remote nodes. I only have to expand the methods of createSubscriber and createPublisher.","category":"page"},{"location":"blog/#/10/2019","page":"Blog","title":"9/10/2019","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Last week I was busy implementing the database methods. I realized that the domain objects I wanted to keep must have an identification code. So Subscriber, Publisher, and Message got an id. To create the id, I used the hash function with a name and time as a parameter. It had consequences for the documentation. In the example code, I used the tag 'jldoctest,' so Documenter could test the example code during the generation of the manual. Because the ids keep changing, I had to give up. Too bad, because I found that a strong point of Documenter.jl. I replaced the test tag 'jldoctest' with the language tag 'julia.' Maybe there is something to do against continually changing values.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Infected by the CQRS thought, I decided to add changed domain objects to the database instead of modifying an existing record.","category":"page"},{"location":"chapter1/#The-Application","page":"1 - The Application","title":"1 - The Application","text":"","category":"section"},{"location":"chapter1/#The-Application-Architecture","page":"1 - The Application","title":"The Application Architecture","text":"","category":"section"},{"location":"chapter1/","page":"1 - The Application","title":"1 - The Application","text":"We will look at in this course at the module AppliAR.jl. AR is short for Accounts Receivable. We test the module with two supporting packages: AppliSales.jl and AppliGeneralLedger.jl","category":"page"},{"location":"chapter1/","page":"1 - The Application","title":"1 - The Application","text":"The application architecture is based on the actor model. The article The actor model in 10 minutes explains the model very well. The link comes from the Rocket.jl documentation, the package we use to test our AppliAR.jl module.","category":"page"},{"location":"chapter1/","page":"1 - The Application","title":"1 - The Application","text":"                           StmActor\n                              |\n                              | BankStatement(s)\n                              â†“       \n       SalesActor -------> ARActor -------> GLActor\n                  Order(s)    â†‘    Entry(s)    â†‘\n                              â†“                â†“\n                            Store            Store","category":"page"},{"location":"chapter1/","page":"1 - The Application","title":"1 - The Application","text":"Fig 1. The application architecture.","category":"page"},{"location":"chapter1/","page":"1 - The Application","title":"1 - The Application","text":"The SalesActor uses the AppliSales package to send the orders to the ARActor.\nThe StmActor reads a CSV file with bank statements and sends them to the ARActor.\nThe ARActor (Accounts Receivable) uses the Applijl module to process orders and bank statements and sends journal entries to the GLActor.\nGLActor uses the AppliGeneralLedger package and turns journal entries into general legder statements.","category":"page"},{"location":"chapter1/","page":"1 - The Application","title":"1 - The Application","text":"I use the word package for an official registered Julia module. A module is Julia code with a clearly defined boundary. We can achieve it by using the onion architecture.","category":"page"},{"location":"chapter1/","page":"1 - The Application","title":"1 - The Application","text":"The example on AppliAR.jl page shows a case with docker containers.","category":"page"},{"location":"chapter13/#.-Running-the-containers","page":"13. Running the containers","title":"13. Running the containers","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Under development!","category":"page"},{"location":"chapter13/#What-you-will-learn","page":"13. Running the containers","title":"What you will learn","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Pages = [\"chapter13.md\"]","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"In chapter 13, we combine what we have learned in chapter 6, Testing the application and chapter 12 Creating SSH enabled Containers. We use the the packages AppliSales, AppliInvoicing, and AppliGeneralLedger. In the container test_sshd we use AppliSales, and AppliInvoicing, and in test_sshd2 we use AppliGeneralLedger. We will discover that the general ledger data will be stored in a file on test_sshd2.","category":"page"},{"location":"chapter13/#Activity-1:","page":"13. Running the containers","title":"Activity 1:","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"We start with cloning the code from AppliMaster on GitHub.","category":"page"},{"location":"chapter13/#Activity-2:","page":"13. Running the containers","title":"Activity 2:","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Create the application.","category":"page"},{"location":"chapter13/#Activity-1:-Cloning-the-code","page":"13. Running the containers","title":"Activity 1: Cloning the code","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Prerequisites:","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Docker is installed on your computer.\nYou have the two containers test_sshd and test_sshd2 created in chapter 9, Create the Container.\nBoth containers are SSH enabled.\nYou have a Internet connection to download the all the modules we need.","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Steps:","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Start both containers and check their Docker internal IP-address.\nUse SSH to connect from testsshd to testsshd2 and install our modules in both containers.\nCreate the program.","category":"page"},{"location":"chapter13/#Step-1.1-Start-both-containers","page":"13. Running the containers","title":"Step 1.1 - Start both containers","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Step Action Comment\n1 $ docker start test_sshd \n2 $ docker start test_sshd2 \n3 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd e.g. 172.17.0.2\n4 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd2 e.g. 172.17.0.3","category":"page"},{"location":"chapter13/#Step-1.2-Use-SSH-to-connect-from-test_sshd-to-test_sshd2-and-install-the-out-modules","page":"13. Running the containers","title":"Step 1.2 - Use SSH to connect from test_sshd to test_sshd2 and install the out modules","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Step Action Comment\n1 $ ssh rob@172.17.0.2 Enter the container test_sshd.\n2 $ julia Start Julia.\n3 julia> ] Go to the package manager.\n4 pkg> add https://github.com/rbontekoe/AppliSales.jl Install AppliSales.jl.\n5 pkg> add https://github.com/rbontekoe/AppliInvoicing.jl Install AppliInvoicing.jl.\n6 pkg> add https://github.com/rbontekoe/AppliGeneralLedger.jl Install AppliGeneralLedger.jl.\n7 Ctrl-C Return to REPL prompt.\n8 Ctrl-D Leave Julia.\n9 $ ssh rob@172.17.0.3 Enter the container test_sshd2.\n10 Repeat step 5, 6, and 7 All our packages are available in test_sshd2.\n11 Leave the container test_sshd2. ","category":"page"},{"location":"chapter13/#Step-1.3-Clone-AppliMaster","page":"13. Running the containers","title":"Step 1.3 - Clone AppliMaster","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Step Action Comment\n1 $ git clone https://github.com/rbontekoe/Master.jl.git A folder AppliMaster.jl will be created.\n2 $ ls \n3 Ctrl-D Leave the container.","category":"page"},{"location":"chapter13/#Activity-2:-Create-the-application","page":"13. Running the containers","title":"Activity 2: Create the application","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Prerequisites:","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Docker is installed on your computer.\nYou have the two containers testsshd and testsshd2 created in Chapter 9, Create the Container.\nBoth containers are SSH-enabled.\nJulia is installed in the directory julia on the containers.\nThe AppliSales, AppliInvoicing, and AppliGeneralLedger packages are installed in both containers.","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Steps","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Start the container test_sshd and create main.jl with nano.\nRun the application.","category":"page"},{"location":"chapter13/#.-Start-the-container-test_sshd-and-test_sshd2","page":"13. Running the containers","title":"1. Start the container test_sshd and test_sshd2","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Step Action Comment\n1 $ docker start test_sshd Start the first container.\n2 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd Displays docker address, eg, 172.17.0.2.\n3 Take a note of the ip-address of test_sshd \n4 $ docker start test_sshd2 Start the second container.\n5 Take a note of the ip-address of test_sshd2 \n6 $ ssh rob@172.17.0.2 Use the ip-address step 2.\n7 $ julia Start Julia, and continue at step 8 of Activity 2: Test the code","category":"page"},{"location":"chapter13/#Example-test-code","page":"13. Running the containers","title":"Example test code","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Step Action Comment\n1 Create a file app_functions.jl In test_sshd.\n2 Put the code from AppliMaster.jl in the file \n3 Start julia \n4 Run the next (initialization) code first ","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"julia> using Distributed\n\njulia> p = addprocs([(\"rob@172.17.0.3\", 1)]; exeflags=`--project=$(Base.active_project())`)\n1-element Array{Int64,1}:\n 2\n\njulia> p = p[1] #container used for invoicing\n\njulia> q = p[1] # container used for general ledger\n\njulia> @everywhere using AppliSales\n\njulia> @everywhere using AppliInvoicing\n\njulia> @everywhere using AppliGeneralLedger\n\njulia> include(\"./app_functions.jl\");\n\njulia> rx = dispatcher()\n[ Info: task_0 is waiting for data\n[ Info: task_1 is waiting for data\n[ Info: task_2 is waiting for data\n[ Info: task_3 is waiting for data\nChannel{Any}(sz_max:32,sz_curr:0)","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Step Action Comment\n5 Run the next codel ","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"julia> put!(rx, \"START\"); # start the application\n\n\njulia> stms = AppliInvoicing.read_bank_statements(PATH_CSV); # retrieve data\n\njulia> put!(rx, stms); # processing the uppaid invoices","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"When run the code again, you will experience that it is very fast. Best is to delete first the data stores:","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Step Action Comment\n6 ;ssh rob@172.17.0.3 Go to test_ssh2.\n7 ;rm invoicing.sqlite journal.txt ledger.txt Delete the stores.\n8 Ctrl-D Leave the container.\n9 Run the previous code again ","category":"page"},{"location":"chapter13/#The-result-(statementrs-removed)","page":"13. Running the containers","title":"The result (statementrs removed)","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"[ Info: Dispatcher received String\n[ Info: task_0 received String\n[ Info: task_0 will start the process remotely\n\n[ Info: task_0 will put 3 the orders on rx channel\n[ Info: task_0 is waiting for data\n\n[ Info: Dispatcher received Array{AppliSales.Order,1}\n[ Info: Task 1 will put 3 orders on rx channel\n[ Info: task_1 is waiting for data\n\n[ Info: Dispatcher received Array{AppliGeneralLedger.JournalEntry,1}\n[ Info: task_2: Processing journal entries\n[ Info: task_2 is waiting for data\n\n[ Info: Dispatcher received Array{AppliInvoicing.BankStatement,1}\n[ Info: Task_3: Processing unpaid invoices\n[ Info: Retrieved 3 unpaid invoices\n[ Info: task_3 is waiting for data\n\n[ Info: Dispatcher received Array{AppliGeneralLedger.JournalEntry,1}\n[ Info: task_2: Processing journal entries\n[ Info: task_2 is waiting for data","category":"page"},{"location":"chapter13/#Unkown-data-will-not-be-routed!","page":"13. Running the containers","title":"Unkown data will not be routed!","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"Step Action Comment\n10 Run the code in step 5 again ","category":"page"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"test = \"Test unkown type\";\n\nput!(rx, test); # unkown type error","category":"page"},{"location":"chapter13/#Result","page":"13. Running the containers","title":"Result","text":"","category":"section"},{"location":"chapter13/","page":"13. Running the containers","title":"13. Running the containers","text":"[ Info: Dispatcher received String\n\nâ”Œ Warning: No task found for type String\nâ”” @ Main ~","category":"page"},{"location":"chapter4/#.-Implementing-the-design","page":"4. Implementing the design","title":"4. Implementing the design","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"UNDER DEVELOPMENT!","category":"page"},{"location":"chapter4/#What-you-will-learn","page":"4. Implementing the design","title":"What you will learn","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Pages = [\"chapter4.md\"]","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"In chapter 3, we saw how the design of the invoicing module. In this chapter, we will implement it, the AppliInvoicing module. Two other modules that will come in the picture are AppliSales and AppliGeneralLedger.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"The AppliSales module supplies the orders that the AppliInvoicing needs to create the invoices when the course starts. Besides sending and storing the invoices, it also creates the journal entries for the AppliGeneralLedger module.","category":"page"},{"location":"chapter4/#Development-environment","page":"4. Implementing the design","title":"Development environment","text":"","category":"section"},{"location":"chapter4/#Application-folder-and-file-structure","page":"4. Implementing the design","title":"Application folder and file structure","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"The final folder structure and files for our Julia module AppliInvoicing.jl.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"áµ¥ðŸ“AppliInvoicing\n   ðŸ“ .git\n\t ðŸ“ assets #1\n\t ðŸ“ chapter1 #1\n\t ðŸ“ chapter2 #1\n\t ðŸ“ chapter3 #1\n\t ðŸ“ docs #1\n\t ðŸ“ search #1\n  áµ¥ðŸ“ src #2\n    áµ¥ðŸ“ api\n       ðŸ“„ api.jl\n       ðŸ“„ doc.jl #3\n    áµ¥ðŸ“ domain\n       ðŸ“„ domain.jl\n    áµ¥ðŸ“ infrastructure\n       ðŸ“„ db.jl\n       ðŸ“„ doc.jl #3\n       ðŸ“„ infrastructure.jl\n     ðŸ“„ AppliInvoicingl.jl\n     ðŸ“„ test.jl\n  áµ¥ðŸ“ test\n     ðŸ“„ runtests.jl #4\n   ðŸ“„ bank.csv\n\t ðŸ“„ index.html #1\n   ðŸ“„ LICENCE\n   ðŸ“„ Manifest.toml\n   ðŸ“„ Project.toml  #5\n   ðŸ“„ README.md\n\t ðŸ“„ search_index.js #1","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Figure 1","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#1 Folders and files that make up the documentation of AppliInvoicing.jl.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#2 The application files. We use the onion architecture.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#3 Julia help documentation. See chapter 8. Documenting your code.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#4 Unit test file. See chapter 7. Writing test software","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#5 Contains the dependencies. Julia adds dependencies automatically to the Project.toml file when you activate the local environment (pkg> activate .) and add a package (module). See Manifest.toml](https://julialang.github.io/Pkg.jl/v1/toml-files/): \"The manifest file is an absolute record of the state of the packages in the environment. It includes exact information about (direct and indirect) dependencies of the project, and given a Project.toml + Manifest.toml pair it is possible to instantiate the exact same package environment, which is very useful for reproducibility.\"","category":"page"},{"location":"chapter4/#Activity-4.1:-Create-the-minimum-folder-structure-and-the-file-domain.jl","page":"4. Implementing the design","title":"Activity 4.1: Create the minimum folder structure and the file domain.jl","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"In this activity you will create the folder structure for the invoicing process. You partial set-up the folder structure according to figure 1:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Create the base folder AppliInvoicing.\nCreate a repository on GitHub.\nCreate the folder domainunder src.\nCreate the file domain.jl.","category":"page"},{"location":"chapter4/#Create-the-base-folder-AppliInvoicing","page":"4. Implementing the design","title":"Create the base folder AppliInvoicing","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"All steps are necessary, because we want to create a Julia module form our code.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Prerequisites","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Your computer OS is Ubuntu 18.04.\nYou have sudo (administraton) rights.\ngit is installed.\natom/juno installed.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"You can install git with the command: sudo apt-get install git.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Atom/juno is the IDE that is used in our example. To install juno see the next instruction.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Step Action Comment\n1 $ mkdir julia-projects Create a working directory.\n2 $ cd julia-projects \n3 $ julia Start Julia.\n4 julia > ] Open the package manager.\n5 pkg> generate AppliInvoicing Generate e.g. the package AppliInvoicing. The response you get is:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Generating project AppliInvoicing:     AppliInvoicing/Project.toml     AppliInvoicing/src/AppliInvoicing.jl","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Project.toml contains the package name and the dependencies.","category":"page"},{"location":"chapter4/#Create-a-repository-on-GitHub","page":"4. Implementing the design","title":"Create a repository on GitHub","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Close the package manager and Julia: Ctrl-C, Ctrl-D.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Step Action Comment\n6 Go to GitHub Create an account if you don't have one. What is GitHub.\n7 Click on the tab Repositories \n8 Click on the green button New Bottom upper right side.\n9 Give the repository a name E.g. AppliInvoicing.jl\n10 Give the repository a description E.g. Invoicing module for the course BAWJ.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"warning: Warning\nStart with a empty repository!","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Step Action Comment\n11 Click on the green button Create repository Button is located at the bottom side.\n12 Return to your computer and enter the folder AppliInvoicing ","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Install git: apt-get install git.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Step Action Comment\n13 $ echo \"# AppliInvoicing\" >> README.md Create README.md file.\n14 $ git init \n16 $ git status The response you get is:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"`On branch master","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"No commits yet","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Untracked files:   (use \"git add <file>...\" to include in what will be committed)","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Project.toml\nREADME.md\nsrc/","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"nothing added to commit but untracked files present (use \"git add\" to track)`","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Step Action Comment\n17 $ git add Project.toml Add file to staged changes.\n18 $ git add README.md \n19 $ git add src/ \n20 $ git status The response is:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"`On branch master","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"No commits yet","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Changes to be committed:   (use \"git rm â€“cached <file>...\" to unstage)","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"new file:   Project.toml\nnew file:   README.md\nnew file:   src/AppliInvoicing.jl`","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Step Action Comment\n21 $ git commit -m \"first commit\" The response is:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"[master (root-commit) 3b06d57] first commit  3 files changed, 10 insertions(+)  create mode 100644 Project.toml  create mode 100644 README.md  create mode 100644 src/AppliInvoicing.jl","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Step Action Comment\n22 $ git remote add origin https://github.com/rbontekoe/AppliInvoicing.jl.git \n23 $ git push -u origin master Push your files to your GitHub repository. GitHub asks for your userid and password.\n24 Check the update on GitHub ","category":"page"},{"location":"chapter4/#Create-the-folder-domain-under-the-src-folder","page":"4. Implementing the design","title":"Create the folder domain under the src-folder","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Step Action Comment\n1 Enter the AppliInvoicing folder \n2 $ atom . Start Atom in the current directory AppliInvoicing.\n3 Remove all Taps in the right pane. The Tabs are: Telemerty Consent, Welcome, and Welcom Guide. A tab will be remove by clicking on the x-symbol.\n4 Right click on: src \n5 Select: New folder \n6 Type: domain \n7 Press: <Enter> The new folder domain appears under the folder src.\n8 Select the folder: domain \n9 Right click on: domain \n10 Select: New file \n11 Type: domain.jl \n12 Press: <Enter> A new document appears in the pane next to the navigation pane.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"In the navigation pane you see the next folders and files:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"áµ¥ðŸ“ AppliInvoicing\n   ðŸ“ .git\n  áµ¥ðŸ“ src\n    áµ¥ðŸ“ domain\n       ðŸ“„ domain.jl\n     ðŸ“„ AppliInvoicing.jl\n   ðŸ“„ Project.toml\n   ðŸ“„ README.md","category":"page"},{"location":"chapter4/#domain.jl","page":"4. Implementing the design","title":"domain.jl","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"To define a data structure and type, use the keyword struct. The body consists of the fields of the data structure.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Use constructors to define standard values, like the default currency symbol. It simplifies the creating op the object.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"To keep things clear we create the following objects as part of the invoice:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"MetaInvoice, containing references to the order, the training, and the currency.\nHeaderInvoice, contains all the general information.\nOpentrainingItem, the invoice body consists of one item.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"using Dates\nusing AppliGeneralLedger\nusing AppliSales # needed for test.jl and runtests.jl\n\n# Meta data\nstruct MetaInvoice\n    order_id::String\n    training_id::String\n    date::DateTime #1\n    currency::String\n    currency_ratio::Float64\n    # Constructors\n    MetaInvoice(order_id, training_id) = new(order_id, training_id, now(), \"â‚¬\", 1.0) #2\n    MetaInvoice(order_id, training_id, date, currency, currency_ratio) = new(order_id, training_id, now(), currency, currency_ratio)\nend # MetaInvoice\n\nstruct Header #3\n    invoice_nbr::String #4\n    name::String\n    address::String\n    zip::String\n    city::String\n    country::String\n    order_ref::String\n    name_contact::String\n    email_contact::String\nend # HeaderInvoice\n\nstruct OpentrainingItem #5\n    name_training::String\n    date::DateTime\n    price_per_student::Float64\n    students::Array{String, 1}\n    vat_perc::Float64\n    # constructors\n    OpentrainingItem(name_training, date, price_per_student, students) = new(name_training, date, price_per_student, students, 0.21) #6\n    OpentrainingItem(name_training, date, price_per_student, students, vat_perc) = new(name_training, date, price_per_student, students, vat_perc)\nend # OpentrainingItem\n\nstruct UnpaidInvoice\n    id::String\n    meta::MetaInvoice\n    header::Header\n    body::OpentrainingItem\nend # UnpaidInvoice\n\nstruct BankStatement\n    date::Date\n    descr::String\n    iban::String\n    amount::Float64\nend # BankStatement\n\nstruct PaidInvoice\n    id::String\n    meta::MetaInvoice\n    header::Header\n    body::OpentrainingItem\n    stm::BankStatement\nend # PaidInvoice","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#1 The invoice date.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#2 We assume that most students are from a country in Europe where they have the euro as currency.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#3 The information needed for the header of the invoice.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#4 In the future, we will automatically generate a unique id.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#5 It has the course information and the students who will attend the training.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#6 You create a instance of a data structure by using its name with the arguments between brackets. If you want to instantiate it with less arguments you can define constructors (or you use keyword arguments in functions or methods).","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"On the domain page, one defines the custom data structures that make-up our domain. To avoid too many method arguments, we break it up in the substructures as MetaInvoice, Header, and OpentrainingItem.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Header represents the information we need for the header of the invoice. OpentrainingItem serves as the body of an invoice. In practice, the body of an invoice could consist of several lines, but we leave it now limited to one line.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"I have split an invoice into two data structures: UnpaidInvoice and PaidInvoice. It facilitates the property of Julia, which is called multiple dispatch. You can see an example of it in the API layer where we use the same method name, create, for both data structures, which each have a different operation.","category":"page"},{"location":"chapter4/#Exercice-4.1","page":"4. Implementing the design","title":"Exercice 4.1","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Copy the domain data to the domain.jl file in Juno.\nSelect the first statement and press Shift-EnterÂ¹. Juno evaluates the line and prints the result at the end of it. Repeat it for all elements.\nSave the file with Ctrl-S.\nCreate a folder api under the scr-folder.\nCreate the empty file api.jl in the folder api.\nCreate the empty files infrastructure.jl and db.jl in the folder 'infrastructure.'","category":"page"},{"location":"chapter4/#Notes","page":"4. Implementing the design","title":"Notes","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Â¹ In Juno pressing Shift-Enter executes the selected statement and moves the cursor to the next piece of code. Ctrl-Enter doesn't touch the cursor.","category":"page"},{"location":"chapter4/#api.jl","page":"4. Implementing the design","title":"api.jl","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"In the API, we only use Julia code and the elements from the domain, the basic idea behind the onion architecture.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"We use the include statement to have access to the domain elements. The relative path is to the domain.jl file.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"We define in the API the functions and the methods that our program needs.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Functions start with the keyword function followed by the function name and the arguments between brackets:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"function hello(name)\n\tprintln(\"Hello \" * name) # the * is also used for string concatenation\nend","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Methods start with the name of the method followed by the arguments between brackets, an equal sign, and a statement:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"hello(name) = println(\"Hello \" * name)","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"When a method has more than one statement, we embed the statements between a begin ... end block:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"hello(name) = begin\n\tname = uppercase(name)\n\tprintln(\"HELLO \" * name)\nend","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"There is no difference between functions and methods.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"include(\"../domain/domain.jl\") #1\n\nimport AppliSales.Order # Order is not exported but is refered to in the next method #2\n\n# create unpaid invoices from an order\ncreate(order::Order, invoice_id::String)::UnpaidInvoice = begin #3\n    meta = MetaInvoice(order.id, order.training.id)\n    header_invoice = Header(\n        invoice_id, order.org.name, order.org.address, order.org.zip, order.org.city, order.org.country, order.order_ref, order.contact_name, order.contact_email)\n    body_invoice = OpentrainingItem(order.training.name, order.training.date, order.training.price, order.students)\n    return UnpaidInvoice(invoice_id, meta, header_invoice, body_invoice) #4\nend\n\n# create paid invoice from a bank statement\ncreate(invoice::UnpaidInvoice, stm::BankStatement)::PaidInvoice = begin\n    id = invoice.id\n    meta = invoice.meta\n    header = invoice.header\n    body = invoice.body\n    stm = stm\n    return PaidInvoice(id, meta, header, body, stm)\nend\n\n# create journal entries from an unpaid invoice\n# the create_journal_entry function is exported by AppliGeneralLedger\nfunction conv2entry(inv::UnpaidInvoice, from::Int, to::Int)\n    id = string(Date(now())) * \"-\" * string(global n += 1)\n    customer_id = inv.header.name\n    invoice_nbr = inv.header.invoice_nbr\n    debit = inv.body.price_per_student * length(inv.body.students)\n    credit = 0.0\n    vat = debit * inv.body.vat_perc\n    descr = inv.body.name_training\n    return create_journal_entry(id, customer_id, invoice_nbr, from, to, debit, credit, vat, descr)\nend\n\n# create journal entries from a paid invoice\n# the create_journal_entry function is exported by AppliGeneralLedger test module\nfunction conv2entry(inv::PaidInvoice, from::Int, to::Int)\n    id = string(Date(now())) * \"-\" * string(global n += 1)\n    customer_id = inv.header.name\n    invoice_nbr = inv.header.invoice_nbr\n    debit = inv.stm.amount\n    credit = 0.0\n    vat = 0.0\n    descr = inv.body.name_training\n    return create_journal_entry(id, customer_id, invoice_nbr, from, to, debit, credit, vat, descr)\nend","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#1 It loads the domain elements.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#2 I only export the api and infrastructure pages from modules. Exporting domain elements can give irritating override errors. In the first API-method, we refer to Order, which cannot found by Julia. To make it accessible, use the import statement.  ","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#3 As we mentioned before, Julia uses multiple dispatch as a kind of overloading we know from object-oriented languages. It means that you can use the same method or function name as long as the signatures are different. As you can see, we use the create method two times, one for creating unpaid invoices and one for paid invoices.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"When you use the help function ? create it shows the two.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"#4 When the last statement of a function block is also the return value, you can leave out the keyword return.","category":"page"},{"location":"chapter4/#infrastructure.jl","page":"4. Implementing the design","title":"infrastructure.jl","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"The infrastructure layer, the outer peel of the onion, uses the elements from the api and the domain layers.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"The two methods that execute the workflow as we have described in our invoicing procedure are:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"process(path, orders::Array{Order, 1})\nprocess(path, invoices::Array{UnpaidInvoice, 1}, stms::Array{BankStatement, 1})","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"The first method creates unpaid invoices, the second one the paid invoices. Both generate the journal entries for the general ledger.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Take a peek at chapter 6 Testing the application to get an idea how the data flows through the application.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"using CSV\nusing DataFrames\n\ninclude(\"../api/api.jl\")\ninclude(\"./db.jl\") # database functions\n\n@enum TableName begin\n    UNPAID\n    PAID\nend # enumerator for TableName types\n\n# get last statement number for today\nn = 0\n\nprocess(path, orders::Array{Order, 1}) = begin\n    # connect to db\n    db = connect(path)\n\n    # get last order number\n    invnbr = 1000 #ToDo\n\n    # create invoices\n    invoices = [create(order, \"A\" * string(invnbr += 1)) for order in orders]\n\n    # archive invoices\n    archive(db, string(UNPAID), invoices)\n\n    # create journal entries from invoices\n    return entries = [conv2entry(inv, 1300, 8000) for inv in invoices]\nend # process(path, orders::Array{Order, 1})\n\n#process(bankstm::Array(Bankstatement, 1) = begin\nprocess(path, invoices::Array{UnpaidInvoice, 1}, stms::Array{BankStatement, 1}) = begin\n    # connect to db\n    db = connect(path)\n\n    # create array with potential paid invoices based on received bank statements\n    potential_paid_invoices = []\n    for unpaid_invoice in invoices\n      for stm in stms # get potential paid invoices\n        if occursin(unpaid_invoice.id, stm.descr) # description contains invoice number\n          push!(potential_paid_invoices, create(unpaid_invoice, stm))\n        end\n      end\n    end\n\n    # convert to an array with PaidInvoice's\n    paid_invoices = convert(Array{PaidInvoice, 1}, potential_paid_invoices)\n\n    # archive PaidInvoice's\n    archive(db, string(PAID), paid_invoices)\n\n    # return array with JournalEntry's\n    return entries = [conv2entry(inv, 1150, 1300) for inv in paid_invoices]\nend # process(path, invoices::Array{UnpaidInvoice, 1}, stms::Array{BankStatement, 1})\n\nread_bank_statements(path::String) = begin\n    # read the CSV file containing bank statements\n    df = CSV.read(path) # returns a DataFrame\n\n    # return an array with BankStatement's\n    # row[1] is the first value of row, row[2] the second value, etc.\n    return [BankStatement(row[1], row[2], row[3], row[4]) for row in eachrow(df)]\nend # read_bank_statements\n\nretrieve_unpaid_invoices(path)::Array{UnpaidInvoice, 1} = begin\n    # connect to db\n    db = connect(path)\n\n    # retrieve unpaid invoices as dataframe\n    unpaid_records = retrieve(db, string(UNPAID))\n\n    # convert the dataframe to an array with UnpaidInvoice's.\n    # row is an array with one element, which is an array.\n    # row[1] is the the content of the element, the UnpaidInvoice.\n    unpaid_invoices = [row[1] for row in eachrow(unpaid_records.item)]\n\n    # return the array with UnpaidInvoice's\n    return unpaid_invoices\nend # retrieve_unpaid_invoices","category":"page"},{"location":"chapter4/#db.jl","page":"4. Implementing the design","title":"db.jl","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"A microservice is responsible for his data. If we also see a module as an independent component, the same argument would apply. For the Invoicing module, these are the UnpaidInvoice and PaidInvoice objects.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"The db.jl page is based on SQLite.jl module. It translates a data structure into a row in a table whose column names match the argument names of the function. The store method performs this action.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Sometimes you want to save a data structure in a single cell, possibly with additional information. We use the data structure DatabaseItem to achieve this. The column item contains the data structure in the serialized form. Use the archive method for this purpose.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Reading rows results in a DataFrame. It is similar to a spreadsheet where you use column names. If we retrieve the data from a table, it has the advantage of reading the column item of the DataFrame results in an array.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"# db.jl\n\nusing SQLite\n\n# Database item\nstruct DatabaseItem{T}\n   time::Float64\n   agent::String\n   action::String\n   key::String\n   item::T\nend # DatabaseItem\n\n# createDatabaseItem - internal method\nconst agent = \"AB9F\"\ncreateDatabaseItem(item::Any; agent=agent, action=\"CREATE\") = DatabaseItem(time(), agent, action, item.id, item)\n\n# Connect with PATH_CSV\nconnect(path::String)::SQLite.DB = SQLite.DB(path)\n\n# connect to in-memory database\nconnect()::SQLite.DB = SQLite.DB()\n\n# archive an item as DatabaseItem\narchive(db, table::String, items::Array{T, 1} where {T <: Any}) = begin\n   # save items\n   dbi = [ createDatabaseItem( i ; action=\"CREATE\" ) for i in items]\n   # return as dataframe\n   DataFrame( dbi ) |> SQLite.load!(db, table)\nend # archive\n\n#store the fields of an item\nstore(db, table::String, items::Array{T, 1} where {T <: Any}) = begin\n   DataFrame( items ) |> SQLite.load!(db, table)\nend # store\n\n# retrieve all item from a table\nretrieve(db, table::String)::DataFrame = SQLite.Query( db, \"select * from $table\") |> DataFrame\n\n# retrieve item form a table based on a sql condition\nretrieve(db, table::String, condition::String )::DataFrame = SQLite.Query( db, \"select * from $table where $condition\")  |> DataFrame\n\n# run a custom function\nrunfunct(funct, x, y, z) = funct(x, y, z)","category":"page"},{"location":"chapter4/#Exercice-4.2","page":"4. Implementing the design","title":"Exercice 4.2","text":"","category":"section"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"To save time we clone my Invoicing repository from GitHub.","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"Goto your base folder.\nRun thee command: git clone https://github.com/rbontekoe/AppliInvoicing.jl.git\nGoto the folder AppliInvoicing.jl: cd AppliInvoicing.jl\nStart Juno: atom .\nStart Julia.\nGoto the package manager: ]\nActivate the local environment (and don't forget the point .): activate .\nOpen the page test.jl.\nUse Shit-Enter to step door your code. You will see:","category":"page"},{"location":"chapter4/","page":"4. Implementing the design","title":"4. Implementing the design","text":"[ Info: 2020-02-04T12:02:13.613 - Test program started.\n[ Info: The database test_invoicing.sqlite will be removed permanently by the last two statements of this page.\n[ Info: 2020-02-04T12:02:20.128 - Orders received.\n[ Info: 2020-02-04T12:02:23.586 - Unpaid invoices created.\n[ Info: 2020-02-04T12:02:27.884 - Journal entries for unpaid invoices created.\n[ Info: 2020-02-04T12:02:34.27 - Get bankstatement entries for testing.\n[ Info: 2020-02-04T12:02:35.278 - Unpaid invoices retrieved from database.\n[ Info: 2020-02-04T12:02:35.906 - Journal entries for paid invoices created.","category":"page"},{"location":"appendix/#Appendix","page":"Appendix","title":"Appendix","text":"","category":"section"},{"location":"appendix/#Introduction","page":"Appendix","title":"Introduction","text":"","category":"section"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"I have a Windows 10 laptop with Ubuntu 18.04 installed on a separate disk. I start my machine form this disk.","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"All instalation instructions in this course are based on Ubuntu. Whenever possible I like to create the course environment in a Docker container, for the instructor and for the students.","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"In the course setup I use my machine as IJulia Notebook server.","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Ideas are from Andre Ferrari","category":"page"},{"location":"appendix/#Install-Julia","page":"Appendix","title":"Install Julia","text":"","category":"section"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Prerequisites","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Your computer OS is Ubuntu 18.04 64 bit.","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Step Action Comment\n1 Download Julia Click on the link and find the row Generic Linux Binaries for x86. Click on 64-bit. Download the file eg. julia-1.3.0-linux-x86_64.tar.gz\n2 $ mkdir julia Create a folder\n3 $ cd julia Enter folder\n4 $ mv ~/Downloads/julia-1.3.0-linux-x86_64.tar.gz . Move the downloaded file to folder julia.\n5 $ tar -zxvf julia-1.3.0-linux-x86_64.tar.gz Extract the file.\n6 $ sudo ln -s /home/rob/julia/julia-1.3.0/bin/julia /usr/local/bin/julia Create a link.\n7 $ julia Start Julia.","category":"page"},{"location":"appendix/#Install-Docker","page":"Appendix","title":"Install Docker","text":"","category":"section"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Prerequisites","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Your computer OS is Ubuntu 18.04.","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"See: How To Install Docker On Ubuntu 18.04 Bionic Beaver","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Step Action Comment\n1 sudo apt-get update Update Software Repositories.\n2 sudo apt-get remove docker docker-engine docker.io Uninstall Old Versions of Docker\n3 sudo apt install docker.io Install Docker\n4 sudo systemctl start docker Start and Automate Docker\n5 sudo systemctl enable docker \n6 docker â€“version Check Docker Version","category":"page"},{"location":"appendix/#Dockerfile","page":"Appendix","title":"Dockerfile","text":"","category":"section"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Prerequisites","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Your computer OS is Ubuntu 18.04.\nYou have installed Dockerversion version 0.18.0 or higher.","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"If you have installed Docker, you can create a Docker Image from a Dockerfile. From an image you can create Docker containers.","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"FROM \"jupyter/minimal-notebook\"\n\nUSER root\n\nENV JULIA_VERSION=1.1.0\n\nRUN mkdir /opt/julia-${JULIA_VERSION} && \\\n    cd /tmp && \\\n    wget -q https://julialang-s3.julialang.org/bin/linux/x64/`echo ${JULIA_VERSION} | cut -d. -f 1,2`/julia-${JULIA_VERSION}-linux-x86_64.tar.gz && \\\n    tar xzf julia-${JULIA_VERSION}-linux-x86_64.tar.gz -C /opt/julia-${JULIA_VERSION} --strip-components=1 && \\\n    rm /tmp/julia-${JULIA_VERSION}-linux-x86_64.tar.gz\n\nRUN ln -fs /opt/julia-*/bin/julia /usr/local/bin/julia\n\nUSER $NB_UID\n\n# Add packages and precompile\n\nRUN julia -e 'import Pkg; Pkg.update()' && \\\n    julia -e 'import Pkg; Pkg.add(\"Plots\"); using Plots' && \\\n    # julia -e 'import Pkg; Pkg.add(\"PlotlyJS\"); using PlotlyJS' && \\\n    julia -e 'import Pkg; Pkg.add(\"Distributions\"); using Distributions' && \\\n    julia -e 'import Pkg; Pkg.add(\"Optim\"); using Optim' && \\\n    julia -e 'import Pkg; Pkg.add(\"StatsPlots\"); using StatsPlots' && \\\n    julia -e 'import Pkg; Pkg.add(\"IJulia\"); using IJulia' && \\\n    fix-permissions /home/$NB_USER","category":"page"},{"location":"appendix/#Install-IJulia","page":"Appendix","title":"Install IJulia","text":"","category":"section"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Prerequisites","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Your computer OS is Ubuntu 18.04.\nYou have installed Dockerversion version 0.18.0 or higher.","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"note: Note\nThe instruction are based on Ubuntu 18.04. We use the command line in a terminal window.First check whether Docker is installed on your system, by typing docker --version. If the command docker is not recognized, install Docker.","category":"page"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Step Action Comment\n1 Open a terminal window on Ubuntu $ is the prompt of your OS.\n2 $ mkdir work Create the folder work. Optionally, create sub-directories with the names of your students.\n3 $ mkdir julia Create another directory `julia'.\n4 $ cd julia Goto the directory julia.\n5 Copy the code of the section Dockerfile to the clipboard \n6 $ nano Dockerfile Open the text editor nano.\n7 Ctrl-Shift-V Paste the text on the clipboard into the text editor.\n8 Ctrl-O Save the Dockerfile.\n9 Ctrl-X Exit nano\n10 $ ls list the content of the directory julia.\n11 $ cat Dockerfile Display the content of the Dockerfile.\n12 $ docker build -t julia-image . Create a Docker IJulia image. The name of the image is julia-image.\n13 $ docker run -v ~/work:/home/jovjan/work -p 8888:8888 --name julia julia-image Create a Docker container, and the IJulia Notebook server starts.\n14 Ctrl-C Stop the server.","category":"page"},{"location":"appendix/#Using-IJulia","page":"Appendix","title":"Using IJulia","text":"","category":"section"},{"location":"appendix/#Instructor","page":"Appendix","title":"Instructor","text":"","category":"section"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Step Action/Response Comment\n1 $ docker start julia Start the IJulia.\n2 $ docker exec -it julia bash Start the Docker client.\n3 jovyan@40f8c3bcf0c1:~$ jupyter notebook list Display the token.\n jovyan@40f8c3bcf0c1:~$ jupyter notebook list Currently running servers: http://0.0.0.0:8888/?token=f394613a12c103a2de92e70aa34715b2183d58e3d5580a2e :: /home/jovyan \n4 Select the token In this case: f394613a12c103a2de92e70aa34715b2183d58e3d5580a2e.\n5 Ctrl-Shift-C Copy the token to the clipboard.\n6 Store the key somewhere, so you can email it to your students. \n7 $ Ctrl-D Exit Docker client.","category":"page"},{"location":"appendix/#Important-Docker-commands","page":"Appendix","title":"Important Docker commands","text":"","category":"section"},{"location":"appendix/","page":"Appendix","title":"Appendix","text":"Action Comment\ndocker images Display all Docker Images.\ndocker ps Display all running containers.\ndocker ps - a Display all containers.\ndocker start <name or id> E.g docker start julia.\ndocker exec -it <name or id> <command> E.g docker exec -it julia bash.\ndocker exec -it <name or id> <command> E.g docker exec -it julia julia.\nCtrl-D Exit the container\ndocker stop <name or id> E.g docker stop julia.\ndocker rm -f <name or id> Delete a container.\ndocker rmi <image id> Delete a image.","category":"page"},{"location":"chapter12/#.-Run-the-application-in-containers","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Under development!","category":"page"},{"location":"chapter12/#What-you-will-learn","page":"12. Run the application in containers","title":"What you will learn","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Pages = [\"chapter12.md\"]","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"In lesson 9, Creating SSH enabled Containers, we created two containers: test_sshd and test_sshd2. In this chapter, we learn how to run a function in a remote container test_sshd2. Before we use the model we created in earlier lessons, you will test the containers with the package RbO.jl.","category":"page"},{"location":"chapter12/#Activity-1:","page":"12. Run the application in containers","title":"Activity 1:","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"You start the two Docker containers, test_sshd, and test_sshd2. We need to know their Docker IP-addresses. With the command ssh rob@<ip-address>, we enter the test_sshd container. Within this container, we generate a process id bound to the IP-address of test_ssh2.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"We create the file main.jl, which contains the base code for container-container communication.","category":"page"},{"location":"chapter12/#Activities-2a-and-2b:","page":"12. Run the application in containers","title":"Activities 2a and 2b:","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Next, we use the example code to create a subscriber based on a name. We prefer to do the test with AppliGate's module RbO.jl. In chapter 12, you will use your modules.","category":"page"},{"location":"chapter12/#Activity-3:","page":"12. Run the application in containers","title":"Activity 3:","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"You learn to write a function that can run remotely, and that saves a subscriber in an SQLite database on the container test_sshd2.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#Activity-1:-Start-the-Julia-1.3.0-containers","page":"12. Run the application in containers","title":"Activity 1: Start the Julia 1.3.0 containers","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Prerequisites:","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Docker is installed on your computer.\nYou have the two containers test_sshd and test_sshd2 created in chapter 9, Create the Container.\nBoth containers are SSH enabled.\nYou have a Internet connection to download the RbO.jl module.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Steps:","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Start both containers and check their Docker internal IP-address.\nUse SSH to connect from testsshd to testsshd2 and install RbO.jl in both containers.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#Step-1-Start-both-containers-and-check-their-Docker-internal-IP-address","page":"12. Run the application in containers","title":"Step 1 - Start both containers and check their Docker internal IP-address","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Step Action Comment\n1 $ docker start test_sshd \n2 $ docker start test_sshd2 \n3 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd e.g. 172.17.0.2\n3 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd2 e.g. 172.17.0.3","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#Step-2-Use-SSH-to-connect-from-test_sshd-to-test_sshd2-and-install-RbO.jl","page":"12. Run the application in containers","title":"Step 2 - Use SSH to connect from test_sshd to test_sshd2 and install RbO.jl","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Install RbO in both containers, Example of adding the module","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Step Action Comment\n1 $ ssh rob@172.17.0.2 Enter the container test_sshd.\n2 $ ssh rob@172.17.0.3 Enter the container test_sshd3.\n3 $ julia Start Julia.\n4 julia> ] Go to the package manager.\n5 pkg> add https://github.com/rbontekoe/RbO.jl Install RbO.jl.\n6 Ctrl-C Return to REPL prompt.\n7 Ctrl-D Leave Julia.\n8 Ctrl-D Leave the container test_sshd2.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"note: Note\nIf your container is running on a remote machine, you have to use the ip-address of the remote machine and the exported port of the container to connect to.$ docker start test_sshd # start the container test_sshd$ docker port test_sshd # display the port, e.g. 22/tcp -> 0.0.0.0:32768$ ssh 192.168.xxx.xxx -p 32768 # connect to the container on remote machine","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#Activity-2a:-Start-the-two-containers-and-create-main.jl","page":"12. Run the application in containers","title":"Activity 2a: Start the two containers and create main.jl","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Prerequisites:","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Docker is installed on your computer.\nYou have the two containers testsshd and testsshd2 created in Chapter 9, Create the Container.\nBoth containers are SSH-enabled.\nJulia is installed in the directory julia on the containers.\nThe RbO.jl package is installed in both containers.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Steps","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Start the container test_sshd and create main.jl with nano.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#.-Start-the-container-test_sshd-and-test_sshd2","page":"12. Run the application in containers","title":"1. Start the container test_sshd and test_sshd2","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Step Action Comment\n1 $ docker start test_sshd Start the first container.\n2 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd Displays docker address, eg, 172.17.0.2.\n3 Take a note of the ip-address of test_sshd \n4 $ docker start test_sshd2 Start the second container.\n5 Take a note of the ip-address of test_sshd2 \n6 $ ssh rob@172.17.0.2 Use the ip-address step 2.\n7 $ julia Start Julia, and continue at step 8 of Activity 2: Test the code","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#Example-test-code","page":"12. Run the application in containers","title":"Example test code","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"julia> using Distributed\n\njulia> d = Dict([]) # empty directory for pids, used by the calling container\nDict{Any,Any} with 0 entries\n\njulia> addprocs([(\"rob@172.17.0.3\", 1)])\n\njulia> d[\"test_sshd2\"] = last(workers())\n\njulia> @everywhere using RbO\n\njulia> @everywhere f1(x) = createSubscriber(x)\n\njulia> s1 = remotecall_fetch(f1, d[\"test_sshd2\"], \"Daisy\")\n","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#Activity-2b:-Test-the-code","page":"12. Run the application in containers","title":"Activity 2b: Test the code","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Prerequisites:","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Actitvity 1","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Step Action Comment\n8 Copy all the Test code example code to the clipboard, including the julia prompt and the response \n9 Return to the container \n10 Ctrl-Shfi-V Paste the text on the clipboard in the Julia REPL.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"The result should look like the next example:","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"julia> s1 = remotecall_fetch(f1, d[\"test_sshd2\"], \"Daisy\")\nSubscriber(\"884704875723870469\", \"Daisy\", \"\", MEAN_CALCULATOR)","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#Activity-3:-Run-a-function-in-the-remote-container","page":"12. Run the application in containers","title":"Activity 3: Run a function in the remote container","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Create and save a subscriber in the container test_sshd2. Then display all saved subscribers from a table.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Prerequisites:","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Activity 1\nActivity 2\nThe package SQLite.jl is installed in both containers.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Steps:","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Install SQLite.jl\nTry the example code\nUse the RbO.jl documentation","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#.-Install-SQLite.jl","page":"12. Run the application in containers","title":"1. Install SQLite.jl","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Step Action Comment\n1 Enter test_sshd and start Julia \n2 Go to the package manager \n3 pkg > add SQLite ","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#.-Try-the-example-code","page":"12. Run the application in containers","title":"2. Try the example code","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Try the code below.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"\nusing Distributed\n\nd = Dict([])\n\naddprocs([(\"rob@172.17.0.3\", 1)])\n\nd[\"test_sshd2\"] = last(workers())\n\n@everywhere using RbO\n\n# define a new function to create a new subscriber and save it in a database\n@everywhere f2(x) = begin\n  \ts = createSubscriber(x) # create a subscriber\n\tdb = connect(\"./rbo.sqlite\") # connect to database\n\tcreate(db, \"subscribers\", [s]) # save subscriber in database\nend\n\nremotecall_fetch(f2, 2, \"Mickey\")\n\n# define a new function for displaying all subscribers\n@everywhere f3(x) = begin\n   db = connect(\"./rbo.sqlite\") # connect to database\n   gather(db, x) # list all items in table x\nend\n\n# Get list of subscrobers\nremotecall_fetch(f3, 2, \"subscribers\")\n\n# Remove process\nrmprocs(d[\"test_sshd2\"])\n\n# Remove key from dictionary\ndelete!(d, \"test_sshd2\")\n","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"","category":"page"},{"location":"chapter12/#.-Use-the-RbO.jl-documentation","page":"12. Run the application in containers","title":"3. Use the RbO.jl documentation","text":"","category":"section"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Use the documentation to do the next steps.","category":"page"},{"location":"chapter12/","page":"12. Run the application in containers","title":"12. Run the application in containers","text":"Step Action Comment\n1 Use the command connect to create a link to the on-disk database rbo.sqlite \n2 Use the command 'gather' to retieve data from the SQL table subscribers ","category":"page"},{"location":"chapter6/#.-Testing-the-application","page":"6. Testing the application","title":"6. Testing the application","text":"","category":"section"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"UNDER DEVELOPMENT!","category":"page"},{"location":"chapter6/#What-you-will-learn","page":"6. Testing the application","title":"What you will learn","text":"","category":"section"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"Pages = [\"chapter6.md\"]","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"You learn to use Julia Channel's to transfer data between the tasks. When started, a task receives a general channel where we put for the result. The dispatcher reads data from the channel and pushes it to the relevant private channel of the task. We let the methods run remotely, which means on another core or machine. Next, we start a function to retrieve data. The job pushes the returned data to the general channel, and the dispatcher decides again.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"Application set-up","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"                         +-------------+\n                         |    Master   |\n                         +-------------+\n                          BankStatementÂ¹\n                                Â¦\n                                â†“\n    ----------------------------------------------------- rxÂ¹\n                   â†‘â´                    â†‘â´            â†“\n                   Â¦                     Â¦             â—Š DispatcherÂ²\n          â†™        Â¦            â†™        Â¦            â†™\n      --- txÂ³      Â¦        --- txÂ³      Â¦        --- txÂ³\n       Â¦           Â¦       Order,        Â¦         Â¦\n    \"START\"        Â¦   BankStatement     Â¦    JournalEntry\n       Â¦           Â¦         Â¦           Â¦         Â¦\n       â†“         Order       â†“      JournalEntry   â†“\n      +--------------+      +--------------+      +--------------+\n      |    Sales     |      |  Invoicing   |      | GeneralLedger|    Workers\n      +--------------+      +--------------+      +--------------+\nâ†˜","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"Â¹ rx, the channel that receives the output from the modules. The Master creates rx. The Master also generate the test data for the channel: Array{BankStatement, 1}.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"Â² Dispatcher, a job running in the Master, takes an object from rx and pushes it to the relevant tx channel.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"Â³ tx is a task bounded channel. The task takes the entity from his channel and processes it remotely.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"â´ The task pushes the output, Array{Order, 1} or Array{JournalEntry, 1} in this diagram, to the rx channel.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"See: test_local_channels.jl","category":"page"},{"location":"chapter6/#Using-Channels","page":"6. Testing the application","title":"Using Channels","text":"","category":"section"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"Julia has local and remote channels. In the test\\_local\\_channel.jl page, we use local channels. The dispatcher creates the general channel rx and instantiates the tasks. Each task returns its channel.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"function dispatcher()\n    rx = Channel(32) # local channel\n\n    tx0 = task_0(rx) # get the orders\n    tx1 = task_1(rx) # process the orders\n    tx2 = task_2(rx) # process the journal entries\n    tx3 = task_3(rx) # process the unpaid invoices","category":"page"},{"location":"chapter6/#The-tasks","page":"6. Testing the application","title":"The tasks","text":"","category":"section"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"Each task creates its private channel tx. Then it starts an asynchronous endless loop. Within the while loop, it tests whether the channel is ready. If it is not ready, which means it doesn't have any data, it enters a wait state. As soon as there is data on the channel, it leaves the wait state.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"If the data has the right data type or value, it runs a function remotely. The task puts the return value of the function on the general channel rx and returns to its wait state until there is more data.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"Because the while loop runs asynchronous, the function can return it local channel to the dispatcher.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"For more information and examples of parallel computing, please see Carsten Bauer's Parallel Computing notebook.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"# =================================\n# task_1 - processing orders\n# =================================\nfunction task_1(rx)\n    tx = Channel(32)\n    @async while true\n        if isready(tx)\n            orders = take!(tx)\n            @info(\"task 1 (create invoices): $(typeof(orders))\")\n            if typeof(orders) == Array{AppliSales.Order, 1}\n                @info(\"task_1 (create invoices) will process $(length(orders)) orders remotely\")\n                result = @fetch AppliInvoicing.process(PATH_DB, orders)\n                @info(\"task_1 (create invoices) will put $(length(result)) journal entries on rx channel\")\n                put!(rx, result)\n            end\n        else\n            @info(\"task_1 (create invoices) is waiting for data\")\n            wait(tx)\n        end\n    end\n    return tx\nend # task_1","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"#1 - When the endless loop is in the wait(tx) state, then the state is released and is the if clause executed. It takes the value, and tests whether it is of the type Array{AppliSales.Order, 1}.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"#2 - The function AppliInvoicing.process(PATH_DB, orders) is executed remotely, on another core or machine","category":"page"},{"location":"chapter6/#Running-code-on-other-cores","page":"6. Testing the application","title":"Running code on other cores","text":"","category":"section"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"Julia uses the master-worker concept. It means that you can let run your code on other cores or even cores on different machines.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"The code of the page test\\_remote\\_channels.jl can partially run on other processor cores.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"To enable parallel and distributed computing use the statement using Distributed.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"See: testremotechannels.jl","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"In this example, it is Julia that decides on which core the code will run.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"np = addprocs(4) #1\n@info(\"number of processes is $(length(np))\")","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"#1 My laptop, a Legion Y520, has a processor with 4 cores.","category":"page"},{"location":"chapter6/#The-dispatcher","page":"6. Testing the application","title":"The dispatcher","text":"","category":"section"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"After initialization the dispather starts an asynchronous endless loop. It takes an entity from the general channel rx. Depending on the data type or value, it starts the relevant task.","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"function dispatcher()\n    rx = Channel(32)\n\n    tx0 = task_0(rx) # get the orders\n    tx1 = task_1(rx) # process the orders\n    tx2 = task_2(rx) # process the journal entries\n    tx3 = task_3(rx) # process the unpaid invoices\n\n    @async while true\n        if isready(rx)\n            value = take!(rx)\n            @info(\"Dispatcher received $(typeof(value))\")\n            if typeof(value) == String && value ==\"START\"\n                put!(tx0, \"START\")\n            elseif typeof(value) == Array{AppliSales.Order, 1}\n                put!(tx1, value)\n            elseif typeof(value) == Array{AppliGeneralLedger.JournalEntry,1}\n                put!(tx2, value)\n            elseif typeof(value) == Array{AppliInvoicing.BankStatement,1}\n                put!(tx3, value)\n            else\n                @warn(\"No task found for type $(typeof(value))\")\n            end\n        else\n            wait(rx)\n        end\n    end\n    return rx\nend # dispatcher","category":"page"},{"location":"chapter6/#Output","page":"6. Testing the application","title":"Output","text":"","category":"section"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"The code on page test\\_remote\\_channel.jl generates the following output:","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"[ Info: Enabled distributed computing\n[ Info: number of processes is 4\n[ Info: Loaded ./api/myfunctions.jl\n[ Info: running test_remote_channel.jl\n[ Info: task_0 is waiting for data\n[ Info: task_1 is waiting for data\n[ Info: task_2 is waiting for data\n[ Info: task_3 is waiting for data\n\n[ Info: Dispatcher started\n[ Info: The Master will start the process and asks for test orders from the AppliSales module\n[ Info: Dispatcher received String\n[ Info: task_0 received String\n[ Info: task_0 will start the process remotely #1\n[ Info: task_0 will put 3 the orders on rx channel\n[ Info: task_0 is waiting for data\n\n[ Info: Dispatcher received Array{AppliSales.Order,1}\n[ Info: task_1 received Array{AppliSales.Order,1}\n[ Info: task_1 will process 3 orders remotely\n[ Info: task_1 will put 3 journal entries on rx channel\n[ Info: task_1 is waiting for data\n\n[ Info: Dispatcher received Array{AppliGeneralLedger.JournalEntry,1}\n[ Info: task_2 received Array{AppliGeneralLedger.JournalEntry,1}\n[ Info: task_2 will process 3 journal entries remotely\n[ Info: task_2 saved 3 journal entries\n[ Info: task_2 is waiting for data\n\n[ Info: Master got 2 bank statements\n[ Info: Master will put 2 bank statements on rx channel\n[ Info: Dispatcher received Array{AppliInvoicing.BankStatement,1}\n[ Info: task_3 received Array{AppliInvoicing.BankStatement,1}\n[ Info: task_3 will match unpaid invoices with bank statements\n[ Info: task_3 will put 2 journal entries on rx channel\n[ Info: task_3 is waiting for data\n\n[ Info: Dispatcher received Array{AppliGeneralLedger.JournalEntry,1}\n[ Info: task_2 received Array{AppliGeneralLedger.JournalEntry,1}\n[ Info: task_2 will process 2 journal entries remotely\n[ Info: task_2 saved 2 journal entries\n[ Info: task_2 is waiting for data\n\n[ Info: Dispatcher received String\nâ”Œ Warning: No task found for type String\nâ”” @ Main ~/julia-projects/tc/AppliMaster/src/api/myfunctions.jl:130","category":"page"},{"location":"chapter6/","page":"6. Testing the application","title":"6. Testing the application","text":"#1 remotely means: running a task on another process (core).","category":"page"},{"location":"chapter8/#.-Documenting-your-code","page":"8. Documenting your code","title":"8. Documenting your code","text":"","category":"section"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"Under development!","category":"page"},{"location":"chapter8/#What-you-will-learn","page":"8. Documenting your code","title":"What you will learn","text":"","category":"section"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"Pages = [\"chapter8.md\"]","category":"page"},{"location":"chapter8/#An-example","page":"8. Documenting your code","title":"An example","text":"","category":"section"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"You can document your code, which the user can see when one uses Julia's help. Place the whole between three quotation marks, just above a function. The first line starts with four spaces, followed by the syntax of the function. On the next lines, you can tell what it does.","category":"page"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"You can also use an example. Start with # Example with on the next lines the case enclosed between three back-ticks. It can be the code you copied from the REPL.","category":"page"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"Example","category":"page"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"\"\"\"\n    create(order::Order, invoice_id::String)::UnpaidInvoice\n\nCreate an UnpaidInvoice from an AppliSales.Order\n\n# Example\n````jldoctest #1 #2\njulia> using AppliInvoicing\n\njulia> using AppliSales\n\njulia> orders = AppliSales.process()\n\njulia> invnbr = 1000\n\njulia> invoices = [create(order, \"A\" * string(global invnbr += 1)) for order in orders]\n```` #1\n\"\"\"\ncreate(order::Order, invoice_id::String)::UnpaidInvoice = begin\n    meta = MetaInvoice(order.id, order.training.id)\n    header_invoice = Header(\n            invoice_id, order.org.name, order.org.address, order.org.zip, order.org.city, order.org.country, order.order_ref, order.contact_name, order.contact_email)\n    body_invoice = OpentrainingItem(order.training.name, order.training.date, order.training.price, order.students)\n    return UnpaidInvoice(invoice_id, meta, header_invoice, body_invoice)\nend","category":"page"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"#1 - Replace the four back-ticks by three back-ticks.","category":"page"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"#2 - documenter.jl tests the code when it encounters jldoctest.","category":"page"},{"location":"chapter8/#Activity-8.1-Using-Help","page":"8. Documenting your code","title":"Activity 8.1 - Using Help","text":"","category":"section"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"Step Action Comment\n1 Start Julia \n2 julia> ] Activate Package Manager.\n3 pkg> add https://github.com/rbontekoe/AppliInvoicing.jl Add AppliInvoicing. Use update when you already added the package.\n4 pkg>  Ctrl-C Back to Julia.\n5 julia> using AppliInvoicing \n6 Julia> ? Go to the Help mode.\n7 help?> create Search for the create functions. Julia displays two create methods.","category":"page"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"The first method is create(order::Order, invoice_id::String)::UnpaidInvoice:","category":"page"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"search: create searchsortedlast\n\n  create(order::Order, invoice_id::String)::UnpaidInvoice\n\n  Create an UnpaidInvoice from an AppliSales.Order\n\n  Example\n  â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡\n\n  julia> using AppliInvoicing\n\n  julia> using AppliSales\n\n  julia> orders = AppliSales.process()\n\n  julia> invnbr = 1000\n\n  julia> invoices = [create(order, \"A\" * string(global invnbr += 1)) for order in orders]\n\n  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n","category":"page"},{"location":"chapter8/","page":"8. Documenting your code","title":"8. Documenting your code","text":"Step Action Comment\n8 Select the code under example to the clipboard Including the julia> prompts.\n9 Ctrl-C Copy the code to the clipboard.\n9 julia> Ctrl-V Paste the code at the julia> prompt. Immediately, Julia executes the code.","category":"page"},{"location":"chapter15/#Implementing-AppliAR-(Accounts-Receivable)-package","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"See also: Developing Julia Packages","category":"page"},{"location":"chapter15/#Step-1-Create-a-package","page":"Implementing AppliAR (Accounts Receivable) package","title":"Step 1 - Create a package","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"Create the local package AppliAR (Accounts Receivable)\nCreate the GitHub Repository AppliAR.jl\nPush local repostitory to GitHub","category":"page"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"","category":"page"},{"location":"chapter15/#Step-1.1-Create-the-local-package-AppliAR-(Accounts-Receivable)","page":"Implementing AppliAR (Accounts Receivable) package","title":"Step 1.1 - Create the local package AppliAR (Accounts Receivable)","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"Prerequisites","category":"page"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"Ubuntu 18.04\nJulia 1.3 installed\nAtom installed\nGitHub account\nGitKraken installed\nTravis CI account","category":"page"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"Step Action Comment\n1 $ julia Start Julia.\n2 julia> ] Select the Package REPL.\n3 pkg> add PkgTemplates Install PkgTemplates.jl\n4 pkg> BackSpace Back to the Julia REPL.\n5 Paste the following code into the Julia REPL ","category":"page"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"julia> using PkgTemplates # Start the PkgTemplates package\n\njulia> t2 = Template(; # Create the template\n              user=\"rbontekoe\",\n              license=\"MIT\",\n              authors=[\"Rob Bontekoe\"],\n              julia_version=v\"1.3\",\n              ssh=true,\n              plugins=[\n                  TravisCI(),       # Continious Integration\n                  Codecov(),        # Improve your code review\n                  Coveralls(),      # Which parts arenâ€™t covered by your test suite\n                  AppVeyor(),       # CI/CD service\n                  GitHubPages(),    # Documentation\n              ],\n   )\n\njulia> generate(t, \"AppliAR\") # Create the local package in ~/.julia/dev","category":"page"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":":â€“â€“â€“â€“â€“ :â€“â€“â€“â€“â€“ :â€“â€“â€“â€“â€“\n1 $ julia Start Julia.","category":"page"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"julia> 1 + 2","category":"page"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"| 2 | Etc. | |","category":"page"},{"location":"chapter15/#Step-1.2-Create-the-GitHub-Repository-AppliAR.jl","page":"Implementing AppliAR (Accounts Receivable) package","title":"Step 1.2 - Create the GitHub Repository AppliAR.jl","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"Step Action Comment\n1 https://github.com.<YOURNAME> Go to your GitHub account.\n2 Click on the Tab Repositories \n3 Click on the button New \n4 type: AppliAR.jl Type your package name ending with .jl in the Repository name field.\n5 Click on the button Create repository ","category":"page"},{"location":"chapter15/#Step-1.3-Push-local-repostitory-to-GitHub","page":"Implementing AppliAR (Accounts Receivable) package","title":"Step 1.3 - Push local repostitory to GitHub","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"|Step     | Action      | Comment | |:â€“â€“â€“â€“â€“ | :â€“â€“â€“â€“â€“ |:â€“â€“â€“â€“â€“ |","category":"page"},{"location":"chapter15/#Step-2-Implement-the-AppliAR","page":"Implementing AppliAR (Accounts Receivable) package","title":"Step 2 - Implement the AppliAR","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"\n\n","category":"page"},{"location":"chapter15/#Step-3-Creating-the-Domain-items","page":"Implementing AppliAR (Accounts Receivable) package","title":"Step 3 - Creating the Domain items","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"\n\n","category":"page"},{"location":"chapter15/#Step-4-Creating-the-API-functions","page":"Implementing AppliAR (Accounts Receivable) package","title":"Step 4 - Creating the API functions","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"\n\n","category":"page"},{"location":"chapter15/#Step-5-Creating-the-API-tests","page":"Implementing AppliAR (Accounts Receivable) package","title":"Step 5 - Creating the API tests","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"\n\n","category":"page"},{"location":"chapter15/#Step-6-Creating-the-Infrastructure-functions","page":"Implementing AppliAR (Accounts Receivable) package","title":"Step 6 - Creating the Infrastructure functions","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"\n\n","category":"page"},{"location":"chapter15/#Step-7-Creating-inthe-Infra-tests","page":"Implementing AppliAR (Accounts Receivable) package","title":"Step 7 - Creating inthe Infra tests","text":"","category":"section"},{"location":"chapter15/","page":"Implementing AppliAR (Accounts Receivable) package","title":"Implementing AppliAR (Accounts Receivable) package","text":"\n\n","category":"page"},{"location":"chapter10/#.-Creating-SSH-enabled-Containers","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"","category":"section"},{"location":"chapter10/#What-you-will-learn","page":"10. Creating SSH enabled Containers","title":"What you will learn","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Pages = [\"chapter10.md\"]","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"The article Dockerize an SSH service uses Ubuntu 16.04 as the base image. However, Julia 1.0 and higher needs Ubuntu 18.04, so we have changed the Dockerfile. This version of Ubuntu also requires that you create a user with administrator rights when you use SSH to connect.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"You also learn to install Julia in the container.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"To make use of passwordless connections between containers, you also learn to create SSH keys.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"In the next chapter, we will show you how to create containers on a Raspberry Pi 3B. I have another project running where I communicate with a Raspberry Pi to transfer images to my laptop.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"See also the Pact book Julia 1.0 Programming: Installing Julia from binaries","category":"page"},{"location":"chapter10/#Activity-1-Create-local-SSH-keys","page":"10. Creating SSH enabled Containers","title":"Activity 1 - Create local SSH keys","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Prerequisites:","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Your system has Ubuntu 18.04 that runs on an Intel x86 processor.\nYou have started your computer.\nYou haven't created the keys before.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Steps:","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Check previous created keys.\nCreate local SSH keys.","category":"page"},{"location":"chapter10/#.-Check-previous-created-keys","page":"10. Creating SSH enabled Containers","title":"1. Check previous created keys","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n1 $ ls -l .ssh ","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Response","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"ls: cannot access '.ssh': No such file or directory","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"You haven't created the key before, go to step 2.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"total 16\n-rw-r--r-- 1 root root  107 nov 13 10:57 config\n-rw------- 1 rob  rob  3247 okt 16 15:04 id_rsa\n-rw-r--r-- 1 rob  rob   748 okt 16 15:04 id_rsa.pub\n-rw-r--r-- 1 rob  rob   444 dec  3 14:59 known_hosts","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"You have created the keys before, no further action is required. The file id_rsa.pub contains your public key. Later on, we will create a copy of it in the SSH enabled container.","category":"page"},{"location":"chapter10/#.-Create-local-SSH-keys-on-your-computer","page":"10. Creating SSH enabled Containers","title":"2. Create local SSH keys on your computer","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n1 $ sudo apt-get update \n2 $ sudo apt-get install openssh-client Install ssh client on Ubuntu.\n3 $ ls -al ~/.ssh/id_*.pub View old keys.\n4 $ ssh-keygen -t rsa -b 4096 -C \"your_email@domain.com\" Generate the key.\n5 $ ls ~/.ssh/id_* View your new keys.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"See SSH Connection Refused (Causes & Solutions)","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n6 $ chmod 700 ~/.ssh Change right the folder .ssh\n7 $ chmod 600 ~/.ssh/authorized_keys Change right of the file authorized_keys","category":"page"},{"location":"chapter10/#Activity-2-Create-the-Container","page":"10. Creating SSH enabled Containers","title":"Activity 2 - Create the Container","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Prerequisites:","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Your system has Ubuntu 18.04 that runs on an Intel x86 processor.\nYou have started your computer.\nYou have installed Docker (See appendix).","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Steps:","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Create a Dockerfile in the folder test_sshd.\nCreate a Docker image eg_ssdh and the container test_sshd.\nCreate a user rob, who has administrator rights.","category":"page"},{"location":"chapter10/#The-Dockerfile","page":"10. Creating SSH enabled Containers","title":"The Dockerfile","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"FROM ubuntu:18.04\n\nRUN apt-get update && apt-get install -y openssh-server\nRUN mkdir /var/run/sshd\nRUN sed -i 's/PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config\n\n# SSH login fix. Otherwise user is kicked off after login\nRUN sed 's@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g' -i /etc/pam.d/sshd\n\nENV NOTVISIBLE \"in users profile\"\nRUN echo \"export VISIBLE=now\" >> /etc/profile\n\nEXPOSE 22\nCMD [\"/usr/sbin/sshd\", \"-D\"]","category":"page"},{"location":"chapter10/#.-Create-a-Dockerfile-in-the-folder-test_ssh","page":"10. Creating SSH enabled Containers","title":"1. Create a Dockerfile in the folder test_ssh","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n2 $ sudo mkdir test-ssh Create a new folder.\n3 $ cd test-ssh Go to the folder.\n4 Select the content of the Dockerfile above \n5 Ctrl-C Copy the selected text to the clipboard.\n6 $ nano Dockerfile Create a new empty file.\n7 Shift-Ctrl-V Paste text from the clipboard into nano.\n8 Ctrl-O <Enter> Save the file.\n9 Ctrl-X Exit nano.","category":"page"},{"location":"chapter10/#.-Create-a-Docker-image-eg_sshd-and-the-container-test_sshd","page":"10. Creating SSH enabled Containers","title":"2. Create a Docker image eg_sshd and the container test_sshd","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n1 $ docker build -t eg_sshd . Create a Docker image from the Dockerfile\n2 $ docker run -d -p 2222:22 --name test_sshd eg_sshd Create a container\n3 $ docker exec -it test_sshd bash Enter the container\n4 Ctrl-D Leave the container.","category":"page"},{"location":"chapter10/#.-Create-a-user-rob,-who-has-administrator-rights","page":"10. Creating SSH enabled Containers","title":"3. Create a user rob, who has administrator rights","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n1 $ docker exec -it test_sshd bash Enter the container\n2 # adduser rob ","category":"page"},{"location":"chapter10/#Response","page":"10. Creating SSH enabled Containers","title":"Response","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Adding user `rob' ...\nAdding new group `rob' (1000) ...\nAdding new user `rob' (1000) with group `rob' ...\nThe home directory `/home/rob' already exists.  Not copying from `/etc/skel'.\nadduser: Warning: The home directory `/home/rob' does not belong to the user you are currently creating.\nEnter new UNIX password:\nRetype new UNIX password:\npasswd: password updated successfully\nChanging the user information for rob\nEnter the new value, or press ENTER for the default\n\tFull Name []: Rob Bontekoe\n\tRoom Number []:\n\tWork Phone []:\n\tHome Phone []:\n\tOther []:\nIs the information correct? [Y/n] Y","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"note: Note\nYou are asked to give the user rob a password. The password you will use in the future for the SSH connection to the container, so write it down. You need it the first time when you want to enable passwordless communication. From Ubuntu 18.04 on, you don't know the roots' password anymore. That is the reason we had to create a user with administrator rights for SSH connections.","category":"page"},{"location":"chapter10/#Next-steps","page":"10. Creating SSH enabled Containers","title":"Next steps","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n3 # usermod -aG sudo rob Give user administrator rights.\n4 # apt-get install sudo You act as root when you precede your commands with sudo. It is not installed yet in this minimized container.\n5 # su rob Switch to the user rob\n To run a command as administrator (user \"root\"), use \"sudo <command>\". \\nSee \"man sudo_root\" for details. \n5 Ctrl-D Back as root user.\n6 Ctrl-D Leave the container.","category":"page"},{"location":"chapter10/#Important?","page":"10. Creating SSH enabled Containers","title":"Important?","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n6 $ chmod 700 ~/.ssh Change right the folder .ssh\n7 $ chmod 600 ~/.ssh/authorized_keys Change right of the file authorized_keys","category":"page"},{"location":"chapter10/#Activity-3-Install-Julia","page":"10. Creating SSH enabled Containers","title":"Activity 3 - Install Julia","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Prerequisites:","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Your system has Ubuntu 18.04 running on the Intel x86 processor.\nThe container test_sshd exists.\nThe container has the user rob, who has administrators (sudo) rights.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Activity:","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Download the Julia binary and copy it to the container.\nInstall Julia and test the installation.\nCreate a symbolic link to start Julia from everywhere.","category":"page"},{"location":"chapter10/#.-Download-the-Julia-binary-and-copy-it-to-the-container","page":"10. Creating SSH enabled Containers","title":"1. Download the Julia binary and copy it to the container","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n1 Download Julia eg. julia-1.3.0-linux-x86_64.tar.gz\n2 $ docker ps -a Check whether container test_ssh exists.\n2 $ docker start test_sshd Start the container.\n3 $ docker cp julia-1.3.0-linux-x86_64.tar.gz test_sshd:/home/rob Copy the downloaded file to the container.\n4 $ docker exec -it test_sshd bash Enter the conatiner.","category":"page"},{"location":"chapter10/#Next-steps-2","page":"10. Creating SSH enabled Containers","title":"Next steps","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n5 $ su rob Switch to user rob.\n6 $ cd ~ Go to home directory.\n7 $ ls You see the file julia-1.3.0-linux-x86_64.tar.gz","category":"page"},{"location":"chapter10/#.-Install-Julia-and-test-the-installation","page":"10. Creating SSH enabled Containers","title":"2. Install Julia and test the installation","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n5 $ mkdir julia Create folder julia. OS asks for yur password.\n6 $ mv julia-1.3.0-linux-x86_64.tar.gz julia Move file to folder.\n7 $ cd julia Enter folder\n8 $ tar -zxvf julia-1.3.0-linux-x86_64.tar.gz Extract the file.\n9 $ ls List the content of the folder.\n julia-1.3.0  julia-1.3.0-linux-x86_64.tar.gz \n10 $ cd julia-1.3.0/bin/ We will test Julia.\n11 $ sudo ./julia Start Julia.","category":"page"},{"location":"chapter10/#Response-2","page":"10. Creating SSH enabled Containers","title":"Response","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"   _       _ _(_)_     |  Documentation: https://docs.julialang.org\n  (_)     | (_) (_)    |\n   _ _   _| |_  __ _   |  Type \"?\" for help, \"]?\" for Pkg help.\n  | | | | | | |/ _` |  |\n  | | |_| | | | (_| |  |  Version 1.3.0 (2019-11-26)\n _/ |\\__'_|_|_|\\__'_|  |  Official https://julialang.org/ release\n|__/                   |\n\njulia>","category":"page"},{"location":"chapter10/#.-Create-a-symbolic-link-to-start-Julia-from-anywhere","page":"10. Creating SSH enabled Containers","title":"3. Create a symbolic link to start Julia from anywhere","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n12 Ctrl-D Leave Julia.\n13 cd ~ To home directory.\n14 $ sudo ln -s /home/rob/julia/julia-1.3.0/bin/julia /usr/local/bin/julia Create link.\n15 $ julia Start Julia.","category":"page"},{"location":"chapter10/#Activity-4-Test-the-container.","page":"10. Creating SSH enabled Containers","title":"Activity 4 - Test the container.","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Prerequisites:","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"You have an SSH enabled container.\nYou have created the SSH authorized_keys See.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Steps:","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Copy your public key to the container.\nTest the SSH connection with the container.","category":"page"},{"location":"chapter10/#.-Copy-your-public-key-to-the-container","page":"10. Creating SSH enabled Containers","title":"1. Copy your public key to the container","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n1 $ docker ps Check whether the container is already running.\n2 $ docker start test_sshd Start the container if not running.\n3 $ docker port test_sshd 22 Find the port number\n 0.0.0.0:32768 Port number is 32768.\n4 $ ssh-copy-id  rob@localhost -p 32769 Copy file to container\n5 $ ssh rob@localhost -p 32768 Connect to the container.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Enter y, and continue.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"The authenticity of host '[localhost]:32768 ([127.0.0.1]:32768)' can't be established.\nECDSA key fingerprint is SHA256:lix3DGk69mhTnPlb0WE70syuDWVh59XL3az/4UJDInc.\nAre you sure you want to continue connecting (yes/no)? yes","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Type your password.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed\n/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys\nrob@localhost's password:","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Then some instructions.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Number of key(s) added: 1\n\nNow try logging into the machine, with:   \"ssh -p '32769' 'rob@localhost'\"\nand check to make sure that only the key(s) you wanted were added","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"info: Info\nYour keys are stored in the folder /etc/ssh/.","category":"page"},{"location":"chapter10/#.-Test-the-SSH-connection-with-the-container.","page":"10. Creating SSH enabled Containers","title":"2. Test the SSH connection with the container.","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Step Action Comment\n1 ssh rob@localhost -p 32768 ","category":"page"},{"location":"chapter10/#Response-3","page":"10. Creating SSH enabled Containers","title":"Response","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 5.0.0-37-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\nThis system has been minimized by removing packages and content that are\nnot required on a system that users do not log into.\n\nTo restore this content, you can run the 'unminimize' command.\nLast login: Thu Dec  5 12:16:21 2019 from 172.17.0.1\nrob@13304c03391d:~$","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"info: Info\nYou can also work with the docker network address.docker inspect test_sshd | grep \"IPAddress\"The response is:\"SecondaryIPAddresses\": null,\n\"IPAddress\": \"172.17.0.2\",\n        \"IPAddress\": \"172.17.0.2\",You can also use:ssh rob@172.17.0.2","category":"page"},{"location":"chapter10/#Exercise","page":"10. Creating SSH enabled Containers","title":"Exercise","text":"","category":"section"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"Create a second container test_sshd2:","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"You don't have to create the keys again!\nUse the same image eg_sshd.\nCheck the port number of test_sshd2.\nName of the administrative user can be kept the same: rob.","category":"page"},{"location":"chapter10/","page":"10. Creating SSH enabled Containers","title":"10. Creating SSH enabled Containers","text":"We will use both containers in chapter 11.","category":"page"},{"location":"chapter20/#.-Using-Remote-Channels-(old-stuff)","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"section"},{"location":"chapter20/#What-you-will-learn","page":"20. Using Remote Channels (old stuff)","title":"What you will learn","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Pages = [\"chapter11.md\"]","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"In lesson 9, Creating SSH enabled Containers, we created two containers: test_sshd and test_sshd2. In this chapter, we learn how to run a function in a remote container test_sshd2. Before we use the model we created in earlier lessons, you will test the containers with the package RbO.jl.","category":"page"},{"location":"chapter20/#Activity-1:","page":"20. Using Remote Channels (old stuff)","title":"Activity 1:","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"You start the two Docker containers, test_sshd, and test_sshd2. We need to know their Docker IP-addresses. With the command ssh rob@<ip-address>, we enter the test_sshd container. Within this container, we generate a process id bound to the IP-address of test_ssh2.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"We create the file main.jl, which contains the base code for container-container communication.","category":"page"},{"location":"chapter20/#Activities-2a-and-2b:","page":"20. Using Remote Channels (old stuff)","title":"Activities 2a and 2b:","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Next, we use the example code to create a subscriber based on a name. We prefer to do the test with AppliGate's module RbO.jl. In chapter 12, you will use your modules.","category":"page"},{"location":"chapter20/#Activity-3:","page":"20. Using Remote Channels (old stuff)","title":"Activity 3:","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"You learn to write a function that can run remotely, and that saves a subscriber in an SQLite database on the container test_sshd2.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Activity-1:-Start-the-Julia-1.3.0-containers","page":"20. Using Remote Channels (old stuff)","title":"Activity 1: Start the Julia 1.3.0 containers","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Prerequisites:","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Docker is installed on your computer.\nYou have the two containers test_sshd and test_sshd2 created in chapter 9, Create the Container.\nBoth containers are SSH enabled.\nYou have a Internet connection to download the RbO.jl module.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Steps:","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Start both containers and check their Docker internal IP-address.\nUse SSH to connect from testsshd to testsshd2 and install RbO.jl in both containers.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Step-1-Start-both-containers-and-check-their-Docker-internal-IP-address","page":"20. Using Remote Channels (old stuff)","title":"Step 1 - Start both containers and check their Docker internal IP-address","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Step Action Comment\n1 $ docker start test_sshd \n2 $ docker start test_sshd2 \n3 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd e.g. 172.17.0.2\n3 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd2 e.g. 172.17.0.3","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Step-2-Use-SSH-to-connect-from-test_sshd-to-test_sshd2-and-install-RbO.jl","page":"20. Using Remote Channels (old stuff)","title":"Step 2 - Use SSH to connect from test_sshd to test_sshd2 and install RbO.jl","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Install RbO in both containers, Example of adding the module","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Step Action Comment\n1 $ ssh rob@172.17.0.2 Enter the container test_sshd.\n2 $ ssh rob@172.17.0.3 Enter the container test_sshd3.\n3 $ julia Start Julia.\n4 julia> ] Go to the package manager.\n5 pkg> add https://github.com/rbontekoe/RbO.jl Install RbO.jl.\n6 Ctrl-C Return to REPL prompt.\n7 Ctrl-D Leave Julia.\n8 Ctrl-D Leave the container test_sshd2.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"note: Note\nIf your container is running on a remote machine, you have to use the ip-address of the remote machine and the exported port of the container to connect to.$ docker start test_sshd # start the container test_sshd$ docker port test_sshd # display the port, e.g. 22/tcp -> 0.0.0.0:32768$ ssh 192.168.xxx.xxx -p 32768 # connect to the container on remote machine","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#main.jl","page":"20. Using Remote Channels (old stuff)","title":"main.jl","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"We use a function to run code in another container. The function will be called in a while loop. Because we use this construction more often, we pass the function as argument to a function called remote_body. Through the channel you transport the data for the function. We store he code of the remote_body function in the file main.jl.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"note: Note\nMaybe all the stuff can much more easier be accomplished by using:remotecall_fetch(f1, 2, createSubscriber(\"Daisy\"))\nremotecall_fetch(f2, 2, \"subscribers\")\nremotecall_fetch(f3, 4, [\"Gekke Jan\"], \"subscribers\")@everywhere f3(x, y) = begin\n    s = createSubscriber(x)\n    db = connect(\"./rbo.sqlite\")\n    create(db, y, [s])\n    true\nend","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"using Distributed\n\n#=\nThe container that wants to run code on another container initiate this function.It has two arguments:\n- pid, the process id created wi th the addprocs function.\n- funct, to run on the container, or remote machine. funct is in this example a function that accepts only one argument.\n=#\nfunction remote_body(pid::Int, funct)\n    tx = RemoteChannel(() -> Channel(32)) # local transmit channel\n    rx = RemoteChannel(() -> Channel(32)) # local receive channel\n\n    # run the code on the process id that has been passed\n    @async @spawnat pid begin\n        while true\n\t    try\n                if isready(tx) # channel has data\n\n                    # get the data from the tx-channel\n                    value = take!(tx)\n\n                    # execute the code of the function that was passed as argument\n                    result = funct(value)\n\n                    # for test purposes\n                    #@show result\n\n                    # put the result of the function on the rx-channel\n                    put!(rx, result)\n                else\n\n                    # for test purposes\n                    #which_funct = string(funct) * \" on process \" * string(myid()) * \" is waiting for data.\"\n                    #@show which_funct\n\n                    # the code wait until there is data on the tx-channel\n                    wait(tx)\n                end\n\t    catch e\n\t       put!(rx, e)\n\t    end\n        end\n    end\n\n    # return transmit and receive channel, so the calling container can communicate with the called container.\n    tx, rx\n\nend # defined remote_body\n\nd = Dict([]) # empty directory for pids, used by the calling container","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Activity-2a:-Start-the-two-containers-and-create-main.jl","page":"20. Using Remote Channels (old stuff)","title":"Activity 2a: Start the two containers and create main.jl","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Prerequisites:","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Docker is installed on your computer.\nYou have the two containers testsshd and testsshd2 created in Chapter 9, Create the Container.\nBoth containers are SSH-enabled.\nJulia is installed in the directory julia on the containers.\nThe RbO.jl package is installed in both containers.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Steps","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Start the container test_sshd and create main.jl with nano.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#.-Start-the-container-test_sshd-and-create-main.jl-with-nano.","page":"20. Using Remote Channels (old stuff)","title":"1. Start the container test_sshd and create main.jl with nano.","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Step Action Comment\n1 $ docker start test_sshd Start the first container.\n2 $ docker inspect -f \"{{ .NetworkSettings.IPAddress }}\" test_sshd Displays docker address, eg, 172.17.0.2.\n3 Take a note of the ip-address of test_sshd \n4 $ docker start test_sshd2 Start the second container.\n5 Take a note of the ip-address of test_sshd2 \n6 $ ssh rob@172.17.0.2 Use the ip-address step 2.\n7 Copy the main.jl code to the clipboard. \n8 $ nano main.jl Open a new file.\n9 Ctrl-Shift-V Paste the code form the clipboard.\n10 Ctrl-O Save the file.\n11 Ctrl-X Exit the editor.\n12 $ julia Start Julia, and continue at step 13 of Activity 2: Test the code","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Example-test-code","page":"20. Using Remote Channels (old stuff)","title":"Example test code","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"julia> include(\"main.jl\")\nDict{Any,Any} with 0 entries\n\njulia> addprocs([(\"rob@172.17.0.3\", 1)])\n1-element Array{Int64,1}:\n 2\n\njulia> d[\"test_sshd2\"] = last(workers())\n2\n\njulia> @everywhere using RbO\n\njulia> tx1, rx1 = remote_body(d[\"test_sshd2\"], createSubscriber)\n(RemoteChannel{Channel{Any}}(1, 1, 7), RemoteChannel{Channel{Any}}(1, 1, 8))\n\njulia> tx2, rx2 = remote_body(d[\"test_sshd2\"], createPublisher)\n(RemoteChannel{Channel{Any}}(1, 1, 10), RemoteChannel{Channel{Any}}(1, 1, 11))\n\njulia> put!(tx1, \"Donald Duck\") # transmit value \"Donald Duck\" to container\nRemoteChannel{Channel{Any}}(1, 1, 7)\n\njulia> put!(tx2, \"The New York Times\")\nRemoteChannel{Channel{Any}}(1, 1, 10)\n\njulia> isready(rx1) ? take!(rx1) : \"\" # receive result\nSubscriber(\"1687381951631187484\", \"Donald Duck\", \"\", MEAN_CALCULATOR)\n\njulia> isready(rx2) ? take!(rx2) : \"\"\nPublisher(\"18206665133840381206\", \"The New York Times\", NEWSPAPER, Subscriber[])\n\njulia> @async while true\n           if isready(rx1)\n               @show take!(rx1)\n           else\n               wait(rx1)\n           end\n       end\nTask (runnable) @0x00007fbf925c5ae0\n\njulia> @async while true\n           if isready(rx2)\n               @show take!(rx2)\n           else\n               wait(rx2)\n           end\n       end\nTask (runnable) @0x00007fbf92f59ae0\n\njulia> put!(tx1, \"Daisy Duck\")\nRemoteChannel{Channel{Any}}(1, 1, 7)\n","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Activity-2b:-Test-the-code","page":"20. Using Remote Channels (old stuff)","title":"Activity 2b: Test the code","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Prerequisites:","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Actitvity 2a","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Step Action Comment\n13 Copy all the Test code example code to the clipboard, including the julia prompt and the response \n14 Return to the container \n15 Ctrl-Shfi-V Paste the text on the clipboard in the Julia REPL.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"The result should look like the next example:","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"julia> take!(rx1) = Subscriber(\"15498821131237366424\", \"Donald Duck\", \"\", MEAN_CALCULATOR)\ntake!(rx2) = Publisher(\"8593928998820612462\", \"The New York Times\", NEWSPAPER, Subscriber[])\ntake!(rx1) = Subscriber(\"17785241625571045887\", \"Daisy Duck\", \"\", MEAN_CALCULATOR)","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#Activity-3:-Run-a-function-in-the-remote-container","page":"20. Using Remote Channels (old stuff)","title":"Activity 3: Run a function in the remote container","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Create and save a subscriber in the container test_sshd2. Then display all saved subscribers From a table. See also  RbO.jl.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Prerequisites:","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Activity 1\nActivity 2a & 2b\nThe package SQLite.jl is installed.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Steps:","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Install SQLite.jl\nTry the example code\nUse the RbO.jl documentation","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#.-Install-SQLite.jl","page":"20. Using Remote Channels (old stuff)","title":"1. Install SQLite.jl","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Step Action Comment\n1 Enter test_sshd and start Julia \n2 Go to the package manager \n3 pkg > add SQLite ","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#.-Try-the-example-code","page":"20. Using Remote Channels (old stuff)","title":"2. Try the example code","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Try the code below.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"include(\"main.jl\")\n\naddprocs([(\"rob@172.17.0.3\", 1)])\n\nd[\"test_sshd2\"] = last(workers())\n\n@everywhere using RbO\n\n# define a new function\n@everywhere f1(x) = begin\n  s = createSubscriber(x) # create a subscriber\n\tdb = connect(\"./rbo.sqlite\") # connect to database\n  create(db, \"subscribers\", [s]) # save subscriber in database\nend\n\n# activate remote_body for the new function\ntx1, rx1 = remote_body(d[\"test_sshd2\"], f1)\n\n# create and save the subscriber Donald Duck\nput!(tx1, \"Donald Ducky\")\n\n# the display routine\n@async while true\n\tif isready(rx1)\n  \t@show take!(rx1)\n  else\n    wait(rx1)\n  end\nend\n\n# define a new function for displaying all subscribers\n@everywhere f2(x) = begin\n\tdb = connect(\"./rbo.sqlite\") # connect to database\n\tgather(db, x) # list all items in table x\nend\n\n# activate remote_body for the new function\ntx2, rx2 = remote_body(d[\"test_sshd2\"], f2)\n\n# All subscribers in the table subscribers\nput!(tx2, \"subscribers\")\n\n# the display routine\n@async while true\n\tif isready(rx2)\n  \t@show take!(rx2)\n  else\n    wait(rx2)\n  end\nend\n\n# Remove process\nrmprocs(d[\"test_sshd2\"])\n\n# Remove key from dictionary\ndelete!(d, \"test_sshd2\")\n","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"","category":"page"},{"location":"chapter20/#.-Use-the-RbO.jl-documentation","page":"20. Using Remote Channels (old stuff)","title":"3. Use the RbO.jl documentation","text":"","category":"section"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Use the documentation to do the next steps.","category":"page"},{"location":"chapter20/","page":"20. Using Remote Channels (old stuff)","title":"20. Using Remote Channels (old stuff)","text":"Step Action Comment\n1 Use the command connect to create a link to the on-disk database rbo.sqlite \n2 Use the command 'gather' to retieve data from the SQL table subscribers ","category":"page"},{"location":"chapter9/#.-Introduction","page":"9. Introduction","title":"9. Introduction","text":"","category":"section"},{"location":"chapter9/","page":"9. Introduction","title":"9. Introduction","text":"UNDER DEVELOPMENT!","category":"page"},{"location":"chapter9/#What-is-Docker?","page":"9. Introduction","title":"What is Docker?","text":"","category":"section"},{"location":"chapter9/#What-is-a-Dockerfile","page":"9. Introduction","title":"What is a Dockerfile","text":"","category":"section"},{"location":"chapter9/#What-is-docker-compose","page":"9. Introduction","title":"What is docker-compose","text":"","category":"section"},{"location":"chapter19/#.-Activity-diagrams","page":"19. Activity diagrams","title":"19. Activity diagrams","text":"","category":"section"},{"location":"chapter19/","page":"19. Activity diagrams","title":"19. Activity diagrams","text":"Old stuff I want to keep!","category":"page"},{"location":"chapter19/#General-Ledger-workflow","page":"19. Activity diagrams","title":"General Ledger - workflow","text":"","category":"section"},{"location":"chapter19/","page":"19. Activity diagrams","title":"19. Activity diagrams","text":"âš‰ process(entries::JournalEntry)\nâ†“\narchive(::Array{JournalEntry})\nâ†“\nbook(::Array{JournalEntry)::Array{Record}\nâ†“\nâ—‰","category":"page"},{"location":"chapter19/#Sales-workflow","page":"19. Activity diagrams","title":"Sales - workflow","text":"","category":"section"},{"location":"chapter19/","page":"19. Activity diagrams","title":"19. Activity diagrams","text":"âš‰ process()::Array{:Order}\nâ†“\ncreate_training()::Training\nâ†“\ncreate_org()::Organization\nâ†“\ncreate_order()::Order\nâ†“\nâ—‰","category":"page"},{"location":"chapter11/#.-Creating-containers-on-the-Raspberry-Pi","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"UNDER DEVELOPMENT!!! - Almost ready","category":"page"},{"location":"chapter11/#What-you-will-learn","page":"11. Creating containers on the Raspberry Pi","title":"What you will learn","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Pages = [\"chapter11.md\"]","category":"page"},{"location":"chapter11/#Create-the-image-and-the-container","page":"11. Creating containers on the Raspberry Pi","title":"Create the image and the container","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Prerequisites:","category":"page"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Your have Rasbian OS on your Raspberry Pi.\nYou have nano installed (apt-get update && apt-get install nano)\nYou have started your computer.\nYou have installed Docker (See appendix). TODO Check whether instructions are still right!!!","category":"page"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Steps:","category":"page"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Create a Dockerfile in the folder test-sshd.\nCreate a Docker image eg_ssdh and the container test_sshd.\nCreate a user rob, who has administrator rights.\nCheck whether you have SSH access to the container.","category":"page"},{"location":"chapter11/#Remove-next-text","page":"11. Creating containers on the Raspberry Pi","title":"Remove next text","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Following the instructions on Dockerize an SSH service.","category":"page"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Created the container on Raspberry Pi.\nTried the connection; it works nice but I have to login with a password.","category":"page"},{"location":"chapter11/#.-Create-a-Dockerfile-in-the-folder-test_ssh","page":"11. Creating containers on the Raspberry Pi","title":"1. Create a Dockerfile in the folder test_ssh","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Step Action Comment\n1 ssh pi@xxx.xxx.xxx.xxx Login on Raspberry Pi.\n2 Folow the instructions on 1. Create a Dockerfile in the folder test_ssh Same Dockerfile","category":"page"},{"location":"chapter11/#.-Create-a-Docker-image-eg_sshd-and-the-container-test_sshd","page":"11. Creating containers on the Raspberry Pi","title":"2. Create a Docker image eg_sshd and the container test_sshd","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Step Action Comment\n1 $ docker build -t eg_sshd . Create a Docker image from the Dockerfile\n2 $ docker run -d -p 2222:22 --name test_sshd eg_sshd Create a container","category":"page"},{"location":"chapter11/#.-Create-a-user-rob,-who-has-administrator-rights","page":"11. Creating containers on the Raspberry Pi","title":"3. Create a user rob, who has administrator rights","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Follow the instructions on 3. Create a user rob, who has administrator rights.","category":"page"},{"location":"chapter11/#.-Check-whether-you-have-SSH-access-to-the-container.","page":"11. Creating containers on the Raspberry Pi","title":"4. Check whether you have SSH access to the container.","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Step Action Comment\n1 $ ssh rob@xxx.xxx.xxx.xxx -p 2222 Use the ip-address of your Raspberry Pi.\n2 Login with the password you specified in previous step 3 You should see something like rob@675c5140e449:~$.","category":"page"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"info: Info\nYou can Copy your file with your file id_rsa.pub in the folder ~/.ssh to establish passwordless access to your container. Use the command ssh-copy-id rob@xxx.xxx.xxx.xxx -p 2222, either form your laptop or a container on your laptop.  In this case is xxx.xxx.xxx.xxx the ip-address of your Raspberry Pi.","category":"page"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Step Action Comment\n1 Ctrl-D Leave the container.\n2 Ctrl-D Leave the Raspberry Pi.\n3 $ sudo docker start test_sshd Start the test_sshd container on your laptop.\n4 $ ssh-copy-id rob@xxx.xxx.xxx.xxx -p 2222 copy your public key to the container running on the Raspberry Pi.\n5 $ ssh rob@xxx.xxx.xxx.xxx -p 22222 Connect to the remote container. The first time you have to login.","category":"page"},{"location":"chapter11/#Install-Julia","page":"11. Creating containers on the Raspberry Pi","title":"Install Julia","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"Step Action Comment\n1 $ mkdir julia Leave the container.\n2 $ cd julia \n3 $ wget -c https://julialang-s3.julialang.org/bin/linux/armv7l/1.3/julia-1.3.1-linux-armv7l.tar.gz Download the file.\n8 $ tar -zxvf julia-1.3.1-linux-armv7l.tar.gz Extract the file.\n9 $ ls List the content of the folder.\n julia-1.3.1  julia-1.3.1-linux-armv7l.tar.gz \n10 $ cd julia-1.3.0/bin/ We will test Julia.\n11 $ ./julia Start Julia.","category":"page"},{"location":"chapter11/#Response","page":"11. Creating containers on the Raspberry Pi","title":"Response","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"   _       _ _(_)_     |  Documentation: https://docs.julialang.org\n  (_)     | (_) (_)    |\n   _ _   _| |_  __ _   |  Type \"?\" for help, \"]?\" for Pkg help.\n  | | | | | | |/ _` |  |\n  | | |_| | | | (_| |  |  Version 1.3.1 (2019-12-30)\n _/ |\\__'_|_|_|\\__'_|  |  Official https://julialang.org/ release\n|__/                   |","category":"page"},{"location":"chapter11/#Create-symbolic-link","page":"11. Creating containers on the Raspberry Pi","title":"Create symbolic link","text":"","category":"section"},{"location":"chapter11/","page":"11. Creating containers on the Raspberry Pi","title":"11. Creating containers on the Raspberry Pi","text":"ln -s /home/rob/julia/julia-1.3.1/bin/julia /usr/local/bin/julia","category":"page"},{"location":"chapter18/#PosgreSQL","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"","category":"section"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"urls","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"https://www.postgresql.org/download/linux/ubuntu/\nhttps://linuxize.com/post/how-to-install-postgresql-on-ubuntu-18-04/\nhttps://www.a2hosting.com/kb/developer-corner/postgresql/managing-postgresql-databases-and-users-from-the-command-line","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"sudo apt install libpq5","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"====","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"Naar https://www.postgresql.org/download","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"kies Ubuntu","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"kies Bionic(18.04)","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"in bestand /etc/apt/sources.list.d/pgdg.list, zet:","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"deb http://apt.postgresql.org/pub/repos/apt/ bionic-pgdg main","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"wget â€“quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"sudo apt-get update","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"====","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"$ sudo apt install postgresql postgresql-contrib","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"$ sudo -u postgres psql -c \"SELECT version();\"","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"====","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"$ sudo su - postgres","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"postgres@rob-Lenovo-Y520-15IKBN:~$ createuser â€“interactive â€“pwprompt","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"postgres@rob-Lenovo-Y520-15IKBN:~$ createdb johndb","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"postgres@rob-Lenovo-Y520-15IKBN:~$ psql","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"postgres=# grant all privileges on database johndb to john;","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"====","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"$ sudo service postgresql restart","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"====","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"$ julia","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"julia> using DataFrames","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"julia> using LibPQ","category":"page"},{"location":"chapter18/","page":"18 - PosgreSQL","title":"18 - PosgreSQL","text":"julia> conn = LibPQ.Connection(\"host=localhost dbname=johndb user=john password=xxxxxxx\")","category":"page"},{"location":"notebook/#IJulia-Notebook","page":"IJulia Notebook","title":"IJulia Notebook","text":"","category":"section"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Pages = [\"notebook.md\"]","category":"page"},{"location":"notebook/#What-is-a-notebook?","page":"IJulia Notebook","title":"What is a notebook?","text":"","category":"section"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"In this case, \"notebook\" or \"notebook documents\" denote documents that contain both code and rich text elements, such as figures, links, equations, ... Because of the mix of  code and text elements, these documents are the ideal place to bring together an analysis description, and its results, as well as, they can be executed perform the data analysis in real tme.See","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Top","category":"page"},{"location":"notebook/#Options-to-use-a-notebook","page":"IJulia Notebook","title":"Options to use a notebook","text":"","category":"section"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"You have several option to work with IJulia:","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"You have installed Julia on your own machine.\nYou have installed Docker on your own machine and run IJulia from a container with Julia and IJulia installed.\nYou make use of the IJulia server installed on the machne of your instructor.","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"The IJulia Notebook is installed on the machine of the instructor, but you can also install IJula on your own notebook. Follow the instruction in the appendix.","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Top","category":"page"},{"location":"notebook/#Starting-IJulia","page":"IJulia Notebook","title":"Starting IJulia","text":"","category":"section"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Ask your instructor for the public ip-address and the token.","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"The first time you enter the IJulia server, it will ask you one time for the token.","category":"page"},{"location":"notebook/#Login-to-the-IJulia-server","page":"IJulia Notebook","title":"Login to the IJulia server","text":"","category":"section"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Step Action Comment\n1 Start browser \n2 http://x.x.x.x:8888 Ask instructor for the complete the public ip-address of the IJulia server\n3 Enter the token in the Password or token field \n4 Click on the Log in button ","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Top","category":"page"},{"location":"notebook/#Create-a-new-notebook","page":"IJulia Notebook","title":"Create a new notebook","text":"","category":"section"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"(Image: Test)","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Step Action/Response Comment\n1 Click on work directory \n2 Click on button New Open New menu.\n3 Select on item Julia.x.x.x Create a new Julia Notebook.\n New Notebook is opened \n4 Place the cursor in the first cel In this cell you can type your code.\n5 println(\"Hello World!\") Type your Julia code.\n6 Shift-Enter Activate the code and create a new cell","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Top","category":"page"},{"location":"notebook/#Notebook-commands","page":"IJulia Notebook","title":"Notebook commands","text":"","category":"section"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Working with a Notebook is rather intuitive. Here are some commands you will often use.","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Command Comment\nShift-Enter Execute code and create a new cell below.\nCtrl-Enter Execute code and stay in the cell\nTab Code completion, e.g. printl-Tab => println.\nDouble Tab List with option, e.g. print-Tab displays print, println, and printstyled\n\\sqrt-tab Special characters, in this case âˆš.\nEsc-A Create empty cell above the current cell.\nEsc-B Create empty cell below current cell.\nEsc-M Change to a markdown cell.\nEsc-Y Change to code cell.","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Click on the keyboard icon to see more options.","category":"page"},{"location":"notebook/","page":"IJulia Notebook","title":"IJulia Notebook","text":"Top","category":"page"},{"location":"notebook/#Summary","page":"IJulia Notebook","title":"Summary","text":"","category":"section"},{"location":"chapter14/#.-Logging","page":"14. Logging","title":"14. Logging","text":"","category":"section"},{"location":"chapter14/#What-you-will-learn","page":"14. Logging","title":"What you will learn","text":"","category":"section"},{"location":"chapter14/","page":"14. Logging","title":"14. Logging","text":"Pages = [\"chapter14.md\"]","category":"page"},{"location":"chapter14/","page":"14. Logging","title":"14. Logging","text":"This link looks interesting: Logging","category":"page"},{"location":"chapter14/","page":"14. Logging","title":"14. Logging","text":"julia> using Logging\n\njulia> io = open(\"log.txt\", \"w+\");\n\njulia> logger = SimpleLogger(io);\n\njulia> with_logger(logger) do\n           @info(\" here is some context specific logging\")\n       end\n\nshell> cat log.txt\n\njulia> flush(io);\n\nshell> cat log.txt\nâ”Œ Info:  here is some context specific logging\nâ”” @ Main REPL[7]:2\n\njulia> global_logger(logger);\n\njulia> @info(\"All logs will use the global logger by default.\");\n\nshell> cat log.txt\nâ”Œ Info:  here is some context specific logging\nâ”” @ Main REPL[7]:2\n\njulia> close(io);\n\nshell> cat log.txt\nâ”Œ Info:  here is some context specific logging\nâ”” @ Main REPL[7]:2\nâ”Œ Info: All logs will use the global logger by default.\nâ”” @ Main REPL[12]:1","category":"page"},{"location":"chapter2/#The-design","page":"2 - The design","title":"2 - The design","text":"","category":"section"},{"location":"chapter2/#What-you-will-learn","page":"2 - The design","title":"What you will learn","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Pages = [\"chapter2.md\"]","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"First, let's look at some terms and definitions. We'll convert the procedure Invoicing into an activity diagram. Using the Onion Architecture pattern, we define the Domain objects and the Julia API-functions. In the Infrastructure layer, we put the functions that interact with the outer world and the inner layers.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"","category":"page"},{"location":"chapter2/#Terms-and-definitions","page":"2 - The design","title":"Terms and definitions","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The points of attention are:","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Procedure,\nDomain-driven design,\nDistributed processing, and\nStyle conventions.","category":"page"},{"location":"chapter2/#Procedure","page":"2 - The design","title":"Procedure","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"A procedure is a description of work practice, a workflow. It describes a series of activities or actions in a particular order and interacts with people and machines. Actions make use of resources. Data, a service or a product, is the output of work.","category":"page"},{"location":"chapter2/#Domain-driven-design","page":"2 - The design","title":"Domain-driven design","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Each process should be domain-specific. Subject matter experts and users of the domain speak the same language and use the same definitions and synonyms for concepts and objects. It leads to a Domain-driven design paradigm.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The Onion Architecture lends itself perfectly to the domain-driven design pattern. It divides an application into four areas: core, domain, API, and infrastructure.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The core consists out of the Julia language constructs and Julia modules. Modules are also called packages.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The next layer, the domain, defines the domain entities and concepts. Between its elements, there must be coherence. You only use constructs from the core. UnpaidInvoice is an example.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The next peel is the API. The API consists of Julia functions that operate on the domain elements, and are used to create programs. You only use constructs from the core and the domain.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"create_unpaidinvoice, create_paidinvoice, create_pdf are examples.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The infrastructure layer is the ultimate peel. With its functions, it communicates with the external world. Adapters overcome mismatches between interfaces. When you write you the code, you use elements from the inner layers.","category":"page"},{"location":"chapter2/#Distributed-processing","page":"2 - The design","title":"Distributed processing","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Programs, written in Julia language, also can run on other processor cores. Even in Docker containers on remote machines. Julia uses the master-worker concept. It means that the master executes Julia's functions on workers.","category":"page"},{"location":"chapter2/#Style-conventions","page":"2 - The design","title":"Style conventions","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The article Blue: a Style Guide for Julia describes the style conventions.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"","category":"page"},{"location":"chapter2/#A-procedure-as-a-starting-point","page":"2 - The design","title":"A procedure as a starting point","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"In 1994 we were delivering Lotus Notes instructor-led training in the Netherlands. We became ISO-9001 certified one year later. ISO is short for the International Organization for Standardization. A part of ISO is the section procedures.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"A procedure describes a workflow or business process. It specifies the activities to be carried out by people or machines and the resources that are required to produce a result.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"An input triggers a process. Every action creates an output, most of the time, modified information or side-effects such as saving data.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The example I use in the course is the procedure Invoicing.","category":"page"},{"location":"chapter2/#The-course-example","page":"2 - The design","title":"The course example","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"In 1998 we rewrote our procedures as a table. Every row represents an activity or action. Next to the events are the columns with the roles involved with the work. The original procedure:","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Procedure: Invoicing.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Roles: OM = Office Manage, AOM = Assistant Office Manager.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Input: List of orders.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Step Action AOM OM Output Tool Exception\n1 Create an invoice per order R A Created and authorized invoices Order file \n2 Archive a copy of the invoice R  Archived copy Accounts Receivable unpaid \n3 Send the invoice to the customer R I Invoice sent  \n4 Book the invoice R A Booked invoice General ledger \n5 Book the paid invoice R A Paid invoice Bank records, General ledger \n6 Archive the paid invoice R I Archived invoice Accounts Receivable paid \n7 Check unpaid invoices  R List of unpaid invoices to contact customer Note in CRM system ","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"RASCI","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"R = Responsible, the entity who is responsible for the execution of the activity.\nA = Approves, the entity who approves the result before going to the next step.\nS = Supports, the members of the team.\nC = Consults, an entity.\nI = Informed, notify the entity about the result.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Let's see how we can automate the procedure with Julia. We tackle it with a technique of Domain-Driven Design and the Onion architecture.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"","category":"page"},{"location":"chapter2/#The-procedure-as-an-activity-diagram","page":"2 - The design","title":"The procedure as an activity diagram","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The activity diagram represents the workflow. The actions are Julia functions. You can add typed arguments and return values in Julia, noted by a double colon (::) followed by the name of the type. This defines the domain entities, e.g., ::Order, ::UnpaidInvoice.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"âš‰ process(::Array{Order)\n    â†“\n    create(::Array{Order}::Array{UnpaidInvoice}\n    â†“\n    send_email(::Array{UnpaidInvoice}) # TODO\n    â†“\n    archive(::Array{UnpaidInvoice})\n    â†“\n    create(::Array{UnpaidInvoice}::Array{JournalEntry}\n    â†“\n    return ::Array{JournalEntry}\n    â†“\n    â—‰\n\nâš‰ process(::Array{UnpaidInvoice}, ::Array{BankStatement})\n    â†“\n    filter(::Array{UnpaidInvoice}, ::Array{Bankstatement})::Array{PaidInvoice}\n    â†“\n    archive(::Array{PaidInvoice})\n    â†“\n    create(::Array{PaidInvoice})::Array{JournalEntry}\n    â†“\n    return ::Array{JournalEntry}\n    â†“\n    â—‰\n\nâš‰ report(::Array{UnpaidInvoice}, days::Int) # TODO\n    â†“\n    filter(::Array{UnpaidInvoice, ::Int}::Array{UnpaidInvoiceDue}\n    â†“\n    return ::Array{UnpaidInvoiceDue}\n    â†“\n    â—‰","category":"page"},{"location":"chapter2/#The-design-2","page":"2 - The design","title":"The design","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"From the activity diagram we get:","category":"page"},{"location":"chapter2/#Domain-Elements","page":"2 - The design","title":"Domain Elements","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The domain objects (types) are:","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Domain Types:","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"UnpaidInvoice;\nPaidInvoice;\nBankStatement.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"External Types:","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"AppliSales.OrderÂ¹;\nAppliGeneralLedger.JournalEntryÂ².","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"General packages:","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"DatesÂ³;\nDataFramesÂ³","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Â¹ Defined in the package AppliSales.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Â² Defined in the package AppliGeneralLedger.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Â³ Dates is a sub-module of Julia. A package for manipulating data is DataFrames. The DataFrame data structure is comparable to a spreadsheet.","category":"page"},{"location":"chapter2/#API","page":"2 - The design","title":"API","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"The API contains the methods (functions) of the module. The methods use only elements from the core or domain. An overview of we need:","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"create(::Array{Order,1})::Array{UnpaidInvoice, 1}\ncreate(::Array{UnpaidInvoice, 1}, ::Array{BankStatement, 1})::Array{PaidInvoice,1)\nconv2entry(inv::Array{UnpaidInvoice, 1}, from::Int, to::Int)::Array{JournalEntry, 1}\nconv2entry(inv::Array{PaidInvoice, 1}, from::Int, to::Int)::Array{JournalEntry, 1}","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"In Julia, you can use the same function name as long as the signature is different, so other types and, or the number of arguments. One calls it multiple dispatch.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"An Order, consists of the data objects Training, and Company plus additional data about contact, and student. It is defined in domain.jl the support-package AppliSales.","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Also, we have already created a support-package AppliGeneralLedger to make it easier to test AppliAR.jl. JournalEntry is defined in domain.jl.","category":"page"},{"location":"chapter2/#Methods-of-the-Infrastructure-layer","page":"2 - The design","title":"Methods of the Infrastructure layer","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"Database, private methods:","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"add_to_file(file::String, data::Array{Any, 1}\nread_from_file(file::String)::Array{Any, 1}","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"External accessable methods:","category":"page"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"read_bank_statements(path::String)::Array{BankStatement,1}\nprocess(::Array{Order)::Array{JounalEntry, 1}\nprocess(::UnpaidInvoice, ::BankStatement)::Array{JounalEntry, 1}\nretrieve_unpaid_invoices()::Array{UnpaidInvoice, 1}\nretrieve_paid_invoice()::Array{PaidInvoice, 1}","category":"page"},{"location":"chapter2/#ToDo","page":"2 - The design","title":"ToDo","text":"","category":"section"},{"location":"chapter2/","page":"2 - The design","title":"2 - The design","text":"I am thinking of Literate.jl as a package to make PDFs.\nHow to attach a PDF to an email?\nHow to send an email?\nSMTPClient.jl","category":"page"},{"location":"overview/#Overview-Julia","page":"Overview Julia","title":"Overview Julia","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Pages = [\"overview.md\"]","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"There are many excellent courses on Julia. We suppose that the reader has some basic knowledge of Julia, as in Think Julia. We recapitulate the most important differences with other languages.","category":"page"},{"location":"overview/#Concatenation","page":"Overview Julia","title":"Concatenation","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"In Julia is the asterisk (*) used as a concatenation symbol instead of the plus-sign (+) in other languages.","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"julia> a = \"Hello \"\n\"Hello\"\n\njulia> b = \"World!\"\n\"World!\"\n\njulia> c = a * b\n\"Hello World!\"","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Top","category":"page"},{"location":"overview/#Iteration","page":"Overview Julia","title":"Iteration","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"See Think Julia, 7. Iteration","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Some examples.","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"julia> range = 0:0.1:0.5Ï€ # values from 0 to 0.5Ï€ radians (90Â°), with a step value of 0.1 radian\n0.0:0.1:1.5\n\njulia> y = [sin(x) for x in range] # calculate sin for the values in the variable range\n16-element Array{Float64,1}:\n 0.0                \n 0.09983341664682815\n 0.19866933079506122\n 0.2955202066613396\n 0.3894183423086505\n 0.479425538604203  \n 0.5646424733950355\n 0.6442176872376911\n 0.7173560908995228\n 0.7833269096274834\n 0.8414709848078965\n 0.8912073600614354\n 0.9320390859672264\n 0.963558185417193  \n 0.9854497299884603\n 0.9974949866040544\n\njulia> using Plots\n\njulia> plot(x -> sin(x) , 0:0.1:2Ï€) # passing a value to sin(x)\n\njulia> plot(sin, 0:0.1:2Ï€) # works also\n","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Top","category":"page"},{"location":"overview/#Help","page":"Overview Julia","title":"Help","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"\njulia> ?\nhelp?> sin\nsearch: sin sinh sind sinc sinpi sincos asin using isinf asinh asind isinteger\n\n  sin(x)\n\n  Compute sine of x, where x is in radians.\n\n  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n  sin(A::AbstractMatrix)\n\n  Compute the matrix sine of a square matrix A.\n\n  If A is symmetric or Hermitian, its eigendecomposition (eigen) is used to\n  compute the sine. Otherwise, the sine is determined by calling exp.\n\n  Examples\n  â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡\n\n  julia> sin(fill(1.0, (2,2)))\n  2Ã—2 Array{Float64,2}:\n   0.454649  0.454649\n   0.454649  0.454649","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Top","category":"page"},{"location":"overview/#User-defined-functions","page":"Overview Julia","title":"User defined functions","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"julia> function f(x, Ï•, b)\n         sin(x + Ï•) + b\n       end\nf (generic function with 1 method)\n\njulia> 0.3f(0.5Ï€, 0.1Ï€, 1)\n0.5853169548885461\n","category":"page"},{"location":"overview/#Multiple-dispatch","page":"Overview Julia","title":"Multiple dispatch","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"In object oriented languages like Java we can overload a method. Julia, however, is a functional language. Here we can use the same function name as long as the signatures are different.","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"julia> f(x) = sin(x) # function with one argument\nf (generic function with 1 methods)\n\njulia> f(x, Ïˆ) = sin(x - Ïˆ)  # function with two arguments\nf (generic function with 2 methods)\n\njulia> f(x, Ïˆ, b) = sin(x - Ïˆ) + b   # function with three arguments\nf (generic function with 3 methods)\n\njulia> f(x::Int64) = sin(x/180 * Ï€) # function in degrees, argument has to be an integer\nf (generic function with 4 methods)\n\njulia> methods(f) # show all methods of the function f\n# 4 methods for generic function \"f\":\n[1] f(x::Int64) in Main at REPL[10]:1\n[2] f(x) in Main at REPL[2]:1\n[3] f(x, Ïˆ) in Main at REPL[3]:1\n[4] f(x, Ïˆ, b) in Main at REPL[4]:1\n\njulia> f(0.5Ï€) # 90 degrees in radians\n1.0\n\njulia> f(0.5Ï€, 0.1Ï€) # with 0.1Ï€ phase shift in radians\n0.9510565162951536\n\njulia> f(0.5Ï€, 0.1Ï€, 1)\n1.9510565162951536\n\njulia> f(90) # 90 degrees as integer\n1.0\n\njulia> f(90.0) # should be 0.5Ï€\n0.8939966636005579\n","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Top","category":"page"},{"location":"overview/#User-defined-data-structures","page":"Overview Julia","title":"User defined data structures","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Julia is not a object oriented programming language. But you can define data structures with constructors, and use the dot notation to refer to its data elements.","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"\njulia> struct Subscriber\n           id::String\n           name::String\n           email::String\n           #constructors\n           Subscriber(name::String) = new( createKey(name), name, \"\" )\n           Subscriber(name::String, email::String) = new( createKey(name), name, email )\n       end # defined Subscriber object\n\njulia> createKey(name::String) = string(hash(name * string(time())))\ncreateKey (generic function with 1 method)\n\njulia> daisy = Subscriber(\"Daisy\")\nSubscriber(\"6761641919537447636\", \"Daisy\", \"\")\n\njulia> daisy.name\n\"Daisy\"","category":"page"},{"location":"overview/#Plotting-data","page":"Overview Julia","title":"Plotting data","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"See Plots","category":"page"},{"location":"overview/#Installing-the-Plots-package","page":"Overview Julia","title":"Installing the Plots package","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"julia> ]\n\n(v1.1) pkg> add Plots <Enter>\n\n(v1.1) pkg> Ctrl-C\n\njulia>","category":"page"},{"location":"overview/#Using-Plots","page":"Overview Julia","title":"Using Plots","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"\njulia> using Plots; gr()\n\njulia> plot(x -> sin(x/180 * Ï€), 0:01:360, xlabel=\"Degrees\", title=\"Plot sin\", label=\"No phase shift\")\n\njulia> Ïˆ = 30 # degrees\n30\n\njulia> plot!( x -> sin( (x - Ïˆ)/180 * Ï€ ), 0:01:360, label=\"$(Ïˆ)Â° phase shift\")\n","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Top","category":"page"},{"location":"overview/#Useful-to-know-Version-1.1.1-(2019-05-16)","page":"Overview Julia","title":"Useful to know - Version 1.1.1 (2019-05-16)","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Testing conditions","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"julia> x = 5\n5\n\njulia> 0 < x < 6\ntrue\n\njulia> 0 â‰¤ x â‰¤ 5 # â‰¤  is \\le<Tab>\ntrue\n\njulia> 0 â‰¤ x â‰¤ 4\nfalse\n\njulia> 5 â‰¥ x â‰¥ 0 # â‰¥ is \\ge<Tab>\ntrue\n\njulia> x â‰  4 # â‰  is \\ne<Tab>\ntrue\n","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Sets, symbolsÏ€","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"julia> a = [1, 2, 3]\n3-element Array{Int64,1}:\n 1\n 2\n 3\n\njulia> b = [3, 4, 5]\n3-element Array{Int64,1}:\n 3\n 4\n 5\n\njulia> a âˆ© b # âˆ© is \\cap<Tab>, also intersect(a, b)\n1-element Array{Int64,1}:\n 3\n\njulia> a âˆª b # âˆ© is \\cup<Tab>, also union(a, b)\n5-element Array{Int64,1}:\n 1\n 2\n 3\n 4\n 5\n\njulia> symdiff(a, b) # forgot the symbol\n4-element Array{Int64,1}:\n 1\n 2\n 4\n 5\n\njulia> 3 âˆˆ a # 3 element of a, \\in<Tab>\ntrue\n\njulia> 3 âˆ‰ a # 3 not an element of a, \\notin<Tab>\nfalse\n\njulia> a âŠ† b # a subset of b, âŠ† is \\subseteq<Tab>\nfalse\n\njulia> b âŠ‡ [3, 4] # b is superset of [3, 4], âŠ† = \\supseteq<Tab>\ntrue","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Natural constant â„¯ and Ï€","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"\njulia> â„¯ # \\euler<Tab>\nâ„¯ = 2.7182818284590...\n\njulia> Ï€ # \\pi<Tab>\nÏ€ = 3.1415926535897...\n\njulia> factorial(4)\n24\n\njulia> 1*2*3*4\n24","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Functional programming","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"\njulia> a = [2, 3, 4]\n3-element Array{Int64,1}:\n 2\n 3\n 4\n\njulia> map(x -> x^2, a)\n3-element Array{Int64,1}:\n 4\n 9\n16\n\njulia> reduce( (x, y) -> x + y, a)\n9\n\njulia> sum(a)\n9\n\njulia> reduce( (x, y) -> x^2 + y^2, a)\n185\n\njulia> (2^2 + 3^2)^2 + 4^2\n185","category":"page"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Top","category":"page"},{"location":"overview/#Summary","page":"Overview Julia","title":"Summary","text":"","category":"section"},{"location":"overview/","page":"Overview Julia","title":"Overview Julia","text":"Top","category":"page"},{"location":"chapter5/#.-Creating-modules","page":"5. Creating modules","title":"5. Creating modules","text":"","category":"section"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"UNDER DEVELOPMENT!","category":"page"},{"location":"chapter5/#What-you-will-learn","page":"5. Creating modules","title":"What you will learn","text":"","category":"section"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"Pages = [\"chapter5.md\"]","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"With modules we can build applications. A module is a demarcated unit, with its own namespace. You create a module with the package manages command generate, as we did during step 5 in the activity of the previous chapter.","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"The command created tho next:","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"Project.toml\nsrc/AppliInvoicing.jl","category":"page"},{"location":"chapter5/#AppliInvoicing.jl","page":"5. Creating modules","title":"AppliInvoicing.jl","text":"","category":"section"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"module AppliInvoicing #1\n\ngreet() = print(\"Hello World!\") #2\n\nexport create, process, retrieve_unpaid_invoices, read_bank_statements \\#3\n\ninclude(\"./infrastructure/infrastructure.jl\") #4\n\nend # module\n","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"#1 The module block with its name.","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"#2 Initial the only statements, can be removed.","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"#3 The functions that other programs can use.","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"#4 The path to our model.","category":"page"},{"location":"chapter5/#Exports","page":"5. Creating modules","title":"Exports","text":"","category":"section"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"Exports are the interface to the module. Here you mention the function from the API and infrastructure layers. I don't export elements from the domain; one can use the import statement when a reference is necessary.","category":"page"},{"location":"chapter5/#Dependencies","page":"5. Creating modules","title":"Dependencies","text":"","category":"section"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"The file Project.toml contains the base information of the module and the dependencies.","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"name = \"AppliInvoicing\"\nuuid = \"3941c6da-33b5-11ea-2884-afa98fed5e3b\"\nauthors = [\"Rob Bontekoe <rbontekoe@appligate.nl>\"]\nversion = \"0.2.0\"\n\n[deps]\nAppliGeneralLedger = \"153ef306-36d1-11ea-1f0d-e3f38f84e10d\"\nAppliSales = \"a1ddd20a-2e39-11ea-38f9-6b919ef027c3\"\nCSV = \"336ed68f-0bac-5ca0-87d4-7b16caf5d00b\"\nDataFrames = \"a93c6f00-e57d-5684-b7b6-d8193f3e46c0\"\nDates = \"ade2ca70-3891-5945-98fb-dc099432e06a\"\nLogging = \"56ddb016-857b-54e1-b83d-db4d58db5568\"\nSQLite = \"0aa819cd-b072-5ff4-a722-6bc24af294d9\"\nTest = \"8dfed614-e22c-5e08-85e1-65c5234f0b40\"","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"Initial is the section [deps] empty. Dependencies are automatically if you activate the project mode with: ] activate ./ and add a package.","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"Use update in this mode to receive the latest package versions.","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"Use remove to delete a package from the list.","category":"page"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"Use gc to remove unnecessary stuff.","category":"page"},{"location":"chapter5/#GitHub","page":"5. Creating modules","title":"GitHub","text":"","category":"section"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"In chapter 4 you learned how to create a Julia package at GitHub.","category":"page"},{"location":"chapter5/#Download-a-package","page":"5. Creating modules","title":"Download a package","text":"","category":"section"},{"location":"chapter5/","page":"5. Creating modules","title":"5. Creating modules","text":"To add a package that is not registered at Julialang, you use command add followed by the (git) package name , e.g. add https://github.com/rbontekoe/AppliGeneralLedger.jl.","category":"page"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"(Image: AppliGate)","category":"page"},{"location":"#Building-Business-Applications-with-Julia","page":"Business Applications with Julia","title":"Building Business Applications with Julia","text":"","category":"section"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"In this course, you learn to create Julia modules. The software you write makes use of these modules and runs in Docker containers.","category":"page"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"info: Info\nSee the Blog for the latest remarks!","category":"page"},{"location":"#Preface","page":"Business Applications with Julia","title":"Preface","text":"","category":"section"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"In July 2018, I read an article about a new programming language that was rapidly gaining in popularity, Julia. It appealed to me how you could define a function. Almost exactly as I learned it during my bachelor study electronics: f(x) = 2xÂ² + 3x + 1, in Julia written as f(x) = 2x^2 + 3x + 1. Then I set up a project to learn how to implement the observer pattern. It was easy, but shelved it because I was working on Scala at that moment.","category":"page"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"While working with Scala, I came in touch with the Onion Architecture, after watching Wade Waldron's presentation, Domain-Driven Design, and Onion Architecture. Since then, I use it.","category":"page"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"The ease with which I could build business applications with Julia stayed with me.","category":"page"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"At the beginning of 2019, a recruiter told me that the interest in Scala in the Netherlands was waning. Should I continue with Scala?","category":"page"},{"location":"#A-course-was-born","page":"Business Applications with Julia","title":"A course was born","text":"","category":"section"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"I decided to stop with Scala and picked up my Julia observer trial project again. From the code, I created a Julia package, RbO.jl.","category":"page"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"It turned out that you can create effective documentation, using the package Documenter.jl. You write it in the markdown language and can insert examples of how to use your code. During the creation of the HTML code, you can have the cases tested, which is useful if you later expand the module and generate the documentation again. The documentation can be seen at the GitHub Pages.","category":"page"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"I had already a GitHub Pages profile, and thought: \"Why not set up the AppliGate website in this way and link it to my profile.\" I did it: https://www.appligate.nl.","category":"page"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"With trying out so many things with Julia, the problem arose that I could not find specific trials back in my notes. After the success of the website, I thought: \"Why not set up a course where I can register all the interesting things?\".","category":"page"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"In June 2020, I discovered a new package called Rocket.jl which supports the actor model. I know the actor model from my Scala and Akka period. It makes your application more robust and the workflow easier. It is the main reason I rewrite the course.","category":"page"},{"location":"#Developing-Business-Applications-with-Julia","page":"Business Applications with Julia","title":"Developing Business Applications with Julia","text":"","category":"section"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"The result is this course Business Applications with Julia I am creating now.","category":"page"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"Rob Bontekoe","category":"page"},{"location":"#Index-(Course-is-under-development)","page":"Business Applications with Julia","title":"Index (Course is under development)","text":"","category":"section"},{"location":"","page":"Business Applications with Julia","title":"Business Applications with Julia","text":"Pages = [\"index.md\",\n\"chapter1.md\",\n\"chapter2.md\",\n\"notebook.md\",\n\"overview.md\",\n\"appendix.md\",\n\"references.md\"]","category":"page"}]
}
